<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.34">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Análisis de volatilidad del subset de indicadores tipo tasa – Pulso Social – Antioquia</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script><script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-c8ad9e5dbd60b7b70b38521ab19b7da4.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap-c1fac2584b48ed01fb6e278e36375074.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>

<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>


</head>

<body class="nav-fixed quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Pulso Social – Antioquia</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html"> 
<span class="menu-text">Inicio</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../metodologia.html"> 
<span class="menu-text">Metodología</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../antioquia.html"> 
<span class="menu-text">Antioquia</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../multiples_colombias.html"> 
<span class="menu-text">Multiples Colombias</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-indices" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Indices</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-indices">    
        <li>
    <a class="dropdown-item" href="../../resultados_idx1_servicio.html">
 <span class="dropdown-text">IDX 1 - Servicios</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../result_idx2.qmd">
 <span class="dropdown-text">IDX 2 - Educación</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../result_idx3.qmd">
 <span class="dropdown-text">IDX 3 - Salud</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../result_idx4.qmd">
 <span class="dropdown-text">IDX 4 - Vivienda</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../result_idx5.qmd">
 <span class="dropdown-text">IDX 5 - Empleo</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../result_idx6.qmd">
 <span class="dropdown-text">IDX 6 - Seguridad</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../result_idx7.qmd">
 <span class="dropdown-text">IDX 7 - Medio Ambiente</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../result_idx8.qmd">
 <span class="dropdown-text">IDX 8 - Participación</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../result_idx9.qmd">
 <span class="dropdown-text">IDX 9 - Cultura</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../result_idx10.qmd">
 <span class="dropdown-text">IDX 10 - Infraestructura</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../result_idx11.qmd">
 <span class="dropdown-text">IDX 11 - Movilidad</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../result_idx12.qmd">
 <span class="dropdown-text">IDX 12 - Tecnología</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../result_idx13.qmd">
 <span class="dropdown-text">IDX 13 - Inclusión</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../result_idx14.qmd">
 <span class="dropdown-text">IDX 14 - Gobernanza</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../result_idx15.qmd">
 <span class="dropdown-text">IDX 15 - Economía</span></a>
  </li>  
    </ul>
  </li>
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
    <a href="https://www.jcmunozmora.co/" title="" class="quarto-navigation-tool px-1" aria-label=""><i class="bi bi-house"></i></a>
    <a href="https://twitter.com" title="" class="quarto-navigation-tool px-1" aria-label=""><i class="bi bi-github"></i></a>
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#cálculo-de-estadísticas-descriptivas-por-grupo-de-tamaño-poblacional" id="toc-cálculo-de-estadísticas-descriptivas-por-grupo-de-tamaño-poblacional" class="nav-link active" data-scroll-target="#cálculo-de-estadísticas-descriptivas-por-grupo-de-tamaño-poblacional">1. Cálculo de estadísticas descriptivas por grupo de tamaño poblacional</a></li>
  <li><a href="#evaluación-de-patrones-de-magnitud" id="toc-evaluación-de-patrones-de-magnitud" class="nav-link" data-scroll-target="#evaluación-de-patrones-de-magnitud">2. Evaluación de patrones de magnitud</a></li>
  <li><a href="#análisis-de-estabilidad-estadística" id="toc-análisis-de-estabilidad-estadística" class="nav-link" data-scroll-target="#análisis-de-estabilidad-estadística">3. <strong>Análisis de estabilidad estadística</strong>:</a></li>
  <li><a href="#análisis-cualitativo-con-apoyo-de-chatgpt" id="toc-análisis-cualitativo-con-apoyo-de-chatgpt" class="nav-link" data-scroll-target="#análisis-cualitativo-con-apoyo-de-chatgpt">4. <strong>Análisis cualitativo con apoyo de ChatGPT</strong>:</a></li>
  <li><a href="#aplicación-de-medias-móviles-a-otros-indicadores-epidemiológicos-sensibles" id="toc-aplicación-de-medias-móviles-a-otros-indicadores-epidemiológicos-sensibles" class="nav-link" data-scroll-target="#aplicación-de-medias-móviles-a-otros-indicadores-epidemiológicos-sensibles">5. Aplicación de medias móviles a otros indicadores epidemiológicos sensibles</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Análisis de volatilidad del subset de indicadores tipo tasa</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<div id="52822d26-9f02-45b5-a6b0-805ba02a828d" class="cell" data-execution_count="46">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Limpiar todas las variables del espacio de trabajo</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="op">%</span>reset <span class="op">-</span>f</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="20d524c2-cfa9-4caa-895e-11466b86f413" class="cell" data-execution_count="47">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> seaborn <span class="im">as</span> sns</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="0751625b-0f82-4cb6-959a-590040237775" class="cell" data-execution_count="48">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Import data</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>data_df <span class="op">=</span> pd.read_stata(<span class="vs">r"C:</span><span class="er">\</span><span class="vs">Users</span><span class="er">\</span><span class="vs">ylondono</span><span class="er">\</span><span class="vs">Proantioquia</span><span class="er">\</span><span class="vs">Proantioquia Team Site - ACV</span><span class="er">\</span><span class="vs">PRODUCTOS</span><span class="er">\</span><span class="vs">EJERCICIO CLUSTERIZACIÓN MUNICIPAL ANTIOQUIA</span><span class="dv">\D</span><span class="vs">ATOS</span><span class="dv">\B</span><span class="vs">ASES HOMOGENEIZADAS</span><span class="er">\</span><span class="vs">Final_Data</span><span class="ch">\202</span><span class="vs">50610_DATA</span><span class="dv">.</span><span class="vs">dta"</span>)</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>display(data_df.head())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">ind_mpio</th>
<th data-quarto-table-cell-role="th">nvl_label</th>
<th data-quarto-table-cell-role="th">percepción_seguridad</th>
<th data-quarto-table-cell-role="th">tasa_delitos</th>
<th data-quarto-table-cell-role="th">IRV</th>
<th data-quarto-table-cell-role="th">VBG</th>
<th data-quarto-table-cell-role="th">homicidios</th>
<th data-quarto-table-cell-role="th">vinculacion_nna</th>
<th data-quarto-table-cell-role="th">BVG_jovenes</th>
<th data-quarto-table-cell-role="th">EDA</th>
<th data-quarto-table-cell-role="th">...</th>
<th data-quarto-table-cell-role="th">TS_30_59</th>
<th data-quarto-table-cell-role="th">TS_15_64</th>
<th data-quarto-table-cell-role="th">TS_hombres</th>
<th data-quarto-table-cell-role="th">TS_mujeres</th>
<th data-quarto-table-cell-role="th">TIS_total</th>
<th data-quarto-table-cell-role="th">TIS_15_29</th>
<th data-quarto-table-cell-role="th">TIS_30_59</th>
<th data-quarto-table-cell-role="th">TIS_15_64</th>
<th data-quarto-table-cell-role="th">TIS_hombres</th>
<th data-quarto-table-cell-role="th">TIS_mujeres</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>05001</td>
<td>Medellín</td>
<td>.6068024718288</td>
<td>.0677347394037721</td>
<td>.18356099</td>
<td>384.6568797441529</td>
<td>11.3517573246545</td>
<td>0</td>
<td>596.7623059466483</td>
<td>0</td>
<td>...</td>
<td>11.1064134404402</td>
<td>11.9006597833972</td>
<td>15.9544047657034</td>
<td>3.7143125572168</td>
<td>110.08361</td>
<td>267.3085</td>
<td>74.384972</td>
<td>129.55491</td>
<td>79.199299</td>
<td>137.57522</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>05002</td>
<td>Abejorral</td>
<td>.8271909756534499</td>
<td>.0129032258064516</td>
<td>.19629357</td>
<td>910.9264215617222</td>
<td>46.5809577044904</td>
<td>0</td>
<td>1692.841117683051</td>
<td>0</td>
<td>...</td>
<td>NA</td>
<td>7.13877784123358</td>
<td>NA</td>
<td>9.84251968503937</td>
<td>291.12083</td>
<td>710.73204</td>
<td>214.36228</td>
<td>328.38377</td>
<td>215.4979</td>
<td>374.01575</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>05004</td>
<td>Abriaquí</td>
<td>.9504767291532</td>
<td>0</td>
<td>.0996653</td>
<td>175.9943681802182</td>
<td>0</td>
<td>0</td>
<td>571.4285714285714</td>
<td>0</td>
<td>...</td>
<td>NA</td>
<td>NA</td>
<td>NA</td>
<td>NA</td>
<td>NA</td>
<td>NA</td>
<td>NA</td>
<td>NA</td>
<td>NA</td>
<td>NA</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>05021</td>
<td>Alejandría</td>
<td>.8874424773485931</td>
<td>.0086580086580087</td>
<td>.10863511</td>
<td>81.43322475570032</td>
<td>20.1816347124117</td>
<td>0</td>
<td>90.49773755656109</td>
<td>0</td>
<td>...</td>
<td>53.8793103448276</td>
<td>32.258064516129</td>
<td>40.9165302782324</td>
<td>NA</td>
<td>61.07492</td>
<td>102.77493</td>
<td>NA</td>
<td>32.258064</td>
<td>NA</td>
<td>121.55592</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>05030</td>
<td>Amagá</td>
<td>.860060582707564</td>
<td>.0064205457463884</td>
<td>.12925666</td>
<td>267.5626905606372</td>
<td>37.0233246945576</td>
<td>0</td>
<td>293.2909690822436</td>
<td>0</td>
<td>...</td>
<td>7.51766651631334</td>
<td>22.2074172773706</td>
<td>12.6911606066375</td>
<td>18.3116645303058</td>
<td>6.2223882</td>
<td>26.907036</td>
<td>NA</td>
<td>8.8829668</td>
<td>NA</td>
<td>12.207776</td>
</tr>
</tbody>
</table>

<p>5 rows × 222 columns</p>
</div>
</div>
</div>
<div id="5db39ea1-73d6-470c-b4fa-2ca201a365c2" class="cell" data-scrolled="true" data-execution_count="4">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Exportar data en excel para ver mejor</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="co">#output_path = r"C:\Users\ylondono\Proantioquia\Proantioquia Team Site - ACV\PRODUCTOS\EJERCICIO CLUSTERIZACIÓN MUNICIPAL ANTIOQUIA\DATOS\BASES HOMOGENEIZADAS\Final_Data\20250610_DATA.xlsx"</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="co">#data_df.to_excel(output_path, index=False)</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="co">#print(f"Archivo exportado correctamente a:\n{output_path}")</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="1c635772-3647-47a1-adb8-50e612f40756" class="cell" data-execution_count="49">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Importar diccionario</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>diccionario_df <span class="op">=</span> pd.read_excel(</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>    <span class="vs">r"C:</span><span class="er">\</span><span class="vs">Users</span><span class="er">\</span><span class="vs">ylondono</span><span class="er">\</span><span class="vs">Proantioquia</span><span class="er">\</span><span class="vs">Proantioquia Team Site - ACV</span><span class="er">\</span><span class="vs">PRODUCTOS</span><span class="er">\</span><span class="vs">EJERCICIO CLUSTERIZACIÓN MUNICIPAL ANTIOQUIA</span><span class="dv">\D</span><span class="vs">ATOS</span><span class="dv">\B</span><span class="vs">ASES HOMOGENEIZADAS</span><span class="er">\</span><span class="vs">Final_Data</span><span class="ch">\202</span><span class="vs">50610_DICCIONARIO</span><span class="dv">.</span><span class="vs">XLSX"</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>display(diccionario_df)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">var_id</th>
<th data-quarto-table-cell-role="th">variable</th>
<th data-quarto-table-cell-role="th">var_periodos</th>
<th data-quarto-table-cell-role="th">Unidad de medida</th>
<th data-quarto-table-cell-role="th">Unidad de medida_descriptiva</th>
<th data-quarto-table-cell-role="th">Tipo</th>
<th data-quarto-table-cell-role="th">Subdimensión</th>
<th data-quarto-table-cell-role="th">id_nivel</th>
<th data-quarto-table-cell-role="th">Fuente</th>
<th data-quarto-table-cell-role="th">Responsable homogeneización</th>
<th data-quarto-table-cell-role="th">Ajuste necesario por varianza</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>percepción_seguridad</td>
<td>Porcentaje de jefes(a) de hogar o informantes ...</td>
<td>2023</td>
<td>Porcentaje</td>
<td>0</td>
<td>Contexto</td>
<td>Seguridad</td>
<td>0</td>
<td>Encuesta de Calidad de Vida - Gobernación de A...</td>
<td>Yeison</td>
<td>0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>tasa_delitos</td>
<td>Tasa de delitos</td>
<td>2023</td>
<td>Tasa</td>
<td>0</td>
<td>Contexto</td>
<td>Seguridad</td>
<td>0</td>
<td>Encuesta de Calidad de Vida - Gobernación de A...</td>
<td>Yeison</td>
<td>0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>IRV</td>
<td>Índice de Riesgo de Victimización</td>
<td>2023</td>
<td>Índice</td>
<td>0</td>
<td>Contexto</td>
<td>Seguridad</td>
<td>0</td>
<td>UARIV</td>
<td>Yeison</td>
<td>0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>VBG</td>
<td>Incidencia de VCM VIF VSX por cada 100.000 ha...</td>
<td>2023</td>
<td>Tasa</td>
<td>0</td>
<td>Contexto</td>
<td>Seguridad</td>
<td>0</td>
<td>SIVIGILA</td>
<td>Yeison</td>
<td>0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>homicidios</td>
<td>Tasa de homicidios por cada 100 mil habitantes</td>
<td>2024</td>
<td>Tasa</td>
<td>0</td>
<td>Contexto</td>
<td>Seguridad</td>
<td>0</td>
<td>SIEDCO</td>
<td>Yeison</td>
<td>0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">214</td>
<td>va_primario</td>
<td>Participacion por actidad economica del Valor ...</td>
<td>2023</td>
<td>Porcentaje</td>
<td>Porcentaje</td>
<td>0</td>
<td>Desarrollo económico</td>
<td>0</td>
<td>Gobernación de Antioquía</td>
<td>Miguel</td>
<td>0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">215</td>
<td>VPC_pri</td>
<td>Kilómetros de vías primarias por cada 1000 hab...</td>
<td>0</td>
<td>Tasa</td>
<td>cada 1000 habitantes</td>
<td>0</td>
<td>Desarrollo económico</td>
<td>0</td>
<td>RV CIRCULAR 10 - Gobernación de Antioquia</td>
<td>Miguel</td>
<td>0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">216</td>
<td>VPC_sec</td>
<td>Kilómetros de vías secundarias por cada 1000 h...</td>
<td>0</td>
<td>Tasa</td>
<td>cada 1000 habitantes</td>
<td>0</td>
<td>Desarrollo económico</td>
<td>0</td>
<td>RV CIRCULAR 10 - Gobernación de Antioquia</td>
<td>Miguel</td>
<td>0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">217</td>
<td>VPC_ter</td>
<td>Kilómetros de vías terciarias por cada 1000 ha...</td>
<td>0</td>
<td>Tasa</td>
<td>cada 1000 habitantes</td>
<td>0</td>
<td>Desarrollo económico</td>
<td>0</td>
<td>RV CIRCULAR 10 - Gobernación de Antioquia</td>
<td>Miguel</td>
<td>0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">218</td>
<td>VPC_total</td>
<td>Kilómetros de vías en total por cada 1000 habi...</td>
<td>0</td>
<td>Tasa</td>
<td>cada 1000 habitantes</td>
<td>0</td>
<td>Desarrollo económico</td>
<td>0</td>
<td>RV CIRCULAR 10 - Gobernación de Antioquia</td>
<td>Miguel</td>
<td>0</td>
</tr>
</tbody>
</table>

<p>219 rows × 11 columns</p>
</div>
</div>
</div>
<div id="96b4e854-0add-470d-93f5-d625de0230ac" class="cell" data-scrolled="true" data-execution_count="50">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="bu">list</span>(data_df.columns)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="50">
<pre><code>['ind_mpio',
 'nvl_label',
 'percepción_seguridad',
 'tasa_delitos',
 'IRV',
 'VBG',
 'homicidios',
 'vinculacion_nna',
 'BVG_jovenes',
 'EDA',
 'mortalidad_desnutrición',
 'bajo_peso',
 'desnutrición_aguda',
 'controles_prenatales',
 'fecundidad_niñas',
 'fecundidad_adolescentes',
 'camas',
 'IRA',
 'dengue',
 'malaria',
 'leishmaniasis',
 'agua_rural',
 'alcantarillado_rural',
 'agua_urbano',
 'alcantarillado_urbano',
 'deficit_cuali',
 'deficit_cuanti',
 'hacinamiento_rural',
 'hacinamiento_urbano',
 'Población_2023',
 'IRCC',
 'afectados_dn',
 'perdida_ca',
 'VBG_jovenes',
 'dens_emp',
 'fin_banc_pc',
 'fin_microcr_pc',
 'internet',
 'ss_pension_hombres',
 'ss_pension_mujeres',
 'ss_salud_hombres',
 'ss_salud_mujeres',
 'tnat_emp',
 'va_pc',
 'va_primario',
 'emp_informal',
 'gini_hog',
 'gini_lab',
 'hog_mono_fem',
 'pbl_camp',
 'pob_ext',
 'pob_ipm',
 'pob_mon',
 'pob_nbi',
 'tgp_mujeres',
 'td_brecha',
 'ins_alim',
 'ins_alim_mod',
 'ins_alim_mod_18',
 'ins_alim_mod_5',
 'ins_alim_sev',
 'ins_alim_sev_18',
 'ins_alim_sev_5',
 'pob_ext_hombres',
 'pob_ext_mujeres',
 'pob_ipm_hogares',
 'pob_ipm_hombres',
 'pob_ipm_mujeres',
 'pob_mon_hombres',
 'pob_mon_mujeres',
 'pob_nbi_hogares',
 'pob_nbi_hombres',
 'pob_nbi_mujeres',
 'td_hombres',
 'td_mujeres',
 'ins_alim_5',
 'ins_alim_18',
 'clas_cole',
 'ninis',
 'tcb_edsup',
 'tcb_media',
 'tcb_primaria',
 'tcb_secundaria',
 'tcb_transicion',
 'tdes_media',
 'tdes_primaria',
 'tdes_secundaria',
 'tdes_transicion',
 'trep_media',
 'trep_primaria',
 'trep_secundaria',
 'trep_transicion',
 'tti_edsup',
 'cat_mun',
 'med_d_mun',
 'idf',
 'VPC_pri',
 'VPC_sec',
 'VPC_ter',
 'VPC_total',
 'IDV_pri',
 'IDV_sec',
 'IDV_ter',
 'IDV_total',
 'IRCAurbano_dec',
 'time_urbano_dec',
 'IRCArural_dec',
 'time_rural_dec',
 'IRCAurbano_res',
 'time_urbano_res',
 'IRCArural_res',
 'time_rural_res',
 'IRCA',
 'IRCAurbano',
 'IRCArural',
 'P_M_Anticonceptivos',
 'T_B_N',
 'P_T',
 'P_H',
 'P_M',
 'P_inf_T_0_11',
 'P_j_T_12_28',
 'P_ad_T_29_59',
 'P_v_T_60_85',
 'P_inf_H_0_11',
 'P_j_H_12_28',
 'P_ad_H_29_59',
 'P_v_H_60_85',
 'P_inf_M_0_11',
 'P_j_M_12_28',
 'P_ad_M_29_59',
 'P_v_M_60_85',
 'IDE_T',
 'IDE_H',
 'IDE_M',
 'I_enve_T',
 'I_enve_H',
 'I_enve_M',
 'P_T_r',
 'P_H_r',
 'P_M_r',
 'P_inf_T_0_11_r',
 'P_j_T_12_28_r',
 'P_ad_T_29_59_r',
 'P_v_T_60_85_r',
 'P_inf_H_0_11_r',
 'P_j_H_12_28_r',
 'P_ad_H_29_59_r',
 'P_v_H_60_85_r',
 'P_inf_M_0_11_r',
 'P_j_M_12_28_r',
 'P_ad_M_29_59_r',
 'P_v_M_60_85_r',
 'IDE_T_r',
 'IDE_H_r',
 'IDE_M_r',
 'I_enve_T_r',
 'I_enve_H_r',
 'I_enve_M_r',
 'P_T_c',
 'P_H_c',
 'P_M_c',
 'P_inf_T_0_11_c',
 'P_j_T_12_28_c',
 'P_ad_T_29_59_c',
 'P_v_T_60_85_c',
 'P_inf_H_0_11_c',
 'P_j_H_12_28_c',
 'P_ad_H_29_59_c',
 'P_v_H_60_85_c',
 'P_inf_M_0_11_c',
 'P_j_M_12_28_c',
 'P_ad_M_29_59_c',
 'P_v_M_60_85_c',
 'IDE_T_c',
 'IDE_H_c',
 'IDE_M_c',
 'I_enve_c_T',
 'I_enve_H_c',
 'I_enve_M_c',
 'PR_T',
 'PR_H',
 'PR_M',
 'PR_inf_T_0_11',
 'PR_j_T_12_28',
 'PR_ad_T_29_59',
 'PR_v_T_60_85',
 'PR_inf_H_0_11',
 'PR_j_H_12_28',
 'PR_ad_H_29_59',
 'PR_v_H_60_85',
 'PR_inf_M_0_11',
 'PR_j_M_12_28',
 'PR_ad_M_29_59',
 'PR_v_M_60_85',
 'PU_T',
 'PU_H',
 'PU_M',
 'PU_inf_T_0_11',
 'PU_j_T_12_28',
 'PU_ad_T_29_59',
 'PU_v_T_60_85',
 'PU_inf_H_0_11',
 'PU_j_H_12_28',
 'PU_ad_H_29_59',
 'PU_v_H_60_85',
 'PU_inf_M_0_11',
 'PU_j_M_12_28',
 'PU_ad_M_29_59',
 'PU_v_M_60_85',
 'TS_total',
 'TS_15_29',
 'TS_30_59',
 'TS_15_64',
 'TS_hombres',
 'TS_mujeres',
 'TIS_total',
 'TIS_15_29',
 'TIS_30_59',
 'TIS_15_64',
 'TIS_hombres',
 'TIS_mujeres']</code></pre>
</div>
</div>
<div id="7770649d-2661-458e-8914-ddb23f8126a5" class="cell" data-execution_count="51">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Ajustes temporales en los datos</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="co"># VBG</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="co">#delete VBG_jovenes</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>data_df.drop(columns<span class="op">=</span>[<span class="st">"VBG_jovenes"</span>], inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a><span class="co">#rename BVG_jovenes por VBG_jovenes</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>data_df.rename(columns<span class="op">=</span>{<span class="st">"BVG_jovenes"</span>: <span class="st">"VBG_jovenes"</span>}, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a><span class="co"># rename "I_enve_c_T” por “I_enve_T_c"</span></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>data_df.rename(columns<span class="op">=</span>{<span class="st">"I_enve_c_T"</span>: <span class="st">"I_enve_T_c"</span>}, inplace<span class="op">=</span><span class="va">True</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="b2e70f15-365c-4896-92d6-11b59d391fa4" class="cell" data-execution_count="52">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 2. Verificar que todas las columnas de la base estén definidas en el diccionario</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Conjuntos de nombres</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>dicc_vars <span class="op">=</span> <span class="bu">set</span>(diccionario_df[<span class="st">"var_id"</span>].tolist())</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>data_vars <span class="op">=</span> <span class="bu">set</span>(data_df.columns.tolist())</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Variables en data_df que NO están en el diccionario</span></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>vars_sin_dicc <span class="op">=</span> data_vars <span class="op">-</span> dicc_vars</span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Columnas en data_df que NO están en el diccionario:"</span>)</span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="bu">sorted</span>(vars_sin_dicc), <span class="st">"</span><span class="ch">\n</span><span class="st">"</span>)</span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Variables en el diccionario que NO aparecen en data_df</span></span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a>vars_sin_data <span class="op">=</span> dicc_vars <span class="op">-</span> data_vars</span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Indicadores en el diccionario que NO aparecen en data_df:"</span>)</span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="bu">sorted</span>(vars_sin_data))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Columnas en data_df que NO están en el diccionario:
['ind_mpio', 'nvl_label'] 

Indicadores en el diccionario que NO aparecen en data_df:
[]</code></pre>
</div>
</div>
<div id="d8d4630c-1e41-4be3-b723-8f00e1ae8342" class="cell" data-execution_count="53">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 4. Identificar indicadores tipo 'Tasa'</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>tasa_vars <span class="op">=</span> (</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>    diccionario_df</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>    .loc[diccionario_df[<span class="st">"Unidad de medida"</span>].<span class="bu">str</span>.lower() <span class="op">==</span> <span class="st">"tasa"</span>, <span class="st">"var_id"</span>]</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>    .tolist()</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Mantener sólo los que efectivamente existen</span></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>tasa_vars <span class="op">=</span> [v <span class="cf">for</span> v <span class="kw">in</span> tasa_vars <span class="cf">if</span> v <span class="kw">in</span> data_df.columns]</span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Indicadores de tipo tasa reales:"</span>, tasa_vars)</span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a><span class="co"># 5. Construir subset con municipio, población y tasas</span></span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a>tasa_data <span class="op">=</span> data_df[[<span class="st">"ind_mpio"</span>, <span class="st">"nvl_label"</span>, <span class="st">"Población_2023"</span>] <span class="op">+</span> tasa_vars].copy()</span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a>tasa_data[tasa_vars] <span class="op">=</span> tasa_data[tasa_vars].<span class="bu">apply</span>(pd.to_numeric, errors<span class="op">=</span><span class="st">'coerce'</span>).astype(<span class="bu">float</span>)</span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Formato de 2 decimales</span></span>
<span id="cb11-15"><a href="#cb11-15" aria-hidden="true" tabindex="-1"></a>pd.options.display.float_format <span class="op">=</span> <span class="st">"</span><span class="sc">{:.2f}</span><span class="st">"</span>.<span class="bu">format</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Indicadores de tipo tasa reales: ['tasa_delitos', 'VBG', 'homicidios', 'vinculacion_nna', 'VBG_jovenes', 'EDA', 'mortalidad_desnutrición', 'desnutrición_aguda', 'fecundidad_niñas', 'fecundidad_adolescentes', 'camas', 'IRA', 'dengue', 'malaria', 'leishmaniasis', 'afectados_dn', 'dens_emp', 'fin_banc_pc', 'fin_microcr_pc', 'IDV_pri', 'IDV_sec', 'IDV_ter', 'IDV_total', 'TIS_15_29', 'TIS_15_64', 'TIS_30_59', 'TIS_hombres', 'TIS_mujeres', 'TIS_total', 'TS_15_29', 'TS_15_64', 'TS_30_59', 'TS_hombres', 'TS_mujeres', 'TS_total', 'va_pc', 'VPC_pri', 'VPC_sec', 'VPC_ter', 'VPC_total']</code></pre>
</div>
</div>
<div id="5634bfcd-0f9a-4891-a24d-43d6892fdfbe" class="cell" data-execution_count="54">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Subset con municipio, población y tasas:"</span>)</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>display(tasa_data.head())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Subset con municipio, población y tasas:</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">ind_mpio</th>
<th data-quarto-table-cell-role="th">nvl_label</th>
<th data-quarto-table-cell-role="th">Población_2023</th>
<th data-quarto-table-cell-role="th">tasa_delitos</th>
<th data-quarto-table-cell-role="th">VBG</th>
<th data-quarto-table-cell-role="th">homicidios</th>
<th data-quarto-table-cell-role="th">vinculacion_nna</th>
<th data-quarto-table-cell-role="th">VBG_jovenes</th>
<th data-quarto-table-cell-role="th">EDA</th>
<th data-quarto-table-cell-role="th">mortalidad_desnutrición</th>
<th data-quarto-table-cell-role="th">...</th>
<th data-quarto-table-cell-role="th">TS_15_64</th>
<th data-quarto-table-cell-role="th">TS_30_59</th>
<th data-quarto-table-cell-role="th">TS_hombres</th>
<th data-quarto-table-cell-role="th">TS_mujeres</th>
<th data-quarto-table-cell-role="th">TS_total</th>
<th data-quarto-table-cell-role="th">va_pc</th>
<th data-quarto-table-cell-role="th">VPC_pri</th>
<th data-quarto-table-cell-role="th">VPC_sec</th>
<th data-quarto-table-cell-role="th">VPC_ter</th>
<th data-quarto-table-cell-role="th">VPC_total</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>05001</td>
<td>Medellín</td>
<td>2595300</td>
<td>0.07</td>
<td>384.66</td>
<td>11.35</td>
<td>0.00</td>
<td>596.76</td>
<td>0.00</td>
<td>2.90</td>
<td>...</td>
<td>11.90</td>
<td>11.11</td>
<td>15.95</td>
<td>3.71</td>
<td>9.48</td>
<td>21625.33</td>
<td>0.05</td>
<td>0.01</td>
<td>0.00</td>
<td>0.06</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>05002</td>
<td>Abejorral</td>
<td>21297</td>
<td>0.01</td>
<td>910.93</td>
<td>46.58</td>
<td>0.00</td>
<td>1692.84</td>
<td>0.00</td>
<td>0.00</td>
<td>...</td>
<td>7.14</td>
<td>NaN</td>
<td>NaN</td>
<td>9.84</td>
<td>4.70</td>
<td>12376.67</td>
<td>0.43</td>
<td>4.80</td>
<td>8.52</td>
<td>13.75</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>05004</td>
<td>Abriaquí</td>
<td>2841</td>
<td>0.00</td>
<td>175.99</td>
<td>0.00</td>
<td>0.00</td>
<td>571.43</td>
<td>0.00</td>
<td>0.00</td>
<td>...</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>11781.74</td>
<td>0.00</td>
<td>8.68</td>
<td>19.47</td>
<td>28.15</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>05021</td>
<td>Alejandría</td>
<td>4912</td>
<td>0.01</td>
<td>81.43</td>
<td>20.18</td>
<td>0.00</td>
<td>90.50</td>
<td>0.00</td>
<td>0.00</td>
<td>...</td>
<td>32.26</td>
<td>53.88</td>
<td>40.92</td>
<td>NaN</td>
<td>20.36</td>
<td>9707.52</td>
<td>0.00</td>
<td>3.88</td>
<td>9.83</td>
<td>13.71</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>05030</td>
<td>Amagá</td>
<td>32142</td>
<td>0.01</td>
<td>267.56</td>
<td>37.02</td>
<td>0.00</td>
<td>293.29</td>
<td>0.00</td>
<td>0.00</td>
<td>...</td>
<td>22.21</td>
<td>7.52</td>
<td>12.69</td>
<td>18.31</td>
<td>15.56</td>
<td>17003.95</td>
<td>0.71</td>
<td>0.41</td>
<td>2.47</td>
<td>3.59</td>
</tr>
</tbody>
</table>

<p>5 rows × 43 columns</p>
</div>
</div>
</div>
<div id="525c08f5-f2e9-4e51-a3d4-da1cef9cae8f" class="cell" data-execution_count="55">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Verificar que todas las variables del subset tasa_data sean númericas (excepto por ind_mpio y nvl_label)</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Seleccionar todas las columnas excepto las no numéricas deseadas</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>cols_a_verificar <span class="op">=</span> [col <span class="cf">for</span> col <span class="kw">in</span> tasa_data.columns <span class="cf">if</span> col <span class="kw">not</span> <span class="kw">in</span> [<span class="st">"ind_mpio"</span>, <span class="st">"nvl_label"</span>]]</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Verificar tipos de datos</span></span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>tipos <span class="op">=</span> tasa_data[cols_a_verificar].dtypes</span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Filtrar columnas que NO son numéricas</span></span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a>no_numericas <span class="op">=</span> tipos[<span class="op">~</span>tipos.<span class="bu">apply</span>(pd.api.types.is_numeric_dtype)]</span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Mostrar resultado</span></span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Columnas no numéricas en el subset:"</span>)</span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(no_numericas)</span>
<span id="cb15-14"><a href="#cb15-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-15"><a href="#cb15-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Convierte todas a númericas</span></span>
<span id="cb15-16"><a href="#cb15-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Identificar columnas que no son numéricas</span></span>
<span id="cb15-17"><a href="#cb15-17" aria-hidden="true" tabindex="-1"></a>no_numericas <span class="op">=</span> tipos[<span class="op">~</span>tipos.<span class="bu">apply</span>(pd.api.types.is_numeric_dtype)].index.tolist()</span>
<span id="cb15-18"><a href="#cb15-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Convertirlas a numéricas (coercion convierte errores a NaN)</span></span>
<span id="cb15-19"><a href="#cb15-19" aria-hidden="true" tabindex="-1"></a>tasa_data[no_numericas] <span class="op">=</span> tasa_data[no_numericas].<span class="bu">apply</span>(pd.to_numeric, errors<span class="op">=</span><span class="st">"coerce"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Columnas no numéricas en el subset:
Población_2023    object
dtype: object</code></pre>
</div>
</div>
<div id="09c0910d-fe55-4ff3-a70c-afab33aa536a" class="cell" data-execution_count="56">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 7. Definir grupos de tamaño basados en cuantiles de población</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>q1, q2 <span class="op">=</span> tasa_data[<span class="st">'Población_2023'</span>].quantile([<span class="fl">0.33</span>, <span class="fl">0.66</span>])</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Umbrales de población (terciles): Pequeño &lt; </span><span class="sc">{</span>q1<span class="sc">:.0f}</span><span class="ss">, Mediano &lt; </span><span class="sc">{</span>q2<span class="sc">:.0f}</span><span class="ss">, Grande ≥ </span><span class="sc">{</span>q2<span class="sc">:.0f}</span><span class="ss">"</span>)</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> clasificar_tamano(p):</span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> p <span class="op">&lt;</span> q1:</span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="st">"Pequeño"</span></span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">elif</span> p <span class="op">&lt;</span> q2:</span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="st">"Mediano"</span></span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="st">"Grande"</span></span>
<span id="cb17-12"><a href="#cb17-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-13"><a href="#cb17-13" aria-hidden="true" tabindex="-1"></a>tasa_data[<span class="st">"Grupo_tamano"</span>] <span class="op">=</span> tasa_data[<span class="st">"Población_2023"</span>].<span class="bu">apply</span>(clasificar_tamano)</span>
<span id="cb17-14"><a href="#cb17-14" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Conteo por Grupo_tamano:"</span>)</span>
<span id="cb17-15"><a href="#cb17-15" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(tasa_data[<span class="st">"Grupo_tamano"</span>].value_counts())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Umbrales de población (terciles): Pequeño &lt; 10721, Mediano &lt; 25953, Grande ≥ 25953
Conteo por Grupo_tamano:
Grupo_tamano
Grande     43
Mediano    41
Pequeño    41
Name: count, dtype: int64</code></pre>
</div>
</div>
<div id="80bb2d4c-c50f-4580-a7d5-aab750e03e8e" class="cell" data-execution_count="57">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 7. Agrupar municipios por población usando K-Means (3 clusters)</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.cluster <span class="im">import</span> KMeans</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Preparar datos de población</span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>demographics <span class="op">=</span> tasa_data[<span class="st">"Población_2023"</span>].values.reshape(<span class="op">-</span><span class="dv">1</span>, <span class="dv">1</span>)</span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Ajustar modelo K-Means con 3 clusters</span></span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>kmeans <span class="op">=</span> KMeans(n_clusters<span class="op">=</span><span class="dv">3</span>, random_state<span class="op">=</span><span class="dv">42</span>).fit(demographics)</span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a>labels <span class="op">=</span> kmeans.labels_</span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Obtener centroides y mapear a categorías</span></span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a>centroids <span class="op">=</span> kmeans.cluster_centers_.flatten()</span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a>order <span class="op">=</span> centroids.argsort()</span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true" tabindex="-1"></a>label_map <span class="op">=</span> {order[<span class="dv">0</span>]: <span class="st">"Pequeño"</span>, order[<span class="dv">1</span>]: <span class="st">"Mediano"</span>, order[<span class="dv">2</span>]: <span class="st">"Grande"</span>}</span>
<span id="cb19-12"><a href="#cb19-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Asignar categoría según label</span></span>
<span id="cb19-13"><a href="#cb19-13" aria-hidden="true" tabindex="-1"></a>tasa_data[<span class="st">"Grupo_tamano"</span>] <span class="op">=</span> [label_map[label] <span class="cf">for</span> label <span class="kw">in</span> labels]</span>
<span id="cb19-14"><a href="#cb19-14" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Centroides de población:"</span>, centroids)</span>
<span id="cb19-15"><a href="#cb19-15" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Conteo por Grupo_tamano:"</span>)</span>
<span id="cb19-16"><a href="#cb19-16" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(tasa_data[<span class="st">"Grupo_tamano"</span>].value_counts())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Centroides de población: [ 368411.66666667   26015.08264463 2595300.        ]
Conteo por Grupo_tamano:
Grupo_tamano
Pequeño    121
Mediano      3
Grande       1
Name: count, dtype: int64</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>C:\Users\ylondono\AppData\Local\anaconda3\Lib\site-packages\sklearn\cluster\_kmeans.py:1429: UserWarning: KMeans is known to have a memory leak on Windows with MKL, when there are less chunks than available threads. You can avoid it by setting the environment variable OMP_NUM_THREADS=1.
  warnings.warn(</code></pre>
</div>
</div>
<div id="a45f8ae0-1fa5-42a4-914f-2d41cf026b76" class="cell" data-execution_count="58">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> os</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>os.environ[<span class="st">"OMP_NUM_THREADS"</span>] <span class="op">=</span> <span class="st">"1"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="8dd1c372-04c4-48f3-971e-fbcc506ab1eb" class="cell" data-execution_count="59">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 7. Agrupar municipios por población usando K-Means sobre log(Población)</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.cluster <span class="im">import</span> KMeans</span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Tomar logaritmo de la población para mitigar outliers</span></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>tasa_data[<span class="st">'log_pob'</span>] <span class="op">=</span> np.log1p(tasa_data[<span class="st">'Población_2023'</span>])</span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Preparar datos para clustering</span></span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a>demographics_log <span class="op">=</span> tasa_data[<span class="st">'log_pob'</span>].values.reshape(<span class="op">-</span><span class="dv">1</span>,<span class="dv">1</span>)</span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Ajustar modelo K-Means con 3 clusters</span></span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a>kmeans <span class="op">=</span> KMeans(n_clusters<span class="op">=</span><span class="dv">3</span>, random_state<span class="op">=</span><span class="dv">42</span>).fit(demographics_log)</span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a>labels <span class="op">=</span> kmeans.labels_</span>
<span id="cb23-11"><a href="#cb23-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Calcular centroides en escala original</span></span>
<span id="cb23-12"><a href="#cb23-12" aria-hidden="true" tabindex="-1"></a>centroids_log <span class="op">=</span> kmeans.cluster_centers_.flatten()</span>
<span id="cb23-13"><a href="#cb23-13" aria-hidden="true" tabindex="-1"></a>centroids_orig <span class="op">=</span> np.expm1(centroids_log)</span>
<span id="cb23-14"><a href="#cb23-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Ordenar clusters por población promedio</span></span>
<span id="cb23-15"><a href="#cb23-15" aria-hidden="true" tabindex="-1"></a>order <span class="op">=</span> np.argsort(centroids_log)</span>
<span id="cb23-16"><a href="#cb23-16" aria-hidden="true" tabindex="-1"></a>label_map <span class="op">=</span> {order[<span class="dv">0</span>]: <span class="st">'Pequeño'</span>, order[<span class="dv">1</span>]: <span class="st">'Mediano'</span>, order[<span class="dv">2</span>]: <span class="st">'Grande'</span>}</span>
<span id="cb23-17"><a href="#cb23-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Asignar etiqueta de grupo según cluster</span></span>
<span id="cb23-18"><a href="#cb23-18" aria-hidden="true" tabindex="-1"></a>tasa_data[<span class="st">'Grupo_tamano'</span>] <span class="op">=</span> [label_map[l] <span class="cf">for</span> l <span class="kw">in</span> labels]</span>
<span id="cb23-19"><a href="#cb23-19" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'Centroides (log-scale):'</span>, centroids_log)</span>
<span id="cb23-20"><a href="#cb23-20" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'Centroides (población):'</span>, centroids_orig.astype(<span class="bu">int</span>))</span>
<span id="cb23-21"><a href="#cb23-21" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'Conteo por Grupo_tamano:'</span>)</span>
<span id="cb23-22"><a href="#cb23-22" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(tasa_data[<span class="st">'Grupo_tamano'</span>].value_counts())</span>
<span id="cb23-23"><a href="#cb23-23" aria-hidden="true" tabindex="-1"></a><span class="co"># Eliminar columna temporal</span></span>
<span id="cb23-24"><a href="#cb23-24" aria-hidden="true" tabindex="-1"></a><span class="kw">del</span> tasa_data[<span class="st">'log_pob'</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Centroides (log-scale): [11.67377994 10.09541272  8.92495079]
Centroides (población): [117450  24230   7516]
Conteo por Grupo_tamano:
Grupo_tamano
Mediano    55
Pequeño    50
Grande     20
Name: count, dtype: int64</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>C:\Users\ylondono\AppData\Local\anaconda3\Lib\site-packages\sklearn\cluster\_kmeans.py:1429: UserWarning: KMeans is known to have a memory leak on Windows with MKL, when there are less chunks than available threads. You can avoid it by setting the environment variable OMP_NUM_THREADS=1.
  warnings.warn(</code></pre>
</div>
</div>
<p>Luego de haber definido el subconjunto de variables tipo tasa, se desarrolló un proceso metodológico orientado a evaluar <strong>la estabilidad y validez de estas tasas según el tamaño poblacional municipal</strong>. El objetivo fue identificar si las tasas observadas en municipios pequeños son confiables o si podrían estar distorsionadas por el bajo denominador. Los pasos seguidos fueron los siguientes:</p>
<ol type="1">
<li><p><strong>Cálculo de estadísticas descriptivas por grupo de tamaño poblacional</strong>: se estimaron la media, desviación estándar, percentil 5 (q05), mediana (q50) y percentil 95 (q95) para cada indicador, en cada grupo (Pequeño, Mediano y Grande). Además, se aplicó la prueba de <strong>Kruskal-Wallis</strong> para identificar indicadores cuyas distribuciones diferían significativamente entre grupos de tamaño poblacional. Sin embargo, se decidió enfocar el análisis de estabilidad únicamente en aquellos <strong>indicadores que mostraban tasas más altas en municipios pequeños</strong> (paso 2), independientemente del valor p del test. Esto se justificó por el objetivo principal del estudio: <strong>identificar potenciales distorsiones inducidas por el bajo denominador poblacional</strong>, más que diferencias estadísticas globales entre grupos. La información del test fue útil como insumo adicional, pero no constituyó el criterio principal de priorización para el análisis cualitativo.</p></li>
<li><p><strong>Evaluación de patrones de magnitud</strong>: se compararon las medianas y p95 entre grupos para identificar si los municipios pequeños tienden a tener tasas más altas. Se generó una tabla de diagnóstico categorizando los indicadores según este patrón.</p></li>
<li><p><strong>Análisis de estabilidad estadística</strong>: para los indicadores que mostraban tasas más altas en municipios pequeños, se calcularon:</p>
<ul>
<li>el <strong>coeficiente de variación (CV)</strong>: como medida de variabilidad relativa,</li>
<li>el <strong>rango intercuartílico (IQR)</strong>: como medida de dispersión robusta.</li>
<li><strong>Clasificación cualitativa</strong>: se asignaron categorías empíricas (“Bajo”, “Moderado”, “Muy alto”) al CV e IQR, y se combinó esta información para construir una tabla de diagnóstico por grupo, evaluando si la volatilidad estaba presente solo en municipios pequeños o en todos los grupos.</li>
</ul></li>
<li><p><strong>Análisis cualitativo con apoyo de ChatGPT</strong>: se utilizó la combinación de CV, IQR y media para analizar cada indicador, con el fin de definir si las tasas elevadas en municipios pequeños reflejan una distorsión o una señal real del fenómeno. <strong>Recomendación metodológica</strong>: para cada indicador se definió si requiere ajustes (como suavizamiento o winsorización) o puede ser utilizado tal cual en el análisis multivariado o en productos públicos. <strong>Adicionalmente se dicidió la aplicación de medias móviles a otros indicadores epidemiológicos sensibles que no fueron priorizados en el análisis estadístico</strong></p></li>
</ol>
<section id="cálculo-de-estadísticas-descriptivas-por-grupo-de-tamaño-poblacional" class="level3">
<h3 class="anchored" data-anchor-id="cálculo-de-estadísticas-descriptivas-por-grupo-de-tamaño-poblacional">1. Cálculo de estadísticas descriptivas por grupo de tamaño poblacional</h3>
<div id="255ce0f1-ee94-47e4-a78e-31870df22964" class="cell" data-execution_count="16">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Agrupar por grupo de tamaño y calcular medias y medianas de cada tasa</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>mean_by_group <span class="op">=</span> tasa_data.groupby(<span class="st">"Grupo_tamano"</span>)[tasa_vars].mean().add_suffix(<span class="st">"_mean"</span>)</span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>median_by_group <span class="op">=</span> tasa_data.groupby(<span class="st">"Grupo_tamano"</span>)[tasa_vars].median().add_suffix(<span class="st">"_median"</span>)</span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Unir ambas tablas</span></span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a>resumen_tendencia <span class="op">=</span> pd.concat([mean_by_group, median_by_group], axis<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Mostrar la tabla</span></span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Resumen de medias y medianas por grupo de tamaño poblacional:"</span>)</span>
<span id="cb26-10"><a href="#cb26-10" aria-hidden="true" tabindex="-1"></a>display(resumen_tendencia)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Resumen de medias y medianas por grupo de tamaño poblacional:</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">tasa_delitos_mean</th>
<th data-quarto-table-cell-role="th">VBG_mean</th>
<th data-quarto-table-cell-role="th">homicidios_mean</th>
<th data-quarto-table-cell-role="th">vinculacion_nna_mean</th>
<th data-quarto-table-cell-role="th">VBG_jovenes_mean</th>
<th data-quarto-table-cell-role="th">EDA_mean</th>
<th data-quarto-table-cell-role="th">mortalidad_desnutrición_mean</th>
<th data-quarto-table-cell-role="th">desnutrición_aguda_mean</th>
<th data-quarto-table-cell-role="th">fecundidad_niñas_mean</th>
<th data-quarto-table-cell-role="th">fecundidad_adolescentes_mean</th>
<th data-quarto-table-cell-role="th">...</th>
<th data-quarto-table-cell-role="th">TS_15_64_median</th>
<th data-quarto-table-cell-role="th">TS_30_59_median</th>
<th data-quarto-table-cell-role="th">TS_hombres_median</th>
<th data-quarto-table-cell-role="th">TS_mujeres_median</th>
<th data-quarto-table-cell-role="th">TS_total_median</th>
<th data-quarto-table-cell-role="th">va_pc_median</th>
<th data-quarto-table-cell-role="th">VPC_pri_median</th>
<th data-quarto-table-cell-role="th">VPC_sec_median</th>
<th data-quarto-table-cell-role="th">VPC_ter_median</th>
<th data-quarto-table-cell-role="th">VPC_total_median</th>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">Grupo_tamano</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">Grande</td>
<td>0.03</td>
<td>317.95</td>
<td>22.00</td>
<td>0.46</td>
<td>481.88</td>
<td>0.91</td>
<td>2.24</td>
<td>410.89</td>
<td>2.06</td>
<td>35.97</td>
<td>...</td>
<td>12.25</td>
<td>10.32</td>
<td>15.49</td>
<td>3.09</td>
<td>9.34</td>
<td>17734.27</td>
<td>0.27</td>
<td>0.07</td>
<td>1.46</td>
<td>1.83</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Mediano</td>
<td>0.02</td>
<td>258.44</td>
<td>50.74</td>
<td>3.22</td>
<td>409.82</td>
<td>1.63</td>
<td>2.68</td>
<td>433.75</td>
<td>3.16</td>
<td>56.73</td>
<td>...</td>
<td>11.75</td>
<td>12.61</td>
<td>14.47</td>
<td>8.91</td>
<td>8.89</td>
<td>12376.67</td>
<td>0.93</td>
<td>1.95</td>
<td>6.37</td>
<td>9.33</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Pequeño</td>
<td>0.02</td>
<td>260.44</td>
<td>49.33</td>
<td>2.68</td>
<td>453.56</td>
<td>2.24</td>
<td>4.53</td>
<td>411.52</td>
<td>1.75</td>
<td>34.96</td>
<td>...</td>
<td>23.05</td>
<td>35.49</td>
<td>25.99</td>
<td>25.75</td>
<td>13.87</td>
<td>11149.07</td>
<td>0.00</td>
<td>2.99</td>
<td>8.66</td>
<td>14.31</td>
</tr>
</tbody>
</table>

<p>3 rows × 80 columns</p>
</div>
</div>
</div>
<div id="3950d9bb-2475-4284-8f30-a32a64704fbb" class="cell" data-scrolled="true" data-execution_count="17">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Mostrar boxplots para cada tasa</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> var <span class="kw">in</span> tasa_vars:</span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>    plt.figure(figsize<span class="op">=</span>(<span class="dv">8</span>, <span class="dv">5</span>))</span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>    sns.boxplot(x<span class="op">=</span><span class="st">"Grupo_tamano"</span>, y<span class="op">=</span>var, data<span class="op">=</span>tasa_data)</span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>    plt.title(<span class="ss">f"Distribución de '</span><span class="sc">{</span>var<span class="sc">}</span><span class="ss">' por Grupo de Tamaño Poblacional"</span>)</span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a>    plt.ylabel(var)</span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a>    plt.xlabel(<span class="st">"Grupo_tamano"</span>)</span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true" tabindex="-1"></a>    plt.tight_layout()</span>
<span id="cb28-9"><a href="#cb28-9" aria-hidden="true" tabindex="-1"></a>    plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="20250509_Análisis variabilidad de tasas_files/figure-html/cell-18-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="20250509_Análisis variabilidad de tasas_files/figure-html/cell-18-output-2.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="20250509_Análisis variabilidad de tasas_files/figure-html/cell-18-output-3.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="20250509_Análisis variabilidad de tasas_files/figure-html/cell-18-output-4.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="20250509_Análisis variabilidad de tasas_files/figure-html/cell-18-output-5.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="20250509_Análisis variabilidad de tasas_files/figure-html/cell-18-output-6.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="20250509_Análisis variabilidad de tasas_files/figure-html/cell-18-output-7.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="20250509_Análisis variabilidad de tasas_files/figure-html/cell-18-output-8.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="20250509_Análisis variabilidad de tasas_files/figure-html/cell-18-output-9.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="20250509_Análisis variabilidad de tasas_files/figure-html/cell-18-output-10.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="20250509_Análisis variabilidad de tasas_files/figure-html/cell-18-output-11.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="20250509_Análisis variabilidad de tasas_files/figure-html/cell-18-output-12.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="20250509_Análisis variabilidad de tasas_files/figure-html/cell-18-output-13.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="20250509_Análisis variabilidad de tasas_files/figure-html/cell-18-output-14.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="20250509_Análisis variabilidad de tasas_files/figure-html/cell-18-output-15.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="20250509_Análisis variabilidad de tasas_files/figure-html/cell-18-output-16.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="20250509_Análisis variabilidad de tasas_files/figure-html/cell-18-output-17.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="20250509_Análisis variabilidad de tasas_files/figure-html/cell-18-output-18.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="20250509_Análisis variabilidad de tasas_files/figure-html/cell-18-output-19.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="20250509_Análisis variabilidad de tasas_files/figure-html/cell-18-output-20.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="20250509_Análisis variabilidad de tasas_files/figure-html/cell-18-output-21.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="20250509_Análisis variabilidad de tasas_files/figure-html/cell-18-output-22.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="20250509_Análisis variabilidad de tasas_files/figure-html/cell-18-output-23.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="20250509_Análisis variabilidad de tasas_files/figure-html/cell-18-output-24.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="20250509_Análisis variabilidad de tasas_files/figure-html/cell-18-output-25.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="20250509_Análisis variabilidad de tasas_files/figure-html/cell-18-output-26.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="20250509_Análisis variabilidad de tasas_files/figure-html/cell-18-output-27.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="20250509_Análisis variabilidad de tasas_files/figure-html/cell-18-output-28.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="20250509_Análisis variabilidad de tasas_files/figure-html/cell-18-output-29.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="20250509_Análisis variabilidad de tasas_files/figure-html/cell-18-output-30.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="20250509_Análisis variabilidad de tasas_files/figure-html/cell-18-output-31.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="20250509_Análisis variabilidad de tasas_files/figure-html/cell-18-output-32.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="20250509_Análisis variabilidad de tasas_files/figure-html/cell-18-output-33.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="20250509_Análisis variabilidad de tasas_files/figure-html/cell-18-output-34.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="20250509_Análisis variabilidad de tasas_files/figure-html/cell-18-output-35.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="20250509_Análisis variabilidad de tasas_files/figure-html/cell-18-output-36.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="20250509_Análisis variabilidad de tasas_files/figure-html/cell-18-output-37.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="20250509_Análisis variabilidad de tasas_files/figure-html/cell-18-output-38.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="20250509_Análisis variabilidad de tasas_files/figure-html/cell-18-output-39.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="20250509_Análisis variabilidad de tasas_files/figure-html/cell-18-output-40.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p><strong>Análisis de varianza por tamaño poblacional con prueba de Kruskal-Wallis</strong></p>
<p>Para identificar si las tasas de ciertos indicadores varían significativamente según el tamaño poblacional de los municipios, se aplicó la <strong>prueba de Kruskal-Wallis</strong>, una prueba no paramétrica que compara la distribución de una variable continua entre tres o más grupos independientes. A diferencia del ANOVA, esta prueba no asume normalidad y es adecuada para datos con asimetrías o varianzas desiguales, como es común en tasas municipales.</p>
<p>Interpretación del valor p: Un valor p bajo (&lt; 0.05) indica que al menos uno de los grupos (Pequeño, Mediano o Grande) presenta una distribución diferente en ese indicador. En nuestro caso, nos interesa especialmente cuando el grupo “Pequeño” registra sistemáticamente valores más altos que los demás, ya que esto puede sugerir que la tasa está siendo amplificada artificialmente por el bajo tamaño poblacional, afectando la estabilidad e interpretación del indicador.</p>
<div id="5d3dc4bb-3a9c-45c7-8d19-013814afa71c" class="cell" data-execution_count="60">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Pruebas estadísticas (ANOVA y Kruskal-Wallis)</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> scipy.stats <span class="im">import</span> f_oneway, kruskal</span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Inicializar resultados</span></span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a>resultados_test <span class="op">=</span> []</span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> var <span class="kw">in</span> tasa_vars:</span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a>    grupos <span class="op">=</span> [</span>
<span id="cb29-9"><a href="#cb29-9" aria-hidden="true" tabindex="-1"></a>        tasa_data[tasa_data[<span class="st">"Grupo_tamano"</span>] <span class="op">==</span> g][var].dropna()</span>
<span id="cb29-10"><a href="#cb29-10" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> g <span class="kw">in</span> [<span class="st">"Pequeño"</span>, <span class="st">"Mediano"</span>, <span class="st">"Grande"</span>]</span>
<span id="cb29-11"><a href="#cb29-11" aria-hidden="true" tabindex="-1"></a>    ]</span>
<span id="cb29-12"><a href="#cb29-12" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb29-13"><a href="#cb29-13" aria-hidden="true" tabindex="-1"></a>    <span class="co"># ANOVA: supuestos paramétricos</span></span>
<span id="cb29-14"><a href="#cb29-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">try</span>:</span>
<span id="cb29-15"><a href="#cb29-15" aria-hidden="true" tabindex="-1"></a>        f_stat, p_anova <span class="op">=</span> f_oneway(<span class="op">*</span>grupos)</span>
<span id="cb29-16"><a href="#cb29-16" aria-hidden="true" tabindex="-1"></a>    <span class="cf">except</span>:</span>
<span id="cb29-17"><a href="#cb29-17" aria-hidden="true" tabindex="-1"></a>        p_anova <span class="op">=</span> <span class="va">None</span></span>
<span id="cb29-18"><a href="#cb29-18" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb29-19"><a href="#cb29-19" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Kruskal-Wallis: no paramétrico</span></span>
<span id="cb29-20"><a href="#cb29-20" aria-hidden="true" tabindex="-1"></a>    <span class="cf">try</span>:</span>
<span id="cb29-21"><a href="#cb29-21" aria-hidden="true" tabindex="-1"></a>        h_stat, p_kw <span class="op">=</span> kruskal(<span class="op">*</span>grupos)</span>
<span id="cb29-22"><a href="#cb29-22" aria-hidden="true" tabindex="-1"></a>    <span class="cf">except</span>:</span>
<span id="cb29-23"><a href="#cb29-23" aria-hidden="true" tabindex="-1"></a>        p_kw <span class="op">=</span> <span class="va">None</span></span>
<span id="cb29-24"><a href="#cb29-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-25"><a href="#cb29-25" aria-hidden="true" tabindex="-1"></a>    resultados_test.append({</span>
<span id="cb29-26"><a href="#cb29-26" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Variable"</span>: var,</span>
<span id="cb29-27"><a href="#cb29-27" aria-hidden="true" tabindex="-1"></a>        <span class="st">"p_ANOVA"</span>: p_anova,</span>
<span id="cb29-28"><a href="#cb29-28" aria-hidden="true" tabindex="-1"></a>        <span class="st">"p_Kruskal_Wallis"</span>: p_kw</span>
<span id="cb29-29"><a href="#cb29-29" aria-hidden="true" tabindex="-1"></a>    })</span>
<span id="cb29-30"><a href="#cb29-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-31"><a href="#cb29-31" aria-hidden="true" tabindex="-1"></a><span class="co"># Convertir a DataFrame</span></span>
<span id="cb29-32"><a href="#cb29-32" aria-hidden="true" tabindex="-1"></a>resultados_df <span class="op">=</span> pd.DataFrame(resultados_test)</span>
<span id="cb29-33"><a href="#cb29-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-34"><a href="#cb29-34" aria-hidden="true" tabindex="-1"></a><span class="co"># Mostrar tabla ordenada por significancia</span></span>
<span id="cb29-35"><a href="#cb29-35" aria-hidden="true" tabindex="-1"></a>resultados_df.sort_values(<span class="st">"p_Kruskal_Wallis"</span>, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb29-36"><a href="#cb29-36" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Resultados de pruebas estadísticas por variable:"</span>)</span>
<span id="cb29-37"><a href="#cb29-37" aria-hidden="true" tabindex="-1"></a>display(resultados_df)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Resultados de pruebas estadísticas por variable:</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Variable</th>
<th data-quarto-table-cell-role="th">p_ANOVA</th>
<th data-quarto-table-cell-role="th">p_Kruskal_Wallis</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">39</td>
<td>VPC_total</td>
<td>0.00</td>
<td>0.00</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">38</td>
<td>VPC_ter</td>
<td>0.00</td>
<td>0.00</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">37</td>
<td>VPC_sec</td>
<td>0.00</td>
<td>0.00</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">10</td>
<td>camas</td>
<td>0.00</td>
<td>0.00</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">19</td>
<td>IDV_pri</td>
<td>0.00</td>
<td>0.00</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">29</td>
<td>TS_15_29</td>
<td>0.00</td>
<td>0.00</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">9</td>
<td>fecundidad_adolescentes</td>
<td>0.00</td>
<td>0.00</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">33</td>
<td>TS_mujeres</td>
<td>0.00</td>
<td>0.00</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">35</td>
<td>va_pc</td>
<td>0.04</td>
<td>0.00</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">30</td>
<td>TS_15_64</td>
<td>0.00</td>
<td>0.00</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">31</td>
<td>TS_30_59</td>
<td>0.00</td>
<td>0.00</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">13</td>
<td>malaria</td>
<td>0.63</td>
<td>0.00</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">16</td>
<td>dens_emp</td>
<td>0.03</td>
<td>0.00</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">32</td>
<td>TS_hombres</td>
<td>0.00</td>
<td>0.00</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">17</td>
<td>fin_banc_pc</td>
<td>0.00</td>
<td>0.00</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">0</td>
<td>tasa_delitos</td>
<td>0.05</td>
<td>0.00</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">14</td>
<td>leishmaniasis</td>
<td>0.00</td>
<td>0.00</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">20</td>
<td>IDV_sec</td>
<td>0.00</td>
<td>0.00</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">34</td>
<td>TS_total</td>
<td>0.00</td>
<td>0.00</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">24</td>
<td>TIS_15_64</td>
<td>0.09</td>
<td>0.00</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">28</td>
<td>TIS_total</td>
<td>0.15</td>
<td>0.00</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">8</td>
<td>fecundidad_niñas</td>
<td>0.07</td>
<td>0.01</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">27</td>
<td>TIS_mujeres</td>
<td>0.10</td>
<td>0.01</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">2</td>
<td>homicidios</td>
<td>0.03</td>
<td>0.01</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">23</td>
<td>TIS_15_29</td>
<td>0.14</td>
<td>0.01</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">25</td>
<td>TIS_30_59</td>
<td>0.02</td>
<td>0.01</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">36</td>
<td>VPC_pri</td>
<td>0.15</td>
<td>0.01</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">26</td>
<td>TIS_hombres</td>
<td>0.16</td>
<td>0.02</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">11</td>
<td>IRA</td>
<td>0.85</td>
<td>0.03</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>VBG</td>
<td>0.45</td>
<td>0.06</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">3</td>
<td>vinculacion_nna</td>
<td>0.33</td>
<td>0.07</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">6</td>
<td>mortalidad_desnutrición</td>
<td>0.81</td>
<td>0.08</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">12</td>
<td>dengue</td>
<td>0.60</td>
<td>0.09</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">7</td>
<td>desnutrición_aguda</td>
<td>0.95</td>
<td>0.10</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">21</td>
<td>IDV_ter</td>
<td>0.68</td>
<td>0.12</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">15</td>
<td>afectados_dn</td>
<td>0.40</td>
<td>0.13</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>VBG_jovenes</td>
<td>0.54</td>
<td>0.14</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">22</td>
<td>IDV_total</td>
<td>0.13</td>
<td>0.25</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">5</td>
<td>EDA</td>
<td>0.90</td>
<td>0.66</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">18</td>
<td>fin_microcr_pc</td>
<td>0.84</td>
<td>0.98</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>✅ <strong>Cómo interpretar los valores p</strong></p>
<ul>
<li><p><strong>Si p &lt; 0.05:</strong> Hay evidencia estadística de que la tasa es significativamente diferente en al menos uno de los grupos de tamaño. Un P bajo sugiere que municipios Pequeños, Medianos y Grandes tienen valores distintos, y esa diferencia podría deberse al efecto del denominador (población) o a condiciones estructurales.</p></li>
<li><p><strong>Si p ≥ 0.05:</strong> No hay evidencia suficiente para decir que la tasa varía significativamente entre grupos. Un p alto sugiere que la variabilidad de esa tasa no está asociada al tamaño poblacional — es decir, los municipios pequeños no necesariamente muestran valores más extremos que los grandes.</p></li>
</ul>
<p>Usa Kruskal-Wallis como referencia principal si tus datos no siguen una distribución normal (lo más probable en datos municipales).</p>
<div id="53b58879-30a2-4de1-bc4e-d72a63744de8" class="cell" data-execution_count="19">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Filtrar la tabla resultados_df y mostrar únicamente los resultados de la prueba Kruskal-Wallis con p &lt; 0.05 </span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a><span class="co"># (evidencia estadística de diferencia significativa entre grupos poblacionales):</span></span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Filtrar resultados con p &lt; 0.05 en la prueba de Kruskal-Wallis</span></span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>resultados_significativos <span class="op">=</span> resultados_df[resultados_df[<span class="st">"p_Kruskal_Wallis"</span>] <span class="op">&lt;</span> <span class="fl">0.05</span>][[<span class="st">"Variable"</span>, <span class="st">"p_Kruskal_Wallis"</span>]]</span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Contar cuántos indicadores tienen p &lt; 0.05 y calcular el porcentaje</span></span>
<span id="cb31-8"><a href="#cb31-8" aria-hidden="true" tabindex="-1"></a>n_significativos <span class="op">=</span> resultados_significativos.shape[<span class="dv">0</span>]</span>
<span id="cb31-9"><a href="#cb31-9" aria-hidden="true" tabindex="-1"></a>n_total <span class="op">=</span> resultados_df.shape[<span class="dv">0</span>]</span>
<span id="cb31-10"><a href="#cb31-10" aria-hidden="true" tabindex="-1"></a>porcentaje <span class="op">=</span> (n_significativos <span class="op">/</span> n_total) <span class="op">*</span> <span class="dv">100</span></span>
<span id="cb31-11"><a href="#cb31-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-12"><a href="#cb31-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Mostrar resumen y tabla ordenada</span></span>
<span id="cb31-13"><a href="#cb31-13" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"</span><span class="sc">{</span>n_significativos<span class="sc">}</span><span class="ss"> de </span><span class="sc">{</span>n_total<span class="sc">}</span><span class="ss"> indicadores (</span><span class="sc">{</span>porcentaje<span class="sc">:.1f}</span><span class="ss">%) presentan diferencias significativas entre grupos poblacionales (p &lt; 0.05, Kruskal-Wallis)."</span>)</span>
<span id="cb31-14"><a href="#cb31-14" aria-hidden="true" tabindex="-1"></a>display(resultados_significativos.sort_values(by<span class="op">=</span><span class="st">"Variable"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>29 de 40 indicadores (72.5%) presentan diferencias significativas entre grupos poblacionales (p &lt; 0.05, Kruskal-Wallis).</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Variable</th>
<th data-quarto-table-cell-role="th">p_Kruskal_Wallis</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">19</td>
<td>IDV_pri</td>
<td>0.00</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">20</td>
<td>IDV_sec</td>
<td>0.00</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">11</td>
<td>IRA</td>
<td>0.03</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">23</td>
<td>TIS_15_29</td>
<td>0.01</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">24</td>
<td>TIS_15_64</td>
<td>0.00</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">25</td>
<td>TIS_30_59</td>
<td>0.01</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">26</td>
<td>TIS_hombres</td>
<td>0.02</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">27</td>
<td>TIS_mujeres</td>
<td>0.01</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">28</td>
<td>TIS_total</td>
<td>0.00</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">29</td>
<td>TS_15_29</td>
<td>0.00</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">30</td>
<td>TS_15_64</td>
<td>0.00</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">31</td>
<td>TS_30_59</td>
<td>0.00</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">32</td>
<td>TS_hombres</td>
<td>0.00</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">33</td>
<td>TS_mujeres</td>
<td>0.00</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">34</td>
<td>TS_total</td>
<td>0.00</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">36</td>
<td>VPC_pri</td>
<td>0.01</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">37</td>
<td>VPC_sec</td>
<td>0.00</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">38</td>
<td>VPC_ter</td>
<td>0.00</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">39</td>
<td>VPC_total</td>
<td>0.00</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">10</td>
<td>camas</td>
<td>0.00</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">16</td>
<td>dens_emp</td>
<td>0.00</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">9</td>
<td>fecundidad_adolescentes</td>
<td>0.00</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">8</td>
<td>fecundidad_niñas</td>
<td>0.01</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">17</td>
<td>fin_banc_pc</td>
<td>0.00</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>homicidios</td>
<td>0.01</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">14</td>
<td>leishmaniasis</td>
<td>0.00</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">13</td>
<td>malaria</td>
<td>0.00</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">0</td>
<td>tasa_delitos</td>
<td>0.00</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">35</td>
<td>va_pc</td>
<td>0.00</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>
<section id="evaluación-de-patrones-de-magnitud" class="level3">
<h3 class="anchored" data-anchor-id="evaluación-de-patrones-de-magnitud">2. Evaluación de patrones de magnitud</h3>
<p>Se compararon las medianas y p95 entre grupos para identificar si los municipios pequeños tienden a tener tasas más altas. Se generó una tabla de diagnóstico categorizando los indicadores según este patrón.</p>
<p>Inicialmente se hizo este ejercicio para los indicadores con diferencias significativas entre grupos poblacionales según la prueba de Kruskal-Wallis buscanndo determinar si los <strong>municipios pequeños tienden a registrar tasas más altas</strong>, no obstante finalmente se decidió enfocar el análisis de estabilidad únicamente en aquellos <strong>indicadores que mostraban tasas más altas en municipios pequeños</strong>, independientemente del valor p del test. Esto se justificó por el objetivo principal del estudio: <strong>identificar potenciales distorsiones inducidas por el bajo denominador poblacional</strong>, más que diferencias estadísticas globales entre grupos. La información del test fue útil como insumo adicional, pero no constituyó el criterio principal de priorización para el análisis cualitativo.</p>
<p>Para ello:</p>
<ol type="1">
<li><p>Se calculan estadísticas descriptivas (media, desviación estándar, percentiles 5, 50 y 95) por grupo de tamaño poblacional.</p></li>
<li><p>Se seleccionan únicamente los indicadores que presentaron diferencias estadísticamente significativas entre grupos de tamaño poblacional según la prueba de Kruskal-Wallis. <strong>Luego se hace el ejericicio sin este filtro</strong></p></li>
<li><p>Se comparan las medianas (q50) y los percentiles 95 (q95) de estos indicadores para cada grupo.</p></li>
<li><p>Si el grupo “Pequeño” tiene sistemáticamente el mayor valor en q50 o q95, se interpreta como una posible señal de que las tasas tienden a dispararse en municipios con poca población.</p></li>
</ol>
<p>Esta revisión ayuda a definir qué tasas requieren ajustes metodológicos o interpretaciones diferenciadas para luego complementar el análisis con el CV y el IQR de estos indicadores según el tamaño de los municipios</p>
<div id="5294fa4e-7234-4c25-aea2-9d340652f7fd" class="cell" data-execution_count="20">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Ejericicio para los indicadores del ue presentaron diferencias estadísticamente significativas entre grupos de tamaño poblacional según la prueba de Kruskal-Wallis</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Paso 1: Calcular estadísticas descriptivas por grupo de tamaño</span></span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>g <span class="op">=</span> tasa_data.groupby(<span class="st">"Grupo_tamano"</span>)[tasa_vars]</span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>mean_df <span class="op">=</span> g.mean().add_suffix(<span class="st">"_mean"</span>)</span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a>std_df  <span class="op">=</span> g.std().add_suffix(<span class="st">"_std"</span>)</span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a>q05_df  <span class="op">=</span> g.quantile(<span class="fl">0.05</span>).add_suffix(<span class="st">"_q05"</span>)</span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a>q50_df  <span class="op">=</span> g.quantile(<span class="fl">0.50</span>).add_suffix(<span class="st">"_q50"</span>)</span>
<span id="cb33-8"><a href="#cb33-8" aria-hidden="true" tabindex="-1"></a>q95_df  <span class="op">=</span> g.quantile(<span class="fl">0.95</span>).add_suffix(<span class="st">"_q95"</span>)</span>
<span id="cb33-9"><a href="#cb33-9" aria-hidden="true" tabindex="-1"></a>estadisticas <span class="op">=</span> pd.concat([mean_df, std_df, q05_df, q50_df, q95_df], axis<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb33-10"><a href="#cb33-10" aria-hidden="true" tabindex="-1"></a>estadisticas[<span class="st">"Grupo_tamano"</span>] <span class="op">=</span> estadisticas.index</span>
<span id="cb33-11"><a href="#cb33-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-12"><a href="#cb33-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Paso 2: Filtrar variables significativas según Kruskal-Wallis</span></span>
<span id="cb33-13"><a href="#cb33-13" aria-hidden="true" tabindex="-1"></a>destacadas <span class="op">=</span> resultados_significativos[<span class="st">"Variable"</span>].unique()</span>
<span id="cb33-14"><a href="#cb33-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-15"><a href="#cb33-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Paso 3: Filtrar columnas q50 y q95 para esas variables</span></span>
<span id="cb33-16"><a href="#cb33-16" aria-hidden="true" tabindex="-1"></a>estad_q50_q95 <span class="op">=</span> estadisticas[</span>
<span id="cb33-17"><a href="#cb33-17" aria-hidden="true" tabindex="-1"></a>    [<span class="st">"Grupo_tamano"</span>] <span class="op">+</span></span>
<span id="cb33-18"><a href="#cb33-18" aria-hidden="true" tabindex="-1"></a>    [col <span class="cf">for</span> col <span class="kw">in</span> estadisticas.columns</span>
<span id="cb33-19"><a href="#cb33-19" aria-hidden="true" tabindex="-1"></a>     <span class="cf">if</span> <span class="bu">any</span>(var <span class="kw">in</span> col <span class="cf">for</span> var <span class="kw">in</span> destacadas)</span>
<span id="cb33-20"><a href="#cb33-20" aria-hidden="true" tabindex="-1"></a>     <span class="kw">and</span> (col.endswith(<span class="st">"_q50"</span>) <span class="kw">or</span> col.endswith(<span class="st">"_q95"</span>))]</span>
<span id="cb33-21"><a href="#cb33-21" aria-hidden="true" tabindex="-1"></a>]</span>
<span id="cb33-22"><a href="#cb33-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-23"><a href="#cb33-23" aria-hidden="true" tabindex="-1"></a><span class="co"># Paso 4: Transformar a formato largo</span></span>
<span id="cb33-24"><a href="#cb33-24" aria-hidden="true" tabindex="-1"></a>melted <span class="op">=</span> estad_q50_q95.melt(id_vars<span class="op">=</span><span class="st">"Grupo_tamano"</span>, var_name<span class="op">=</span><span class="st">"Variable"</span>, value_name<span class="op">=</span><span class="st">"Valor"</span>)</span>
<span id="cb33-25"><a href="#cb33-25" aria-hidden="true" tabindex="-1"></a>melted[<span class="st">"Base"</span>] <span class="op">=</span> melted[<span class="st">"Variable"</span>].<span class="bu">str</span>.replace(<span class="vs">r"_</span><span class="kw">(</span><span class="vs">q50</span><span class="cf">|</span><span class="vs">q95</span><span class="kw">)</span><span class="dv">$</span><span class="vs">"</span>, <span class="st">""</span>, regex<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb33-26"><a href="#cb33-26" aria-hidden="true" tabindex="-1"></a>melted[<span class="st">"Estadistico"</span>] <span class="op">=</span> melted[<span class="st">"Variable"</span>].<span class="bu">str</span>.extract(<span class="vs">r"_</span><span class="kw">(</span><span class="vs">q50</span><span class="cf">|</span><span class="vs">q95</span><span class="kw">)</span><span class="dv">$</span><span class="vs">"</span>)</span>
<span id="cb33-27"><a href="#cb33-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-28"><a href="#cb33-28" aria-hidden="true" tabindex="-1"></a><span class="co"># Paso 5: Pivotear para comparar q50 y q95 por grupo</span></span>
<span id="cb33-29"><a href="#cb33-29" aria-hidden="true" tabindex="-1"></a>pivoted <span class="op">=</span> melted.pivot_table(index<span class="op">=</span>[<span class="st">"Base"</span>, <span class="st">"Grupo_tamano"</span>],</span>
<span id="cb33-30"><a href="#cb33-30" aria-hidden="true" tabindex="-1"></a>                             columns<span class="op">=</span><span class="st">"Estadistico"</span>, values<span class="op">=</span><span class="st">"Valor"</span>).reset_index()</span>
<span id="cb33-31"><a href="#cb33-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-32"><a href="#cb33-32" aria-hidden="true" tabindex="-1"></a><span class="co"># Paso 6: Diagnóstico de si grupo "Pequeño" tiene las tasas más altas</span></span>
<span id="cb33-33"><a href="#cb33-33" aria-hidden="true" tabindex="-1"></a>diagnostico <span class="op">=</span> []</span>
<span id="cb33-34"><a href="#cb33-34" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> var <span class="kw">in</span> pivoted[<span class="st">"Base"</span>].unique():</span>
<span id="cb33-35"><a href="#cb33-35" aria-hidden="true" tabindex="-1"></a>    sub <span class="op">=</span> pivoted[pivoted[<span class="st">"Base"</span>] <span class="op">==</span> var]</span>
<span id="cb33-36"><a href="#cb33-36" aria-hidden="true" tabindex="-1"></a>    max_q50 <span class="op">=</span> sub.loc[sub[<span class="st">"q50"</span>].idxmax()]</span>
<span id="cb33-37"><a href="#cb33-37" aria-hidden="true" tabindex="-1"></a>    max_q95 <span class="op">=</span> sub.loc[sub[<span class="st">"q95"</span>].idxmax()]</span>
<span id="cb33-38"><a href="#cb33-38" aria-hidden="true" tabindex="-1"></a>    val_q50_peq <span class="op">=</span> sub[sub[<span class="st">"Grupo_tamano"</span>] <span class="op">==</span> <span class="st">"Pequeño"</span>][<span class="st">"q50"</span>].values[<span class="dv">0</span>]</span>
<span id="cb33-39"><a href="#cb33-39" aria-hidden="true" tabindex="-1"></a>    val_q95_peq <span class="op">=</span> sub[sub[<span class="st">"Grupo_tamano"</span>] <span class="op">==</span> <span class="st">"Pequeño"</span>][<span class="st">"q95"</span>].values[<span class="dv">0</span>]</span>
<span id="cb33-40"><a href="#cb33-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-41"><a href="#cb33-41" aria-hidden="true" tabindex="-1"></a>    diagnostico.append({</span>
<span id="cb33-42"><a href="#cb33-42" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Variable"</span>: var,</span>
<span id="cb33-43"><a href="#cb33-43" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Pequeño_q50"</span>: val_q50_peq,</span>
<span id="cb33-44"><a href="#cb33-44" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Pequeño_q95"</span>: val_q95_peq,</span>
<span id="cb33-45"><a href="#cb33-45" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Grupo_max_q50"</span>: max_q50[<span class="st">"Grupo_tamano"</span>],</span>
<span id="cb33-46"><a href="#cb33-46" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Grupo_max_q95"</span>: max_q95[<span class="st">"Grupo_tamano"</span>],</span>
<span id="cb33-47"><a href="#cb33-47" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Diagnóstico"</span>: (</span>
<span id="cb33-48"><a href="#cb33-48" aria-hidden="true" tabindex="-1"></a>            <span class="st">"Tasa tiende a ser más alta en municipios pequeños"</span></span>
<span id="cb33-49"><a href="#cb33-49" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> (max_q50[<span class="st">"Grupo_tamano"</span>] <span class="op">==</span> <span class="st">"Pequeño"</span> <span class="kw">or</span> max_q95[<span class="st">"Grupo_tamano"</span>] <span class="op">==</span> <span class="st">"Pequeño"</span>)</span>
<span id="cb33-50"><a href="#cb33-50" aria-hidden="true" tabindex="-1"></a>            <span class="cf">else</span> <span class="st">"No hay patrón claro de mayor tasa en municipios pequeños"</span></span>
<span id="cb33-51"><a href="#cb33-51" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb33-52"><a href="#cb33-52" aria-hidden="true" tabindex="-1"></a>    })</span>
<span id="cb33-53"><a href="#cb33-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-54"><a href="#cb33-54" aria-hidden="true" tabindex="-1"></a><span class="co"># Paso 7: Crear y mostrar tabla final</span></span>
<span id="cb33-55"><a href="#cb33-55" aria-hidden="true" tabindex="-1"></a>diagnostico_df <span class="op">=</span> pd.DataFrame(diagnostico)</span>
<span id="cb33-56"><a href="#cb33-56" aria-hidden="true" tabindex="-1"></a>diagnostico_df <span class="op">=</span> diagnostico_df.sort_values(<span class="st">"Variable"</span>)</span>
<span id="cb33-57"><a href="#cb33-57" aria-hidden="true" tabindex="-1"></a>display(diagnostico_df)</span>
<span id="cb33-58"><a href="#cb33-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-59"><a href="#cb33-59" aria-hidden="true" tabindex="-1"></a><span class="co"># Paso 8: Contar cuántas variables tienen tasas más altas en municipios pequeños</span></span>
<span id="cb33-60"><a href="#cb33-60" aria-hidden="true" tabindex="-1"></a>n_total <span class="op">=</span> diagnostico_df.shape[<span class="dv">0</span>]</span>
<span id="cb33-61"><a href="#cb33-61" aria-hidden="true" tabindex="-1"></a>n_pequenos <span class="op">=</span> diagnostico_df[diagnostico_df[<span class="st">"Diagnóstico"</span>] <span class="op">==</span> <span class="st">"Tasa tiende a ser más alta en municipios pequeños"</span>].shape[<span class="dv">0</span>]</span>
<span id="cb33-62"><a href="#cb33-62" aria-hidden="true" tabindex="-1"></a>porcentaje_pequenos <span class="op">=</span> (n_pequenos <span class="op">/</span> n_total) <span class="op">*</span> <span class="dv">100</span></span>
<span id="cb33-63"><a href="#cb33-63" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-64"><a href="#cb33-64" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Total de indicadores evaluados: </span><span class="sc">{</span>n_total<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb33-65"><a href="#cb33-65" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Indicadores con tasas más altas en municipios pequeños: </span><span class="sc">{</span>n_pequenos<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb33-66"><a href="#cb33-66" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Porcentaje: </span><span class="sc">{</span>porcentaje_pequenos<span class="sc">:.1f}</span><span class="ss">%"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Variable</th>
<th data-quarto-table-cell-role="th">Pequeño_q50</th>
<th data-quarto-table-cell-role="th">Pequeño_q95</th>
<th data-quarto-table-cell-role="th">Grupo_max_q50</th>
<th data-quarto-table-cell-role="th">Grupo_max_q95</th>
<th data-quarto-table-cell-role="th">Diagnóstico</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>IDV_pri</td>
<td>0.00</td>
<td>0.27</td>
<td>Grande</td>
<td>Grande</td>
<td>No hay patrón claro de mayor tasa en municipio...</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>IDV_sec</td>
<td>0.15</td>
<td>0.40</td>
<td>Pequeño</td>
<td>Pequeño</td>
<td>Tasa tiende a ser más alta en municipios pequeños</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>IRA</td>
<td>0.00</td>
<td>40.74</td>
<td>Grande</td>
<td>Mediano</td>
<td>No hay patrón claro de mayor tasa en municipio...</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>TIS_15_29</td>
<td>188.59</td>
<td>478.20</td>
<td>Grande</td>
<td>Pequeño</td>
<td>Tasa tiende a ser más alta en municipios pequeños</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>TIS_15_64</td>
<td>64.20</td>
<td>202.19</td>
<td>Grande</td>
<td>Pequeño</td>
<td>Tasa tiende a ser más alta en municipios pequeños</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">5</td>
<td>TIS_30_59</td>
<td>55.54</td>
<td>136.92</td>
<td>Pequeño</td>
<td>Pequeño</td>
<td>Tasa tiende a ser más alta en municipios pequeños</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">6</td>
<td>TIS_hombres</td>
<td>45.15</td>
<td>150.50</td>
<td>Grande</td>
<td>Pequeño</td>
<td>Tasa tiende a ser más alta en municipios pequeños</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">7</td>
<td>TIS_mujeres</td>
<td>79.91</td>
<td>261.59</td>
<td>Grande</td>
<td>Pequeño</td>
<td>Tasa tiende a ser más alta en municipios pequeños</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">8</td>
<td>TIS_total</td>
<td>60.91</td>
<td>158.00</td>
<td>Grande</td>
<td>Pequeño</td>
<td>Tasa tiende a ser más alta en municipios pequeños</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">9</td>
<td>TS_15_29</td>
<td>48.57</td>
<td>104.17</td>
<td>Pequeño</td>
<td>Pequeño</td>
<td>Tasa tiende a ser más alta en municipios pequeños</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">10</td>
<td>TS_15_64</td>
<td>23.05</td>
<td>43.46</td>
<td>Pequeño</td>
<td>Pequeño</td>
<td>Tasa tiende a ser más alta en municipios pequeños</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">11</td>
<td>TS_30_59</td>
<td>35.49</td>
<td>51.17</td>
<td>Pequeño</td>
<td>Pequeño</td>
<td>Tasa tiende a ser más alta en municipios pequeños</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">12</td>
<td>TS_hombres</td>
<td>25.99</td>
<td>51.05</td>
<td>Pequeño</td>
<td>Pequeño</td>
<td>Tasa tiende a ser más alta en municipios pequeños</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">13</td>
<td>TS_mujeres</td>
<td>25.75</td>
<td>75.83</td>
<td>Pequeño</td>
<td>Pequeño</td>
<td>Tasa tiende a ser más alta en municipios pequeños</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">14</td>
<td>TS_total</td>
<td>13.87</td>
<td>35.61</td>
<td>Pequeño</td>
<td>Pequeño</td>
<td>Tasa tiende a ser más alta en municipios pequeños</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">15</td>
<td>VPC_pri</td>
<td>0.00</td>
<td>5.47</td>
<td>Mediano</td>
<td>Pequeño</td>
<td>Tasa tiende a ser más alta en municipios pequeños</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">16</td>
<td>VPC_sec</td>
<td>2.99</td>
<td>8.38</td>
<td>Pequeño</td>
<td>Pequeño</td>
<td>Tasa tiende a ser más alta en municipios pequeños</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">17</td>
<td>VPC_ter</td>
<td>8.66</td>
<td>19.97</td>
<td>Pequeño</td>
<td>Pequeño</td>
<td>Tasa tiende a ser más alta en municipios pequeños</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">18</td>
<td>VPC_total</td>
<td>14.31</td>
<td>27.12</td>
<td>Pequeño</td>
<td>Pequeño</td>
<td>Tasa tiende a ser más alta en municipios pequeños</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">19</td>
<td>camas</td>
<td>74.41</td>
<td>146.42</td>
<td>Grande</td>
<td>Grande</td>
<td>No hay patrón claro de mayor tasa en municipio...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">20</td>
<td>dens_emp</td>
<td>20.10</td>
<td>49.87</td>
<td>Grande</td>
<td>Mediano</td>
<td>No hay patrón claro de mayor tasa en municipio...</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">21</td>
<td>fecundidad_adolescentes</td>
<td>30.53</td>
<td>63.83</td>
<td>Mediano</td>
<td>Mediano</td>
<td>No hay patrón claro de mayor tasa en municipio...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">22</td>
<td>fecundidad_niñas</td>
<td>0.00</td>
<td>7.85</td>
<td>Mediano</td>
<td>Mediano</td>
<td>No hay patrón claro de mayor tasa en municipio...</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">23</td>
<td>fin_banc_pc</td>
<td>7.67</td>
<td>16.75</td>
<td>Pequeño</td>
<td>Pequeño</td>
<td>Tasa tiende a ser más alta en municipios pequeños</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">24</td>
<td>homicidios</td>
<td>32.02</td>
<td>161.97</td>
<td>Mediano</td>
<td>Pequeño</td>
<td>Tasa tiende a ser más alta en municipios pequeños</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">25</td>
<td>leishmaniasis</td>
<td>0.00</td>
<td>122.21</td>
<td>Mediano</td>
<td>Mediano</td>
<td>No hay patrón claro de mayor tasa en municipio...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">26</td>
<td>malaria</td>
<td>0.00</td>
<td>134.24</td>
<td>Mediano</td>
<td>Mediano</td>
<td>No hay patrón claro de mayor tasa en municipio...</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">27</td>
<td>tasa_delitos</td>
<td>0.01</td>
<td>0.07</td>
<td>Grande</td>
<td>Grande</td>
<td>No hay patrón claro de mayor tasa en municipio...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">28</td>
<td>va_pc</td>
<td>11149.07</td>
<td>29834.42</td>
<td>Grande</td>
<td>Grande</td>
<td>No hay patrón claro de mayor tasa en municipio...</td>
</tr>
</tbody>
</table>

</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Total de indicadores evaluados: 29
Indicadores con tasas más altas en municipios pequeños: 19
Porcentaje: 65.5%</code></pre>
</div>
</div>
<div id="0f52c1c1-98fd-4edf-abd4-f173f2444661" class="cell" data-execution_count="41">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Ejercicio para todas las tasas, no solo las que indicadoron diferencias en el test</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Paso 1: Calcular estadísticas descriptivas por grupo de tamaño para todas las tasas</span></span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a>g <span class="op">=</span> tasa_data.groupby(<span class="st">"Grupo_tamano"</span>)[tasa_vars]</span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a>mean_df <span class="op">=</span> g.mean().add_suffix(<span class="st">"_mean"</span>)</span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a>std_df  <span class="op">=</span> g.std().add_suffix(<span class="st">"_std"</span>)</span>
<span id="cb35-7"><a href="#cb35-7" aria-hidden="true" tabindex="-1"></a>q05_df  <span class="op">=</span> g.quantile(<span class="fl">0.05</span>).add_suffix(<span class="st">"_q05"</span>)</span>
<span id="cb35-8"><a href="#cb35-8" aria-hidden="true" tabindex="-1"></a>q50_df  <span class="op">=</span> g.quantile(<span class="fl">0.50</span>).add_suffix(<span class="st">"_q50"</span>)</span>
<span id="cb35-9"><a href="#cb35-9" aria-hidden="true" tabindex="-1"></a>q95_df  <span class="op">=</span> g.quantile(<span class="fl">0.95</span>).add_suffix(<span class="st">"_q95"</span>)</span>
<span id="cb35-10"><a href="#cb35-10" aria-hidden="true" tabindex="-1"></a>estadisticas <span class="op">=</span> pd.concat([mean_df, std_df, q05_df, q50_df, q95_df], axis<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb35-11"><a href="#cb35-11" aria-hidden="true" tabindex="-1"></a>estadisticas[<span class="st">"Grupo_tamano"</span>] <span class="op">=</span> estadisticas.index</span>
<span id="cb35-12"><a href="#cb35-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-13"><a href="#cb35-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Paso 2: Extraer solo columnas de q50 y q95 para todas las tasas</span></span>
<span id="cb35-14"><a href="#cb35-14" aria-hidden="true" tabindex="-1"></a>estad_q50_q95 <span class="op">=</span> estadisticas[</span>
<span id="cb35-15"><a href="#cb35-15" aria-hidden="true" tabindex="-1"></a>    [<span class="st">"Grupo_tamano"</span>] <span class="op">+</span></span>
<span id="cb35-16"><a href="#cb35-16" aria-hidden="true" tabindex="-1"></a>    [col <span class="cf">for</span> col <span class="kw">in</span> estadisticas.columns <span class="cf">if</span> col.endswith(<span class="st">"_q50"</span>) <span class="kw">or</span> col.endswith(<span class="st">"_q95"</span>)]</span>
<span id="cb35-17"><a href="#cb35-17" aria-hidden="true" tabindex="-1"></a>]</span>
<span id="cb35-18"><a href="#cb35-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-19"><a href="#cb35-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Paso 3: Transformar a formato largo</span></span>
<span id="cb35-20"><a href="#cb35-20" aria-hidden="true" tabindex="-1"></a>melted <span class="op">=</span> estad_q50_q95.melt(id_vars<span class="op">=</span><span class="st">"Grupo_tamano"</span>, var_name<span class="op">=</span><span class="st">"Variable"</span>, value_name<span class="op">=</span><span class="st">"Valor"</span>)</span>
<span id="cb35-21"><a href="#cb35-21" aria-hidden="true" tabindex="-1"></a>melted[<span class="st">"Base"</span>] <span class="op">=</span> melted[<span class="st">"Variable"</span>].<span class="bu">str</span>.replace(<span class="vs">r"_</span><span class="kw">(</span><span class="vs">q50</span><span class="cf">|</span><span class="vs">q95</span><span class="kw">)</span><span class="dv">$</span><span class="vs">"</span>, <span class="st">""</span>, regex<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb35-22"><a href="#cb35-22" aria-hidden="true" tabindex="-1"></a>melted[<span class="st">"Estadistico"</span>] <span class="op">=</span> melted[<span class="st">"Variable"</span>].<span class="bu">str</span>.extract(<span class="vs">r"_</span><span class="kw">(</span><span class="vs">q50</span><span class="cf">|</span><span class="vs">q95</span><span class="kw">)</span><span class="dv">$</span><span class="vs">"</span>)</span>
<span id="cb35-23"><a href="#cb35-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-24"><a href="#cb35-24" aria-hidden="true" tabindex="-1"></a><span class="co"># Paso 4: Pivotear para comparar q50 y q95 por grupo</span></span>
<span id="cb35-25"><a href="#cb35-25" aria-hidden="true" tabindex="-1"></a>pivoted <span class="op">=</span> melted.pivot_table(index<span class="op">=</span>[<span class="st">"Base"</span>, <span class="st">"Grupo_tamano"</span>],</span>
<span id="cb35-26"><a href="#cb35-26" aria-hidden="true" tabindex="-1"></a>                             columns<span class="op">=</span><span class="st">"Estadistico"</span>, values<span class="op">=</span><span class="st">"Valor"</span>).reset_index()</span>
<span id="cb35-27"><a href="#cb35-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-28"><a href="#cb35-28" aria-hidden="true" tabindex="-1"></a><span class="co"># Paso 5: Diagnóstico de si grupo "Pequeño" tiene las tasas más altas</span></span>
<span id="cb35-29"><a href="#cb35-29" aria-hidden="true" tabindex="-1"></a>diagnostico <span class="op">=</span> []</span>
<span id="cb35-30"><a href="#cb35-30" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> var <span class="kw">in</span> pivoted[<span class="st">"Base"</span>].unique():</span>
<span id="cb35-31"><a href="#cb35-31" aria-hidden="true" tabindex="-1"></a>    sub <span class="op">=</span> pivoted[pivoted[<span class="st">"Base"</span>] <span class="op">==</span> var]</span>
<span id="cb35-32"><a href="#cb35-32" aria-hidden="true" tabindex="-1"></a>    max_q50 <span class="op">=</span> sub.loc[sub[<span class="st">"q50"</span>].idxmax()]</span>
<span id="cb35-33"><a href="#cb35-33" aria-hidden="true" tabindex="-1"></a>    max_q95 <span class="op">=</span> sub.loc[sub[<span class="st">"q95"</span>].idxmax()]</span>
<span id="cb35-34"><a href="#cb35-34" aria-hidden="true" tabindex="-1"></a>    val_q50_peq <span class="op">=</span> sub[sub[<span class="st">"Grupo_tamano"</span>] <span class="op">==</span> <span class="st">"Pequeño"</span>][<span class="st">"q50"</span>].values[<span class="dv">0</span>]</span>
<span id="cb35-35"><a href="#cb35-35" aria-hidden="true" tabindex="-1"></a>    val_q95_peq <span class="op">=</span> sub[sub[<span class="st">"Grupo_tamano"</span>] <span class="op">==</span> <span class="st">"Pequeño"</span>][<span class="st">"q95"</span>].values[<span class="dv">0</span>]</span>
<span id="cb35-36"><a href="#cb35-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-37"><a href="#cb35-37" aria-hidden="true" tabindex="-1"></a>    diagnostico.append({</span>
<span id="cb35-38"><a href="#cb35-38" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Variable"</span>: var,</span>
<span id="cb35-39"><a href="#cb35-39" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Pequeño_q50"</span>: val_q50_peq,</span>
<span id="cb35-40"><a href="#cb35-40" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Pequeño_q95"</span>: val_q95_peq,</span>
<span id="cb35-41"><a href="#cb35-41" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Grupo_max_q50"</span>: max_q50[<span class="st">"Grupo_tamano"</span>],</span>
<span id="cb35-42"><a href="#cb35-42" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Grupo_max_q95"</span>: max_q95[<span class="st">"Grupo_tamano"</span>],</span>
<span id="cb35-43"><a href="#cb35-43" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Diagnóstico"</span>: (</span>
<span id="cb35-44"><a href="#cb35-44" aria-hidden="true" tabindex="-1"></a>            <span class="st">"Tasa tiende a ser más alta en municipios pequeños"</span></span>
<span id="cb35-45"><a href="#cb35-45" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> (max_q50[<span class="st">"Grupo_tamano"</span>] <span class="op">==</span> <span class="st">"Pequeño"</span> <span class="kw">or</span> max_q95[<span class="st">"Grupo_tamano"</span>] <span class="op">==</span> <span class="st">"Pequeño"</span>)</span>
<span id="cb35-46"><a href="#cb35-46" aria-hidden="true" tabindex="-1"></a>            <span class="cf">else</span> <span class="st">"No hay patrón claro de mayor tasa en municipios pequeños"</span></span>
<span id="cb35-47"><a href="#cb35-47" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb35-48"><a href="#cb35-48" aria-hidden="true" tabindex="-1"></a>    })</span>
<span id="cb35-49"><a href="#cb35-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-50"><a href="#cb35-50" aria-hidden="true" tabindex="-1"></a><span class="co"># Paso 6: Crear y mostrar tabla final</span></span>
<span id="cb35-51"><a href="#cb35-51" aria-hidden="true" tabindex="-1"></a>diagnostico_df <span class="op">=</span> pd.DataFrame(diagnostico).sort_values(<span class="st">"Variable"</span>)</span>
<span id="cb35-52"><a href="#cb35-52" aria-hidden="true" tabindex="-1"></a>display(diagnostico_df)</span>
<span id="cb35-53"><a href="#cb35-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-54"><a href="#cb35-54" aria-hidden="true" tabindex="-1"></a><span class="co"># Paso 7: Contar cuántas variables tienen tasas más altas en municipios pequeños</span></span>
<span id="cb35-55"><a href="#cb35-55" aria-hidden="true" tabindex="-1"></a>n_total <span class="op">=</span> diagnostico_df.shape[<span class="dv">0</span>]</span>
<span id="cb35-56"><a href="#cb35-56" aria-hidden="true" tabindex="-1"></a>n_pequenos <span class="op">=</span> diagnostico_df[diagnostico_df[<span class="st">"Diagnóstico"</span>] <span class="op">==</span> <span class="st">"Tasa tiende a ser más alta en municipios pequeños"</span>].shape[<span class="dv">0</span>]</span>
<span id="cb35-57"><a href="#cb35-57" aria-hidden="true" tabindex="-1"></a>porcentaje_pequenos <span class="op">=</span> (n_pequenos <span class="op">/</span> n_total) <span class="op">*</span> <span class="dv">100</span></span>
<span id="cb35-58"><a href="#cb35-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-59"><a href="#cb35-59" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Total de indicadores evaluados: </span><span class="sc">{</span>n_total<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb35-60"><a href="#cb35-60" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Indicadores con tasas más altas en municipios pequeños: </span><span class="sc">{</span>n_pequenos<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb35-61"><a href="#cb35-61" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Porcentaje: </span><span class="sc">{</span>porcentaje_pequenos<span class="sc">:.1f}</span><span class="ss">%"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Variable</th>
<th data-quarto-table-cell-role="th">Pequeño_q50</th>
<th data-quarto-table-cell-role="th">Pequeño_q95</th>
<th data-quarto-table-cell-role="th">Grupo_max_q50</th>
<th data-quarto-table-cell-role="th">Grupo_max_q95</th>
<th data-quarto-table-cell-role="th">Diagnóstico</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>EDA</td>
<td>0.00</td>
<td>0.00</td>
<td>Grande</td>
<td>Mediano</td>
<td>No hay patrón claro de mayor tasa en municipio...</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>IDV_pri</td>
<td>0.00</td>
<td>0.27</td>
<td>Grande</td>
<td>Grande</td>
<td>No hay patrón claro de mayor tasa en municipio...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>IDV_sec</td>
<td>0.15</td>
<td>0.40</td>
<td>Pequeño</td>
<td>Pequeño</td>
<td>Tasa tiende a ser más alta en municipios pequeños</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>IDV_ter</td>
<td>0.36</td>
<td>0.68</td>
<td>Pequeño</td>
<td>Grande</td>
<td>Tasa tiende a ser más alta en municipios pequeños</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>IDV_total</td>
<td>0.62</td>
<td>1.04</td>
<td>Pequeño</td>
<td>Grande</td>
<td>Tasa tiende a ser más alta en municipios pequeños</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">5</td>
<td>IRA</td>
<td>0.00</td>
<td>40.74</td>
<td>Grande</td>
<td>Mediano</td>
<td>No hay patrón claro de mayor tasa en municipio...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">6</td>
<td>TIS_15_29</td>
<td>188.59</td>
<td>478.20</td>
<td>Grande</td>
<td>Pequeño</td>
<td>Tasa tiende a ser más alta en municipios pequeños</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">7</td>
<td>TIS_15_64</td>
<td>64.20</td>
<td>202.19</td>
<td>Grande</td>
<td>Pequeño</td>
<td>Tasa tiende a ser más alta en municipios pequeños</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">8</td>
<td>TIS_30_59</td>
<td>55.54</td>
<td>136.92</td>
<td>Pequeño</td>
<td>Pequeño</td>
<td>Tasa tiende a ser más alta en municipios pequeños</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">9</td>
<td>TIS_hombres</td>
<td>45.15</td>
<td>150.50</td>
<td>Grande</td>
<td>Pequeño</td>
<td>Tasa tiende a ser más alta en municipios pequeños</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">10</td>
<td>TIS_mujeres</td>
<td>79.91</td>
<td>261.59</td>
<td>Grande</td>
<td>Pequeño</td>
<td>Tasa tiende a ser más alta en municipios pequeños</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">11</td>
<td>TIS_total</td>
<td>60.91</td>
<td>158.00</td>
<td>Grande</td>
<td>Pequeño</td>
<td>Tasa tiende a ser más alta en municipios pequeños</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">12</td>
<td>TS_15_29</td>
<td>48.57</td>
<td>104.17</td>
<td>Pequeño</td>
<td>Pequeño</td>
<td>Tasa tiende a ser más alta en municipios pequeños</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">13</td>
<td>TS_15_64</td>
<td>23.05</td>
<td>43.46</td>
<td>Pequeño</td>
<td>Pequeño</td>
<td>Tasa tiende a ser más alta en municipios pequeños</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">14</td>
<td>TS_30_59</td>
<td>35.49</td>
<td>51.17</td>
<td>Pequeño</td>
<td>Pequeño</td>
<td>Tasa tiende a ser más alta en municipios pequeños</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">15</td>
<td>TS_hombres</td>
<td>25.99</td>
<td>51.05</td>
<td>Pequeño</td>
<td>Pequeño</td>
<td>Tasa tiende a ser más alta en municipios pequeños</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">16</td>
<td>TS_mujeres</td>
<td>25.75</td>
<td>75.83</td>
<td>Pequeño</td>
<td>Pequeño</td>
<td>Tasa tiende a ser más alta en municipios pequeños</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">17</td>
<td>TS_total</td>
<td>13.87</td>
<td>35.61</td>
<td>Pequeño</td>
<td>Pequeño</td>
<td>Tasa tiende a ser más alta en municipios pequeños</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">18</td>
<td>VBG</td>
<td>232.40</td>
<td>642.00</td>
<td>Grande</td>
<td>Pequeño</td>
<td>Tasa tiende a ser más alta en municipios pequeños</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">19</td>
<td>VBG_jovenes</td>
<td>386.85</td>
<td>1091.85</td>
<td>Grande</td>
<td>Pequeño</td>
<td>Tasa tiende a ser más alta en municipios pequeños</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">20</td>
<td>VPC_pri</td>
<td>0.00</td>
<td>5.47</td>
<td>Mediano</td>
<td>Pequeño</td>
<td>Tasa tiende a ser más alta en municipios pequeños</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">21</td>
<td>VPC_sec</td>
<td>2.99</td>
<td>8.38</td>
<td>Pequeño</td>
<td>Pequeño</td>
<td>Tasa tiende a ser más alta en municipios pequeños</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">22</td>
<td>VPC_ter</td>
<td>8.66</td>
<td>19.97</td>
<td>Pequeño</td>
<td>Pequeño</td>
<td>Tasa tiende a ser más alta en municipios pequeños</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">23</td>
<td>VPC_total</td>
<td>14.31</td>
<td>27.12</td>
<td>Pequeño</td>
<td>Pequeño</td>
<td>Tasa tiende a ser más alta en municipios pequeños</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">24</td>
<td>afectados_dn</td>
<td>788.73</td>
<td>61781.75</td>
<td>Mediano</td>
<td>Pequeño</td>
<td>Tasa tiende a ser más alta en municipios pequeños</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">25</td>
<td>camas</td>
<td>74.41</td>
<td>146.42</td>
<td>Grande</td>
<td>Grande</td>
<td>No hay patrón claro de mayor tasa en municipio...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">26</td>
<td>dengue</td>
<td>3.86</td>
<td>423.01</td>
<td>Mediano</td>
<td>Mediano</td>
<td>No hay patrón claro de mayor tasa en municipio...</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">27</td>
<td>dens_emp</td>
<td>20.10</td>
<td>49.87</td>
<td>Grande</td>
<td>Mediano</td>
<td>No hay patrón claro de mayor tasa en municipio...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">28</td>
<td>desnutrición_aguda</td>
<td>286.97</td>
<td>1277.89</td>
<td>Grande</td>
<td>Pequeño</td>
<td>Tasa tiende a ser más alta en municipios pequeños</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">29</td>
<td>fecundidad_adolescentes</td>
<td>30.53</td>
<td>63.83</td>
<td>Mediano</td>
<td>Mediano</td>
<td>No hay patrón claro de mayor tasa en municipio...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">30</td>
<td>fecundidad_niñas</td>
<td>0.00</td>
<td>7.85</td>
<td>Mediano</td>
<td>Mediano</td>
<td>No hay patrón claro de mayor tasa en municipio...</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">31</td>
<td>fin_banc_pc</td>
<td>7.67</td>
<td>16.75</td>
<td>Pequeño</td>
<td>Pequeño</td>
<td>Tasa tiende a ser más alta en municipios pequeños</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">32</td>
<td>fin_microcr_pc</td>
<td>4.62</td>
<td>14.13</td>
<td>Grande</td>
<td>Pequeño</td>
<td>Tasa tiende a ser más alta en municipios pequeños</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">33</td>
<td>homicidios</td>
<td>32.02</td>
<td>161.97</td>
<td>Mediano</td>
<td>Pequeño</td>
<td>Tasa tiende a ser más alta en municipios pequeños</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">34</td>
<td>leishmaniasis</td>
<td>0.00</td>
<td>122.21</td>
<td>Mediano</td>
<td>Mediano</td>
<td>No hay patrón claro de mayor tasa en municipio...</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">35</td>
<td>malaria</td>
<td>0.00</td>
<td>134.24</td>
<td>Mediano</td>
<td>Mediano</td>
<td>No hay patrón claro de mayor tasa en municipio...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">36</td>
<td>mortalidad_desnutrición</td>
<td>0.00</td>
<td>0.00</td>
<td>Grande</td>
<td>Grande</td>
<td>No hay patrón claro de mayor tasa en municipio...</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">37</td>
<td>tasa_delitos</td>
<td>0.01</td>
<td>0.07</td>
<td>Grande</td>
<td>Grande</td>
<td>No hay patrón claro de mayor tasa en municipio...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">38</td>
<td>va_pc</td>
<td>11149.07</td>
<td>29834.42</td>
<td>Grande</td>
<td>Grande</td>
<td>No hay patrón claro de mayor tasa en municipio...</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">39</td>
<td>vinculacion_nna</td>
<td>0.00</td>
<td>23.12</td>
<td>Grande</td>
<td>Pequeño</td>
<td>Tasa tiende a ser más alta en municipios pequeños</td>
</tr>
</tbody>
</table>

</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Total de indicadores evaluados: 40
Indicadores con tasas más altas en municipios pequeños: 27
Porcentaje: 67.5%</code></pre>
</div>
</div>
<p><strong>Consideración</strong></p>
<p>Dado nuestro objetivo —detectar indicadores cuya tasa podría estar distorsionada por la baja población de los municipios pequeños—, la recomendación óptima es:</p>
<p>🔍 Aplicar el análisis complementario de CV/IQR a todos los indicadores que muestran mayor mediana (o p95) en municipios pequeños, independientemente del valor p de Kruskal-Wallis.</p>
<p><strong>¿Por qué?</strong></p>
<ul>
<li><p>El efecto de población pequeña no siempre se traduce en diferencias estadísticamente significativas globales (Kruskal-Wallis).</p></li>
<li><p>Pero sí puede producir outliers o concentraciones de alta tasa en pequeños, visibles en la mediana o el p95.</p></li>
<li><p>El análisis de volatilidad te ayuda a discernir si esas altas tasas son estructurales o solo ruido estadístico, lo cual es justo lo que quieres ajustar.</p></li>
</ul>
</section>
<section id="análisis-de-estabilidad-estadística" class="level3">
<h3 class="anchored" data-anchor-id="análisis-de-estabilidad-estadística">3. <strong>Análisis de estabilidad estadística</strong>:</h3>
<p>para los indicadores que mostraban tasas más altas en municipios pequeños, se calcularon: - el <strong>coeficiente de variación (CV)</strong>: como medida de variabilidad relativa, - el <strong>rango intercuartílico (IQR)</strong>: como medida de dispersión robusta. - <strong>Clasificación cualitativa</strong>: se asignaron categorías empíricas (“Bajo”, “Moderado”, “Muy alto”) al CV e IQR, y se combinó esta información para construir una tabla de diagnóstico por grupo, evaluando si la volatilidad estaba presente solo en municipios pequeños o en todos los grupos.</p>
<p>Procederemos a enfocarnos en los indicadores <strong>cuya mediana y p90 fue más alta en los municipios pequeños</strong>. El objetivo es evaluar si esas tasas elevadas podrían estar influenciadas por la baja población, generando <strong>volatilidad artificial</strong>.</p>
<p>Para ello, analizaremos si estos indicadores presentan niveles altos de <strong>variabilidad relativa (Coeficiente de Variación, CV)</strong> o <strong>dispersión (Rango Intercuartílico, IQR)</strong> específicamente en el grupo de municipios pequeños. Si se identifican valores elevados de CV o IQR en este grupo, se sugerirá la necesidad de <strong>aplicar correcciones estadísticas o realizar análisis diferenciados</strong> para evitar interpretaciones erróneas en ejercicios comparativos o de agrupación municipal.</p>
<div id="d51b1f0b-099b-4c3a-ad8c-a8600ac9998c" class="cell" data-execution_count="42">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 1. Filtrar solo los indicadores cuyo diagnóstico fue "Tasa tiende a ser más alta en municipios pequeños"</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>variables_objetivo <span class="op">=</span> diagnostico_df.loc[</span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>    diagnostico_df[<span class="st">'Diagnóstico'</span>] <span class="op">==</span> <span class="st">"Tasa tiende a ser más alta en municipios pequeños"</span>,</span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Variable'</span></span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a>].unique()</span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-7"><a href="#cb37-7" aria-hidden="true" tabindex="-1"></a><span class="co"># 2. Subset del dataframe de estadísticas solo con esas variables</span></span>
<span id="cb37-8"><a href="#cb37-8" aria-hidden="true" tabindex="-1"></a>estadisticas_subset <span class="op">=</span> estadisticas.<span class="bu">filter</span>(regex<span class="op">=</span><span class="st">"^("</span> <span class="op">+</span> <span class="st">"|"</span>.join(variables_objetivo) <span class="op">+</span> <span class="st">")_(mean|std|q05|q50|q95)$"</span>)</span>
<span id="cb37-9"><a href="#cb37-9" aria-hidden="true" tabindex="-1"></a>estadisticas_subset.insert(<span class="dv">0</span>, <span class="st">"Grupo_tamano"</span>, estadisticas[<span class="st">"Grupo_tamano"</span>])  <span class="co"># Añadir columna de grupo</span></span>
<span id="cb37-10"><a href="#cb37-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-11"><a href="#cb37-11" aria-hidden="true" tabindex="-1"></a><span class="co"># 3. Transformar a formato largo para facilitar el análisis</span></span>
<span id="cb37-12"><a href="#cb37-12" aria-hidden="true" tabindex="-1"></a>long_df <span class="op">=</span> estadisticas_subset.melt(id_vars<span class="op">=</span><span class="st">"Grupo_tamano"</span>, var_name<span class="op">=</span><span class="st">"Variable_Medida"</span>, value_name<span class="op">=</span><span class="st">"Valor"</span>)</span>
<span id="cb37-13"><a href="#cb37-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-14"><a href="#cb37-14" aria-hidden="true" tabindex="-1"></a><span class="co"># 4. Separar nombre del indicador y la estadística (mean, std, q05, q50, q95)</span></span>
<span id="cb37-15"><a href="#cb37-15" aria-hidden="true" tabindex="-1"></a>long_df[[<span class="st">'Variable'</span>, <span class="st">'Medida'</span>]] <span class="op">=</span> long_df[<span class="st">'Variable_Medida'</span>].<span class="bu">str</span>.extract(<span class="vs">r'</span><span class="dv">^</span><span class="kw">(</span><span class="dv">.</span><span class="op">*</span><span class="kw">)</span><span class="vs">_</span><span class="kw">(</span><span class="vs">mean</span><span class="cf">|</span><span class="vs">std</span><span class="cf">|</span><span class="vs">q05</span><span class="cf">|</span><span class="vs">q50</span><span class="cf">|</span><span class="vs">q95</span><span class="kw">)</span><span class="dv">$</span><span class="vs">'</span>)</span>
<span id="cb37-16"><a href="#cb37-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-17"><a href="#cb37-17" aria-hidden="true" tabindex="-1"></a><span class="co"># 5. Pivot para tener columnas separadas por medida</span></span>
<span id="cb37-18"><a href="#cb37-18" aria-hidden="true" tabindex="-1"></a>pivot_df <span class="op">=</span> long_df.pivot_table(index<span class="op">=</span>[<span class="st">"Variable"</span>, <span class="st">"Grupo_tamano"</span>], columns<span class="op">=</span><span class="st">"Medida"</span>, values<span class="op">=</span><span class="st">"Valor"</span>).reset_index()</span>
<span id="cb37-19"><a href="#cb37-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-20"><a href="#cb37-20" aria-hidden="true" tabindex="-1"></a><span class="co"># 6. Calcular CV e IQR por grupo e indicador</span></span>
<span id="cb37-21"><a href="#cb37-21" aria-hidden="true" tabindex="-1"></a>pivot_df[<span class="st">'CV'</span>] <span class="op">=</span> pivot_df[<span class="st">'std'</span>] <span class="op">/</span> pivot_df[<span class="st">'mean'</span>]</span>
<span id="cb37-22"><a href="#cb37-22" aria-hidden="true" tabindex="-1"></a>pivot_df[<span class="st">'IQR'</span>] <span class="op">=</span> pivot_df[<span class="st">'q95'</span>] <span class="op">-</span> pivot_df[<span class="st">'q05'</span>]</span>
<span id="cb37-23"><a href="#cb37-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-24"><a href="#cb37-24" aria-hidden="true" tabindex="-1"></a><span class="co"># 7. Clasificación del CV</span></span>
<span id="cb37-25"><a href="#cb37-25" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> clasificar_cv(cv):</span>
<span id="cb37-26"><a href="#cb37-26" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> pd.isna(cv):</span>
<span id="cb37-27"><a href="#cb37-27" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="st">"Indefinido"</span></span>
<span id="cb37-28"><a href="#cb37-28" aria-hidden="true" tabindex="-1"></a>    <span class="cf">elif</span> cv <span class="op">&lt;</span> <span class="fl">0.5</span>:</span>
<span id="cb37-29"><a href="#cb37-29" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="st">"Bajo"</span></span>
<span id="cb37-30"><a href="#cb37-30" aria-hidden="true" tabindex="-1"></a>    <span class="cf">elif</span> cv <span class="op">&lt;</span> <span class="fl">1.0</span>:</span>
<span id="cb37-31"><a href="#cb37-31" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="st">"Alto"</span></span>
<span id="cb37-32"><a href="#cb37-32" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb37-33"><a href="#cb37-33" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="st">"Muy alto"</span></span>
<span id="cb37-34"><a href="#cb37-34" aria-hidden="true" tabindex="-1"></a>pivot_df[<span class="st">'CV_categoria'</span>] <span class="op">=</span> pivot_df[<span class="st">'CV'</span>].<span class="bu">apply</span>(clasificar_cv)</span>
<span id="cb37-35"><a href="#cb37-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-36"><a href="#cb37-36" aria-hidden="true" tabindex="-1"></a><span class="co"># Clasificación del IQR con cuantiles empíricos</span></span>
<span id="cb37-37"><a href="#cb37-37" aria-hidden="true" tabindex="-1"></a>q1_iqr <span class="op">=</span> pivot_df[<span class="st">'IQR'</span>].quantile(<span class="fl">0.33</span>)</span>
<span id="cb37-38"><a href="#cb37-38" aria-hidden="true" tabindex="-1"></a>q2_iqr <span class="op">=</span> pivot_df[<span class="st">'IQR'</span>].quantile(<span class="fl">0.66</span>)</span>
<span id="cb37-39"><a href="#cb37-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-40"><a href="#cb37-40" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> clasificar_iqr_empirico(iqr):</span>
<span id="cb37-41"><a href="#cb37-41" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> pd.isna(iqr):</span>
<span id="cb37-42"><a href="#cb37-42" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="st">"Indefinido"</span></span>
<span id="cb37-43"><a href="#cb37-43" aria-hidden="true" tabindex="-1"></a>    <span class="cf">elif</span> iqr <span class="op">&lt;</span> q1_iqr:</span>
<span id="cb37-44"><a href="#cb37-44" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="st">"Bajo"</span></span>
<span id="cb37-45"><a href="#cb37-45" aria-hidden="true" tabindex="-1"></a>    <span class="cf">elif</span> iqr <span class="op">&lt;</span> q2_iqr:</span>
<span id="cb37-46"><a href="#cb37-46" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="st">"Moderado"</span></span>
<span id="cb37-47"><a href="#cb37-47" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb37-48"><a href="#cb37-48" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="st">"Muy alto"</span></span>
<span id="cb37-49"><a href="#cb37-49" aria-hidden="true" tabindex="-1"></a>pivot_df[<span class="st">'IQR_categoria'</span>] <span class="op">=</span> pivot_df[<span class="st">'IQR'</span>].<span class="bu">apply</span>(clasificar_iqr_empirico)</span>
<span id="cb37-50"><a href="#cb37-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-51"><a href="#cb37-51" aria-hidden="true" tabindex="-1"></a><span class="co"># 8. Añadir valor p desde resultados_significativos</span></span>
<span id="cb37-52"><a href="#cb37-52" aria-hidden="true" tabindex="-1"></a><span class="co"># pivot_df = pivot_df.merge(</span></span>
<span id="cb37-53"><a href="#cb37-53" aria-hidden="true" tabindex="-1"></a><span class="co">#    resultados_significativos[['Variable', 'p_Kruskal_Wallis']],</span></span>
<span id="cb37-54"><a href="#cb37-54" aria-hidden="true" tabindex="-1"></a><span class="co">#    on='Variable',</span></span>
<span id="cb37-55"><a href="#cb37-55" aria-hidden="true" tabindex="-1"></a><span class="co">#    how='left'</span></span>
<span id="cb37-56"><a href="#cb37-56" aria-hidden="true" tabindex="-1"></a><span class="co">#)</span></span>
<span id="cb37-57"><a href="#cb37-57" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-58"><a href="#cb37-58" aria-hidden="true" tabindex="-1"></a><span class="co"># 9. Interpretación de estabilidad y recomendación</span></span>
<span id="cb37-59"><a href="#cb37-59" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> interpretar_fila(row):</span>
<span id="cb37-60"><a href="#cb37-60" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> row[<span class="st">'CV_categoria'</span>] <span class="op">==</span> <span class="st">"Bajo"</span> <span class="kw">and</span> row[<span class="st">'IQR_categoria'</span>] <span class="op">==</span> <span class="st">"Bajo"</span>:</span>
<span id="cb37-61"><a href="#cb37-61" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="st">"Estable"</span>, <span class="st">"Ninguna"</span></span>
<span id="cb37-62"><a href="#cb37-62" aria-hidden="true" tabindex="-1"></a>    <span class="cf">elif</span> row[<span class="st">'CV_categoria'</span>] <span class="op">==</span> <span class="st">"Muy alto"</span> <span class="kw">or</span> row[<span class="st">'IQR_categoria'</span>] <span class="op">==</span> <span class="st">"Muy alto"</span>:</span>
<span id="cb37-63"><a href="#cb37-63" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="st">"Alta volatilidad"</span>, <span class="st">"Aplicar corrección o análisis específico"</span></span>
<span id="cb37-64"><a href="#cb37-64" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb37-65"><a href="#cb37-65" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="st">"Volatilidad moderada"</span>, <span class="st">"Revisar según relevancia"</span></span>
<span id="cb37-66"><a href="#cb37-66" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-67"><a href="#cb37-67" aria-hidden="true" tabindex="-1"></a>pivot_df[[<span class="st">'Interpretación'</span>, <span class="st">'Recomendación'</span>]] <span class="op">=</span> pivot_df.<span class="bu">apply</span>(<span class="kw">lambda</span> row: pd.Series(interpretar_fila(row)), axis<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb37-68"><a href="#cb37-68" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-69"><a href="#cb37-69" aria-hidden="true" tabindex="-1"></a><span class="co"># 10. Tabla 1: Diagnóstico por variable y grupo de tamaño</span></span>
<span id="cb37-70"><a href="#cb37-70" aria-hidden="true" tabindex="-1"></a>tabla_diagnostico_detallado <span class="op">=</span> pivot_df[[</span>
<span id="cb37-71"><a href="#cb37-71" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Variable'</span>, <span class="st">'Grupo_tamano'</span>, <span class="st">'mean'</span>,<span class="st">'CV'</span>, <span class="st">'CV_categoria'</span>, <span class="st">'IQR'</span>, <span class="st">'IQR_categoria'</span>,</span>
<span id="cb37-72"><a href="#cb37-72" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Interpretación'</span>, <span class="st">'Recomendación'</span></span>
<span id="cb37-73"><a href="#cb37-73" aria-hidden="true" tabindex="-1"></a>]]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="12b9355c-7d72-428a-a60a-22520d799a26" class="cell" data-execution_count="38">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>display(tabla_diagnostico_detallado)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th">Medida</th>
<th data-quarto-table-cell-role="th">Variable</th>
<th data-quarto-table-cell-role="th">Grupo_tamano</th>
<th data-quarto-table-cell-role="th">mean</th>
<th data-quarto-table-cell-role="th">CV</th>
<th data-quarto-table-cell-role="th">CV_categoria</th>
<th data-quarto-table-cell-role="th">IQR</th>
<th data-quarto-table-cell-role="th">IQR_categoria</th>
<th data-quarto-table-cell-role="th">Interpretación</th>
<th data-quarto-table-cell-role="th">Recomendación</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>IDV_sec</td>
<td>Grande</td>
<td>0.07</td>
<td>1.06</td>
<td>Muy alto</td>
<td>0.17</td>
<td>Bajo</td>
<td>Alta volatilidad</td>
<td>Aplicar corrección o análisis específico</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>IDV_sec</td>
<td>Mediano</td>
<td>0.11</td>
<td>0.77</td>
<td>Alto</td>
<td>0.30</td>
<td>Bajo</td>
<td>Volatilidad moderada</td>
<td>Revisar según relevancia</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>IDV_sec</td>
<td>Pequeño</td>
<td>0.16</td>
<td>0.76</td>
<td>Alto</td>
<td>0.39</td>
<td>Bajo</td>
<td>Volatilidad moderada</td>
<td>Revisar según relevancia</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>IDV_ter</td>
<td>Grande</td>
<td>0.42</td>
<td>1.27</td>
<td>Muy alto</td>
<td>1.42</td>
<td>Bajo</td>
<td>Alta volatilidad</td>
<td>Aplicar corrección o análisis específico</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>IDV_ter</td>
<td>Mediano</td>
<td>0.36</td>
<td>0.65</td>
<td>Alto</td>
<td>0.81</td>
<td>Bajo</td>
<td>Volatilidad moderada</td>
<td>Revisar según relevancia</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">76</td>
<td>homicidios</td>
<td>Mediano</td>
<td>50.74</td>
<td>0.87</td>
<td>Alto</td>
<td>141.17</td>
<td>Muy alto</td>
<td>Alta volatilidad</td>
<td>Aplicar corrección o análisis específico</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">77</td>
<td>homicidios</td>
<td>Pequeño</td>
<td>49.33</td>
<td>1.01</td>
<td>Muy alto</td>
<td>161.97</td>
<td>Muy alto</td>
<td>Alta volatilidad</td>
<td>Aplicar corrección o análisis específico</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">78</td>
<td>vinculacion_nna</td>
<td>Grande</td>
<td>0.46</td>
<td>2.64</td>
<td>Muy alto</td>
<td>3.13</td>
<td>Bajo</td>
<td>Alta volatilidad</td>
<td>Aplicar corrección o análisis específico</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">79</td>
<td>vinculacion_nna</td>
<td>Mediano</td>
<td>3.22</td>
<td>1.89</td>
<td>Muy alto</td>
<td>14.15</td>
<td>Moderado</td>
<td>Alta volatilidad</td>
<td>Aplicar corrección o análisis específico</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">80</td>
<td>vinculacion_nna</td>
<td>Pequeño</td>
<td>2.68</td>
<td>3.45</td>
<td>Muy alto</td>
<td>23.12</td>
<td>Moderado</td>
<td>Alta volatilidad</td>
<td>Aplicar corrección o análisis específico</td>
</tr>
</tbody>
</table>

<p>81 rows × 9 columns</p>
</div>
</div>
</div>
</section>
<section id="análisis-cualitativo-con-apoyo-de-chatgpt" class="level3">
<h3 class="anchored" data-anchor-id="análisis-cualitativo-con-apoyo-de-chatgpt">4. <strong>Análisis cualitativo con apoyo de ChatGPT</strong>:</h3>
<p>Se procede a realizar un <strong>análisis cualitativo asistido con ChatGPT Plus</strong> sobre los indicadores que previamente habían mostrado <strong>tasas más altas en municipios pequeños</strong> (según la mediana y/o el percentil 90).</p>
<p>Este análisis se enfocó en interpretar la combinación de tres medidas por grupo de tamaño poblacional: - <strong>Coeficiente de variación (CV)</strong>: mide la variabilidad relativa respecto a la media. - <strong>Rango intercuartílico (IQR)</strong>: mide la dispersión entre los percentiles 5 y 95, siendo menos sensible a valores extremos. - <strong>Media</strong>: se incluyó para verificar si la tasa promedio es sustancialmente baja, lo cual puede inflar el CV de forma artificial.</p>
<p>El objetivo fue diagnosticar, caso por caso, <strong>si la diferencia observada en municipios pequeños es una señal real o una distorsión estadística derivada del bajo tamaño poblacional</strong> (efecto del denominador), y si por tanto se requiere: - aplicar correcciones estadísticas (e.g., medias móviles, winsorización), - o bien mantener el indicador sin ajuste adicional.</p>
<p>Este paso complementó el análisis cuantitativo previo y permitió <strong>definir que 18 de los 27 indicadores priorizados por mostrar tasas más altas en municipios pequeños requieren ajustes (medias moviles trianuales)</strong>. Es decir, se concluye que, 18 de las 40 tasas requieren ajustes.</p>
<div id="021175be-14bf-431e-8d7b-bd0909e049be" class="cell" data-execution_count="43">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="co">### Tabla en formato para analisis manual y cualitativo</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a><span class="co"># 1. Unir descripción desde diccionario_df</span></span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>tabla_diagnostico_detallado <span class="op">=</span> tabla_diagnostico_detallado.merge(</span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a>    diccionario_df[[<span class="st">"var_id"</span>, <span class="st">"variable"</span>]],</span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a>    left_on<span class="op">=</span><span class="st">"Variable"</span>,</span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a>    right_on<span class="op">=</span><span class="st">"var_id"</span>,</span>
<span id="cb39-7"><a href="#cb39-7" aria-hidden="true" tabindex="-1"></a>    how<span class="op">=</span><span class="st">"left"</span></span>
<span id="cb39-8"><a href="#cb39-8" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb39-9"><a href="#cb39-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-10"><a href="#cb39-10" aria-hidden="true" tabindex="-1"></a><span class="co"># 2. Renombrar columna 'variable' a 'Nombre' y reordenar columnas</span></span>
<span id="cb39-11"><a href="#cb39-11" aria-hidden="true" tabindex="-1"></a>tabla_diagnostico_detallado <span class="op">=</span> tabla_diagnostico_detallado.rename(columns<span class="op">=</span>{<span class="st">"variable"</span>: <span class="st">"Nombre"</span>})</span>
<span id="cb39-12"><a href="#cb39-12" aria-hidden="true" tabindex="-1"></a>cols <span class="op">=</span> [<span class="st">'Variable'</span>, <span class="st">'Nombre'</span>, <span class="st">'Grupo_tamano'</span>, <span class="st">'mean'</span>,<span class="st">'CV'</span>, <span class="st">'CV_categoria'</span>, <span class="st">'IQR'</span>, <span class="st">'IQR_categoria'</span>]</span>
<span id="cb39-13"><a href="#cb39-13" aria-hidden="true" tabindex="-1"></a>tabla_diagnostico_detallado_2 <span class="op">=</span> tabla_diagnostico_detallado[cols]</span>
<span id="cb39-14"><a href="#cb39-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-15"><a href="#cb39-15" aria-hidden="true" tabindex="-1"></a><span class="co"># 3. Exportar a Excel</span></span>
<span id="cb39-16"><a href="#cb39-16" aria-hidden="true" tabindex="-1"></a>output_path <span class="op">=</span> <span class="vs">r"C:</span><span class="er">\</span><span class="vs">Users</span><span class="er">\</span><span class="vs">ylondono</span><span class="er">\</span><span class="vs">Proantioquia</span><span class="er">\</span><span class="vs">Proantioquia Team Site - ACV</span><span class="er">\</span><span class="vs">PRODUCTOS</span><span class="er">\</span><span class="vs">EJERCICIO CLUSTERIZACIÓN MUNICIPAL ANTIOQUIA</span><span class="dv">\D</span><span class="vs">ATOS</span><span class="dv">\B</span><span class="vs">ASES HOMOGENEIZADAS</span><span class="er">\</span><span class="vs">Final_Data</span><span class="ch">\202</span><span class="vs">50612_Diagnóstico_CV_IQR</span><span class="dv">.</span><span class="vs">xlsx"</span></span>
<span id="cb39-17"><a href="#cb39-17" aria-hidden="true" tabindex="-1"></a>tabla_diagnostico_detallado_2.to_excel(output_path, index<span class="op">=</span><span class="va">False</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="aplicación-de-medias-móviles-a-otros-indicadores-epidemiológicos-sensibles" class="level3">
<h3 class="anchored" data-anchor-id="aplicación-de-medias-móviles-a-otros-indicadores-epidemiológicos-sensibles">5. Aplicación de medias móviles a otros indicadores epidemiológicos sensibles</h3>
<p>Dado que algunos indicadores presentan una alta susceptibilidad a la volatilidad estadística en municipios con baja población (ya sea por la baja frecuencia de eventos, la naturaleza epidémica de los fenómenos o el tamaño reducido de las poblaciones en riesgo), se optó por aplicar <strong>medias móviles trianuales</strong> para suavizar las tasas y mejorar su confiabilidad analítica.</p>
<p>Estos indicadores fueron:</p>
<ul>
<li>Tasa de casos de dengue por cada cien mil habitantes</li>
<li>Tasa de mortalidad por EDA en menores de 5 años</li>
<li>Tasa de fecundidad en adolescentes (15–19 años)</li>
<li>Tasa de fecundidad en niñas (10–14 años)</li>
<li>Tasa de mortalidad por IRA en menores de 5 años</li>
<li>Tasa de casos de leishmaniasis en zonas rurales</li>
<li>Tasa de casos de malaria</li>
<li>Tasa de mortalidad por desnutrición en menores de 5 años</li>
</ul>
<p>La media móvil suaviza valores atípicos inducidos por denominadores pequeños o brotes puntuales, evitando interpretaciones sesgadas y favoreciendo decisiones más robustas en el análisis multivariado o en productos públicos.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>