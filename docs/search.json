[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Pulso Social – Antioquia",
    "section": "",
    "text": "Bienvenido/a al sitio de resultados de la réplica metodológica para Antioquia.\n\nMetodología. Resumen del pipeline (datos → estandarización → PCA → clustering).\nAntioquia. Panel con fichas y comparativos.\nMúltiples Colombias. Explicación de la tipología y visualizaciones."
  },
  {
    "objectID": "result_idx1.html",
    "href": "result_idx1.html",
    "title": "Resultados de idx_1",
    "section": "",
    "text": "Esta página presenta los principales outputs generados por la función reduc_dim para cada índice temático del análisis regional de Antioquia.\n\n\n\n# Ejemplo de inclusión de imágenes generadas por reduc_dim\n# Ajusta los nombres de los archivos según los outputs reales\nknitr::include_graphics(\"03_Outputs/Sub_Vulnerable/idx1_servicio_radar_PC1.png\")\n\n\n\n\n\n\n\nknitr::include_graphics(\"03_Outputs/Sub_Vulnerable/idx1_servicio_radar_PC2.png\")\n\n\n\n\n\n\n\n# Repite para otros índices y componentes\n\n\n\n\nPuedes descargar los archivos Excel con los resultados de cargas y variables principales:\n\nidx1_servicio_loadings_y_tops.xlsx\nidx2_Adultez_loadings_y_tops.xlsx\nidx3_climatico_loadings_y_tops.xlsx\n\nAgrega más archivos según los outputs generados por tu script.\n\n\nLos gráficos y tablas aquí presentados corresponden a los resultados de la reducción de dimensionalidad y análisis de componentes principales para cada subdimensión temática."
  },
  {
    "objectID": "result_idx1.html#imágenes-de-componentes-principales-pca",
    "href": "result_idx1.html#imágenes-de-componentes-principales-pca",
    "title": "Resultados de idx_1",
    "section": "",
    "text": "# Ejemplo de inclusión de imágenes generadas por reduc_dim\n# Ajusta los nombres de los archivos según los outputs reales\nknitr::include_graphics(\"03_Outputs/Sub_Vulnerable/idx1_servicio_radar_PC1.png\")\n\n\n\n\n\n\n\nknitr::include_graphics(\"03_Outputs/Sub_Vulnerable/idx1_servicio_radar_PC2.png\")\n\n\n\n\n\n\n\n# Repite para otros índices y componentes"
  },
  {
    "objectID": "result_idx1.html#archivos-excel-de-cargas-y-variables-principales",
    "href": "result_idx1.html#archivos-excel-de-cargas-y-variables-principales",
    "title": "Resultados de idx_1",
    "section": "",
    "text": "Puedes descargar los archivos Excel con los resultados de cargas y variables principales:\n\nidx1_servicio_loadings_y_tops.xlsx\nidx2_Adultez_loadings_y_tops.xlsx\nidx3_climatico_loadings_y_tops.xlsx\n\nAgrega más archivos según los outputs generados por tu script.\n\n\nLos gráficos y tablas aquí presentados corresponden a los resultados de la reducción de dimensionalidad y análisis de componentes principales para cada subdimensión temática."
  },
  {
    "objectID": "metodologia.html",
    "href": "metodologia.html",
    "title": "Metodología",
    "section": "",
    "text": "Data/: descarga, limpieza y estandarización por fuente.\nDescriptives/: estadísticas y figuras por tema/dimensión.\nAnalysis/01_build_indices: PCA (orderNorm + centrar/escalar; retención por varianza).\nAnalysis/02_cluster: distancias euclídeas, método del codo, dendrograma y mapas.\nAnalysis/03_antioquia: fichas y comparativos para el departamento."
  },
  {
    "objectID": "metodologia.html#pipeline-general",
    "href": "metodologia.html#pipeline-general",
    "title": "Metodología",
    "section": "",
    "text": "Data/: descarga, limpieza y estandarización por fuente.\nDescriptives/: estadísticas y figuras por tema/dimensión.\nAnalysis/01_build_indices: PCA (orderNorm + centrar/escalar; retención por varianza).\nAnalysis/02_cluster: distancias euclídeas, método del codo, dendrograma y mapas.\nAnalysis/03_antioquia: fichas y comparativos para el departamento."
  },
  {
    "objectID": "metodologia.html#estandarización-y-pca",
    "href": "metodologia.html#estandarización-y-pca",
    "title": "Metodología",
    "section": "Estandarización y PCA",
    "text": "Estandarización y PCA\n\nrecipes::step_orderNorm() → step_center() → step_scale().\nReporte de varianza explicada y loadings por dimensión."
  },
  {
    "objectID": "metodologia.html#clustering",
    "href": "metodologia.html#clustering",
    "title": "Metodología",
    "section": "Clustering",
    "text": "Clustering\n\nDistancia euclídea.\nk según método del codo; cluster jerárquico (enlace Ward)."
  },
  {
    "objectID": "multiples_colombias.html",
    "href": "multiples_colombias.html",
    "title": "Múltiples Colombias",
    "section": "",
    "text": "Descripción de la tipología y sus principales brechas/fortalezas por grupo. Visualizaciones de apoyo (dendrograma, mapa y radar de dimensiones)."
  },
  {
    "objectID": "resultados_idx1_servicio.html",
    "href": "resultados_idx1_servicio.html",
    "title": "Resultados IDX 1: Acceso a servicio de agua potable y saneamiento",
    "section": "",
    "text": "Este reporte presenta los principales outputs generados por la función reduc_dim para el primer índice temático del análisis regional de Antioquia.\n\n\nAquí se encuentra una revisión de las estadísticas descriptivas de las variables que componen el componente:\n\n\nCode\nlibrary(readxl)\nlibrary(knitr)\nlibrary(magrittr) # &lt;- Esto habilita %&gt;%\n\n# Ruta al archivo exportado por AUX_Functions\nruta_excel &lt;- \"all/01_TablasDescriptivas/idx1_servicio_summary_labels.xlsx\"\n\n# Leer el archivo\ntabla_resumen &lt;- read_xlsx(ruta_excel)\n\n# Mostrar la tabla con etiquetas legibles y tres decimales\ntabla_resumen %&gt;%\n  dplyr::select(Etiqueta, N, Media, SD, Min, Max) %&gt;%\n  dplyr::mutate(\n    Media = round(Media, 3),\n    SD = round(SD, 3),\n    Min = round(Min, 3),\n    Max = round(Max, 3)\n  ) %&gt;%\n  kable(caption = \"Resumen de variables numéricas válidas\")\n\n\n\nResumen de variables numéricas válidas\n\n\nEtiqueta\nN\nMedia\nSD\nMin\nMax\n\n\n\n\nIRCA (consumo humano)\n123\n-5.526\n10.984\n-90.2\n0\n\n\nIRCA urbano\n123\n-2.375\n9.262\n-90.2\n0\n\n\nIRCA rural\n73\n-29.610\n31.298\n-100.0\n0\n\n\n\n\n\n\n\n\nEn esta sección se presentan los principales componentes extraídos mediante análisis de componentes principales (PCA). Se muestran las variables más relevantes que conforman cada componente, junto con sus respectivas cargas, lo que permite identificar cuáles factores tienen mayor influencia en el índice de acceso a servicios de agua potable y saneamiento.\n\n  \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCode\nknitr::include_graphics(\"all/02_Imagenes/idx1_servicio_map_pcall.png\")\n\n\n\n\n\nMapa combinado de componentes principales\n\n\n\n\n\n\n\n\n\nCode\nknitr::include_graphics(\"all/02_Imagenes/idx1_servicio_results.png\")\n\n\n\n\n\nResultados completos en PNG\n\n\n\n\n\n\n\n\nPuedes descargar el archivo Excel con los resultados de cargas y variables principales:\n\nidx1_servicio_loadings_y_tops.xlsx\n\n\n\nLos gráficos y tablas aquí presentados corresponden a los resultados de la reducción de dimensionalidad y análisis de componentes principales para el índice de acceso a agua potable y saneamiento."
  },
  {
    "objectID": "resultados_idx1_servicio.html#imágenes-radar-de-componentes-principales",
    "href": "resultados_idx1_servicio.html#imágenes-radar-de-componentes-principales",
    "title": "Resultados IDX 1: Acceso a servicio de agua potable y saneamiento",
    "section": "",
    "text": "En esta sección se presentan los principales componentes extraídos mediante análisis de componentes principales (PCA). Se muestran las variables más relevantes que conforman cada componente, junto con sus respectivas cargas, lo que permite identificar cuáles factores tienen mayor influencia en el índice de acceso a servicios de agua potable y saneamiento."
  },
  {
    "objectID": "resultados_idx1_servicio.html#mapas-de-componentes-principales",
    "href": "resultados_idx1_servicio.html#mapas-de-componentes-principales",
    "title": "Resultados IDX 1: Acceso a servicio de agua potable y saneamiento",
    "section": "",
    "text": "Code\nknitr::include_graphics(\"all/02_Imagenes/idx1_servicio_map_pcall.png\")\n\n\n\n\n\nMapa combinado de componentes principales\n\n\n\n\n\n\n\n\n\nCode\nknitr::include_graphics(\"all/02_Imagenes/idx1_servicio_results.png\")\n\n\n\n\n\nResultados completos en PNG"
  },
  {
    "objectID": "resultados_idx1_servicio.html#archivos-excel-de-cargas-y-variables-principales",
    "href": "resultados_idx1_servicio.html#archivos-excel-de-cargas-y-variables-principales",
    "title": "Resultados IDX 1: Acceso a servicio de agua potable y saneamiento",
    "section": "",
    "text": "Puedes descargar el archivo Excel con los resultados de cargas y variables principales:\n\nidx1_servicio_loadings_y_tops.xlsx\n\n\n\nLos gráficos y tablas aquí presentados corresponden a los resultados de la reducción de dimensionalidad y análisis de componentes principales para el índice de acceso a agua potable y saneamiento."
  },
  {
    "objectID": "02_Code/00_Homogeneizacion_Inputs/20250509_Análisis variabilidad de tasas.html",
    "href": "02_Code/00_Homogeneizacion_Inputs/20250509_Análisis variabilidad de tasas.html",
    "title": "Análisis de volatilidad del subset de indicadores tipo tasa",
    "section": "",
    "text": "# Limpiar todas las variables del espacio de trabajo\n%reset -f\n\n\nimport pandas as pd\nimport seaborn as sns\nimport matplotlib.pyplot as plt\n\n\n# Import data\ndata_df = pd.read_stata(r\"C:\\Users\\ylondono\\Proantioquia\\Proantioquia Team Site - ACV\\PRODUCTOS\\EJERCICIO CLUSTERIZACIÓN MUNICIPAL ANTIOQUIA\\DATOS\\BASES HOMOGENEIZADAS\\Final_Data\\20250610_DATA.dta\")\ndisplay(data_df.head())\n\n\n\n\n\n\n\n\nind_mpio\nnvl_label\npercepción_seguridad\ntasa_delitos\nIRV\nVBG\nhomicidios\nvinculacion_nna\nBVG_jovenes\nEDA\n...\nTS_30_59\nTS_15_64\nTS_hombres\nTS_mujeres\nTIS_total\nTIS_15_29\nTIS_30_59\nTIS_15_64\nTIS_hombres\nTIS_mujeres\n\n\n\n\n0\n05001\nMedellín\n.6068024718288\n.0677347394037721\n.18356099\n384.6568797441529\n11.3517573246545\n0\n596.7623059466483\n0\n...\n11.1064134404402\n11.9006597833972\n15.9544047657034\n3.7143125572168\n110.08361\n267.3085\n74.384972\n129.55491\n79.199299\n137.57522\n\n\n1\n05002\nAbejorral\n.8271909756534499\n.0129032258064516\n.19629357\n910.9264215617222\n46.5809577044904\n0\n1692.841117683051\n0\n...\nNA\n7.13877784123358\nNA\n9.84251968503937\n291.12083\n710.73204\n214.36228\n328.38377\n215.4979\n374.01575\n\n\n2\n05004\nAbriaquí\n.9504767291532\n0\n.0996653\n175.9943681802182\n0\n0\n571.4285714285714\n0\n...\nNA\nNA\nNA\nNA\nNA\nNA\nNA\nNA\nNA\nNA\n\n\n3\n05021\nAlejandría\n.8874424773485931\n.0086580086580087\n.10863511\n81.43322475570032\n20.1816347124117\n0\n90.49773755656109\n0\n...\n53.8793103448276\n32.258064516129\n40.9165302782324\nNA\n61.07492\n102.77493\nNA\n32.258064\nNA\n121.55592\n\n\n4\n05030\nAmagá\n.860060582707564\n.0064205457463884\n.12925666\n267.5626905606372\n37.0233246945576\n0\n293.2909690822436\n0\n...\n7.51766651631334\n22.2074172773706\n12.6911606066375\n18.3116645303058\n6.2223882\n26.907036\nNA\n8.8829668\nNA\n12.207776\n\n\n\n\n5 rows × 222 columns\n\n\n\n\n# Exportar data en excel para ver mejor\n#output_path = r\"C:\\Users\\ylondono\\Proantioquia\\Proantioquia Team Site - ACV\\PRODUCTOS\\EJERCICIO CLUSTERIZACIÓN MUNICIPAL ANTIOQUIA\\DATOS\\BASES HOMOGENEIZADAS\\Final_Data\\20250610_DATA.xlsx\"\n#data_df.to_excel(output_path, index=False)\n#print(f\"Archivo exportado correctamente a:\\n{output_path}\")\n\n\n# Importar diccionario\ndiccionario_df = pd.read_excel(\n    r\"C:\\Users\\ylondono\\Proantioquia\\Proantioquia Team Site - ACV\\PRODUCTOS\\EJERCICIO CLUSTERIZACIÓN MUNICIPAL ANTIOQUIA\\DATOS\\BASES HOMOGENEIZADAS\\Final_Data\\20250610_DICCIONARIO.XLSX\"\n)\ndisplay(diccionario_df)\n\n\n\n\n\n\n\n\nvar_id\nvariable\nvar_periodos\nUnidad de medida\nUnidad de medida_descriptiva\nTipo\nSubdimensión\nid_nivel\nFuente\nResponsable homogeneización\nAjuste necesario por varianza\n\n\n\n\n0\npercepción_seguridad\nPorcentaje de jefes(a) de hogar o informantes ...\n2023\nPorcentaje\n0\nContexto\nSeguridad\n0\nEncuesta de Calidad de Vida - Gobernación de A...\nYeison\n0\n\n\n1\ntasa_delitos\nTasa de delitos\n2023\nTasa\n0\nContexto\nSeguridad\n0\nEncuesta de Calidad de Vida - Gobernación de A...\nYeison\n0\n\n\n2\nIRV\nÍndice de Riesgo de Victimización\n2023\nÍndice\n0\nContexto\nSeguridad\n0\nUARIV\nYeison\n0\n\n\n3\nVBG\nIncidencia de VCM VIF VSX por cada 100.000 ha...\n2023\nTasa\n0\nContexto\nSeguridad\n0\nSIVIGILA\nYeison\n0\n\n\n4\nhomicidios\nTasa de homicidios por cada 100 mil habitantes\n2024\nTasa\n0\nContexto\nSeguridad\n0\nSIEDCO\nYeison\n0\n\n\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n\n\n214\nva_primario\nParticipacion por actidad economica del Valor ...\n2023\nPorcentaje\nPorcentaje\n0\nDesarrollo económico\n0\nGobernación de Antioquía\nMiguel\n0\n\n\n215\nVPC_pri\nKilómetros de vías primarias por cada 1000 hab...\n0\nTasa\ncada 1000 habitantes\n0\nDesarrollo económico\n0\nRV CIRCULAR 10 - Gobernación de Antioquia\nMiguel\n0\n\n\n216\nVPC_sec\nKilómetros de vías secundarias por cada 1000 h...\n0\nTasa\ncada 1000 habitantes\n0\nDesarrollo económico\n0\nRV CIRCULAR 10 - Gobernación de Antioquia\nMiguel\n0\n\n\n217\nVPC_ter\nKilómetros de vías terciarias por cada 1000 ha...\n0\nTasa\ncada 1000 habitantes\n0\nDesarrollo económico\n0\nRV CIRCULAR 10 - Gobernación de Antioquia\nMiguel\n0\n\n\n218\nVPC_total\nKilómetros de vías en total por cada 1000 habi...\n0\nTasa\ncada 1000 habitantes\n0\nDesarrollo económico\n0\nRV CIRCULAR 10 - Gobernación de Antioquia\nMiguel\n0\n\n\n\n\n219 rows × 11 columns\n\n\n\n\nlist(data_df.columns)\n\n['ind_mpio',\n 'nvl_label',\n 'percepción_seguridad',\n 'tasa_delitos',\n 'IRV',\n 'VBG',\n 'homicidios',\n 'vinculacion_nna',\n 'BVG_jovenes',\n 'EDA',\n 'mortalidad_desnutrición',\n 'bajo_peso',\n 'desnutrición_aguda',\n 'controles_prenatales',\n 'fecundidad_niñas',\n 'fecundidad_adolescentes',\n 'camas',\n 'IRA',\n 'dengue',\n 'malaria',\n 'leishmaniasis',\n 'agua_rural',\n 'alcantarillado_rural',\n 'agua_urbano',\n 'alcantarillado_urbano',\n 'deficit_cuali',\n 'deficit_cuanti',\n 'hacinamiento_rural',\n 'hacinamiento_urbano',\n 'Población_2023',\n 'IRCC',\n 'afectados_dn',\n 'perdida_ca',\n 'VBG_jovenes',\n 'dens_emp',\n 'fin_banc_pc',\n 'fin_microcr_pc',\n 'internet',\n 'ss_pension_hombres',\n 'ss_pension_mujeres',\n 'ss_salud_hombres',\n 'ss_salud_mujeres',\n 'tnat_emp',\n 'va_pc',\n 'va_primario',\n 'emp_informal',\n 'gini_hog',\n 'gini_lab',\n 'hog_mono_fem',\n 'pbl_camp',\n 'pob_ext',\n 'pob_ipm',\n 'pob_mon',\n 'pob_nbi',\n 'tgp_mujeres',\n 'td_brecha',\n 'ins_alim',\n 'ins_alim_mod',\n 'ins_alim_mod_18',\n 'ins_alim_mod_5',\n 'ins_alim_sev',\n 'ins_alim_sev_18',\n 'ins_alim_sev_5',\n 'pob_ext_hombres',\n 'pob_ext_mujeres',\n 'pob_ipm_hogares',\n 'pob_ipm_hombres',\n 'pob_ipm_mujeres',\n 'pob_mon_hombres',\n 'pob_mon_mujeres',\n 'pob_nbi_hogares',\n 'pob_nbi_hombres',\n 'pob_nbi_mujeres',\n 'td_hombres',\n 'td_mujeres',\n 'ins_alim_5',\n 'ins_alim_18',\n 'clas_cole',\n 'ninis',\n 'tcb_edsup',\n 'tcb_media',\n 'tcb_primaria',\n 'tcb_secundaria',\n 'tcb_transicion',\n 'tdes_media',\n 'tdes_primaria',\n 'tdes_secundaria',\n 'tdes_transicion',\n 'trep_media',\n 'trep_primaria',\n 'trep_secundaria',\n 'trep_transicion',\n 'tti_edsup',\n 'cat_mun',\n 'med_d_mun',\n 'idf',\n 'VPC_pri',\n 'VPC_sec',\n 'VPC_ter',\n 'VPC_total',\n 'IDV_pri',\n 'IDV_sec',\n 'IDV_ter',\n 'IDV_total',\n 'IRCAurbano_dec',\n 'time_urbano_dec',\n 'IRCArural_dec',\n 'time_rural_dec',\n 'IRCAurbano_res',\n 'time_urbano_res',\n 'IRCArural_res',\n 'time_rural_res',\n 'IRCA',\n 'IRCAurbano',\n 'IRCArural',\n 'P_M_Anticonceptivos',\n 'T_B_N',\n 'P_T',\n 'P_H',\n 'P_M',\n 'P_inf_T_0_11',\n 'P_j_T_12_28',\n 'P_ad_T_29_59',\n 'P_v_T_60_85',\n 'P_inf_H_0_11',\n 'P_j_H_12_28',\n 'P_ad_H_29_59',\n 'P_v_H_60_85',\n 'P_inf_M_0_11',\n 'P_j_M_12_28',\n 'P_ad_M_29_59',\n 'P_v_M_60_85',\n 'IDE_T',\n 'IDE_H',\n 'IDE_M',\n 'I_enve_T',\n 'I_enve_H',\n 'I_enve_M',\n 'P_T_r',\n 'P_H_r',\n 'P_M_r',\n 'P_inf_T_0_11_r',\n 'P_j_T_12_28_r',\n 'P_ad_T_29_59_r',\n 'P_v_T_60_85_r',\n 'P_inf_H_0_11_r',\n 'P_j_H_12_28_r',\n 'P_ad_H_29_59_r',\n 'P_v_H_60_85_r',\n 'P_inf_M_0_11_r',\n 'P_j_M_12_28_r',\n 'P_ad_M_29_59_r',\n 'P_v_M_60_85_r',\n 'IDE_T_r',\n 'IDE_H_r',\n 'IDE_M_r',\n 'I_enve_T_r',\n 'I_enve_H_r',\n 'I_enve_M_r',\n 'P_T_c',\n 'P_H_c',\n 'P_M_c',\n 'P_inf_T_0_11_c',\n 'P_j_T_12_28_c',\n 'P_ad_T_29_59_c',\n 'P_v_T_60_85_c',\n 'P_inf_H_0_11_c',\n 'P_j_H_12_28_c',\n 'P_ad_H_29_59_c',\n 'P_v_H_60_85_c',\n 'P_inf_M_0_11_c',\n 'P_j_M_12_28_c',\n 'P_ad_M_29_59_c',\n 'P_v_M_60_85_c',\n 'IDE_T_c',\n 'IDE_H_c',\n 'IDE_M_c',\n 'I_enve_c_T',\n 'I_enve_H_c',\n 'I_enve_M_c',\n 'PR_T',\n 'PR_H',\n 'PR_M',\n 'PR_inf_T_0_11',\n 'PR_j_T_12_28',\n 'PR_ad_T_29_59',\n 'PR_v_T_60_85',\n 'PR_inf_H_0_11',\n 'PR_j_H_12_28',\n 'PR_ad_H_29_59',\n 'PR_v_H_60_85',\n 'PR_inf_M_0_11',\n 'PR_j_M_12_28',\n 'PR_ad_M_29_59',\n 'PR_v_M_60_85',\n 'PU_T',\n 'PU_H',\n 'PU_M',\n 'PU_inf_T_0_11',\n 'PU_j_T_12_28',\n 'PU_ad_T_29_59',\n 'PU_v_T_60_85',\n 'PU_inf_H_0_11',\n 'PU_j_H_12_28',\n 'PU_ad_H_29_59',\n 'PU_v_H_60_85',\n 'PU_inf_M_0_11',\n 'PU_j_M_12_28',\n 'PU_ad_M_29_59',\n 'PU_v_M_60_85',\n 'TS_total',\n 'TS_15_29',\n 'TS_30_59',\n 'TS_15_64',\n 'TS_hombres',\n 'TS_mujeres',\n 'TIS_total',\n 'TIS_15_29',\n 'TIS_30_59',\n 'TIS_15_64',\n 'TIS_hombres',\n 'TIS_mujeres']\n\n\n\n# Ajustes temporales en los datos\n# VBG\n#delete VBG_jovenes\ndata_df.drop(columns=[\"VBG_jovenes\"], inplace=True)\n#rename BVG_jovenes por VBG_jovenes\ndata_df.rename(columns={\"BVG_jovenes\": \"VBG_jovenes\"}, inplace=True)\n\n# rename \"I_enve_c_T” por “I_enve_T_c\"\ndata_df.rename(columns={\"I_enve_c_T\": \"I_enve_T_c\"}, inplace=True)\n\n\n# 2. Verificar que todas las columnas de la base estén definidas en el diccionario\n\n# Conjuntos de nombres\ndicc_vars = set(diccionario_df[\"var_id\"].tolist())\ndata_vars = set(data_df.columns.tolist())\n\n# Variables en data_df que NO están en el diccionario\nvars_sin_dicc = data_vars - dicc_vars\nprint(\"Columnas en data_df que NO están en el diccionario:\")\nprint(sorted(vars_sin_dicc), \"\\n\")\n\n# Variables en el diccionario que NO aparecen en data_df\nvars_sin_data = dicc_vars - data_vars\nprint(\"Indicadores en el diccionario que NO aparecen en data_df:\")\nprint(sorted(vars_sin_data))\n\nColumnas en data_df que NO están en el diccionario:\n['ind_mpio', 'nvl_label'] \n\nIndicadores en el diccionario que NO aparecen en data_df:\n[]\n\n\n\n# 4. Identificar indicadores tipo 'Tasa'\ntasa_vars = (\n    diccionario_df\n    .loc[diccionario_df[\"Unidad de medida\"].str.lower() == \"tasa\", \"var_id\"]\n    .tolist()\n)\n# Mantener sólo los que efectivamente existen\ntasa_vars = [v for v in tasa_vars if v in data_df.columns]\nprint(\"Indicadores de tipo tasa reales:\", tasa_vars)\n\n# 5. Construir subset con municipio, población y tasas\ntasa_data = data_df[[\"ind_mpio\", \"nvl_label\", \"Población_2023\"] + tasa_vars].copy()\ntasa_data[tasa_vars] = tasa_data[tasa_vars].apply(pd.to_numeric, errors='coerce').astype(float)\n# Formato de 2 decimales\npd.options.display.float_format = \"{:.2f}\".format\n\nIndicadores de tipo tasa reales: ['tasa_delitos', 'VBG', 'homicidios', 'vinculacion_nna', 'VBG_jovenes', 'EDA', 'mortalidad_desnutrición', 'desnutrición_aguda', 'fecundidad_niñas', 'fecundidad_adolescentes', 'camas', 'IRA', 'dengue', 'malaria', 'leishmaniasis', 'afectados_dn', 'dens_emp', 'fin_banc_pc', 'fin_microcr_pc', 'IDV_pri', 'IDV_sec', 'IDV_ter', 'IDV_total', 'TIS_15_29', 'TIS_15_64', 'TIS_30_59', 'TIS_hombres', 'TIS_mujeres', 'TIS_total', 'TS_15_29', 'TS_15_64', 'TS_30_59', 'TS_hombres', 'TS_mujeres', 'TS_total', 'va_pc', 'VPC_pri', 'VPC_sec', 'VPC_ter', 'VPC_total']\n\n\n\nprint(\"Subset con municipio, población y tasas:\")\ndisplay(tasa_data.head())\n\nSubset con municipio, población y tasas:\n\n\n\n\n\n\n\n\n\nind_mpio\nnvl_label\nPoblación_2023\ntasa_delitos\nVBG\nhomicidios\nvinculacion_nna\nVBG_jovenes\nEDA\nmortalidad_desnutrición\n...\nTS_15_64\nTS_30_59\nTS_hombres\nTS_mujeres\nTS_total\nva_pc\nVPC_pri\nVPC_sec\nVPC_ter\nVPC_total\n\n\n\n\n0\n05001\nMedellín\n2595300\n0.07\n384.66\n11.35\n0.00\n596.76\n0.00\n2.90\n...\n11.90\n11.11\n15.95\n3.71\n9.48\n21625.33\n0.05\n0.01\n0.00\n0.06\n\n\n1\n05002\nAbejorral\n21297\n0.01\n910.93\n46.58\n0.00\n1692.84\n0.00\n0.00\n...\n7.14\nNaN\nNaN\n9.84\n4.70\n12376.67\n0.43\n4.80\n8.52\n13.75\n\n\n2\n05004\nAbriaquí\n2841\n0.00\n175.99\n0.00\n0.00\n571.43\n0.00\n0.00\n...\nNaN\nNaN\nNaN\nNaN\nNaN\n11781.74\n0.00\n8.68\n19.47\n28.15\n\n\n3\n05021\nAlejandría\n4912\n0.01\n81.43\n20.18\n0.00\n90.50\n0.00\n0.00\n...\n32.26\n53.88\n40.92\nNaN\n20.36\n9707.52\n0.00\n3.88\n9.83\n13.71\n\n\n4\n05030\nAmagá\n32142\n0.01\n267.56\n37.02\n0.00\n293.29\n0.00\n0.00\n...\n22.21\n7.52\n12.69\n18.31\n15.56\n17003.95\n0.71\n0.41\n2.47\n3.59\n\n\n\n\n5 rows × 43 columns\n\n\n\n\n#Verificar que todas las variables del subset tasa_data sean númericas (excepto por ind_mpio y nvl_label)\n# Seleccionar todas las columnas excepto las no numéricas deseadas\ncols_a_verificar = [col for col in tasa_data.columns if col not in [\"ind_mpio\", \"nvl_label\"]]\n\n# Verificar tipos de datos\ntipos = tasa_data[cols_a_verificar].dtypes\n\n# Filtrar columnas que NO son numéricas\nno_numericas = tipos[~tipos.apply(pd.api.types.is_numeric_dtype)]\n\n# Mostrar resultado\nprint(\"Columnas no numéricas en el subset:\")\nprint(no_numericas)\n\n# Convierte todas a númericas\n# Identificar columnas que no son numéricas\nno_numericas = tipos[~tipos.apply(pd.api.types.is_numeric_dtype)].index.tolist()\n# Convertirlas a numéricas (coercion convierte errores a NaN)\ntasa_data[no_numericas] = tasa_data[no_numericas].apply(pd.to_numeric, errors=\"coerce\")\n\nColumnas no numéricas en el subset:\nPoblación_2023    object\ndtype: object\n\n\n\n# 7. Definir grupos de tamaño basados en cuantiles de población\nq1, q2 = tasa_data['Población_2023'].quantile([0.33, 0.66])\nprint(f\"Umbrales de población (terciles): Pequeño &lt; {q1:.0f}, Mediano &lt; {q2:.0f}, Grande ≥ {q2:.0f}\")\n\ndef clasificar_tamano(p):\n    if p &lt; q1:\n        return \"Pequeño\"\n    elif p &lt; q2:\n        return \"Mediano\"\n    else:\n        return \"Grande\"\n\ntasa_data[\"Grupo_tamano\"] = tasa_data[\"Población_2023\"].apply(clasificar_tamano)\nprint(\"Conteo por Grupo_tamano:\")\nprint(tasa_data[\"Grupo_tamano\"].value_counts())\n\nUmbrales de población (terciles): Pequeño &lt; 10721, Mediano &lt; 25953, Grande ≥ 25953\nConteo por Grupo_tamano:\nGrupo_tamano\nGrande     43\nMediano    41\nPequeño    41\nName: count, dtype: int64\n\n\n\n# 7. Agrupar municipios por población usando K-Means (3 clusters)\nfrom sklearn.cluster import KMeans\n# Preparar datos de población\ndemographics = tasa_data[\"Población_2023\"].values.reshape(-1, 1)\n# Ajustar modelo K-Means con 3 clusters\nkmeans = KMeans(n_clusters=3, random_state=42).fit(demographics)\nlabels = kmeans.labels_\n# Obtener centroides y mapear a categorías\ncentroids = kmeans.cluster_centers_.flatten()\norder = centroids.argsort()\nlabel_map = {order[0]: \"Pequeño\", order[1]: \"Mediano\", order[2]: \"Grande\"}\n# Asignar categoría según label\ntasa_data[\"Grupo_tamano\"] = [label_map[label] for label in labels]\nprint(\"Centroides de población:\", centroids)\nprint(\"Conteo por Grupo_tamano:\")\nprint(tasa_data[\"Grupo_tamano\"].value_counts())\n\nCentroides de población: [ 368411.66666667   26015.08264463 2595300.        ]\nConteo por Grupo_tamano:\nGrupo_tamano\nPequeño    121\nMediano      3\nGrande       1\nName: count, dtype: int64\n\n\nC:\\Users\\ylondono\\AppData\\Local\\anaconda3\\Lib\\site-packages\\sklearn\\cluster\\_kmeans.py:1429: UserWarning: KMeans is known to have a memory leak on Windows with MKL, when there are less chunks than available threads. You can avoid it by setting the environment variable OMP_NUM_THREADS=1.\n  warnings.warn(\n\n\n\nimport os\nos.environ[\"OMP_NUM_THREADS\"] = \"1\"\n\n\n# 7. Agrupar municipios por población usando K-Means sobre log(Población)\nimport numpy as np\nfrom sklearn.cluster import KMeans\n# Tomar logaritmo de la población para mitigar outliers\ntasa_data['log_pob'] = np.log1p(tasa_data['Población_2023'])\n# Preparar datos para clustering\ndemographics_log = tasa_data['log_pob'].values.reshape(-1,1)\n# Ajustar modelo K-Means con 3 clusters\nkmeans = KMeans(n_clusters=3, random_state=42).fit(demographics_log)\nlabels = kmeans.labels_\n# Calcular centroides en escala original\ncentroids_log = kmeans.cluster_centers_.flatten()\ncentroids_orig = np.expm1(centroids_log)\n# Ordenar clusters por población promedio\norder = np.argsort(centroids_log)\nlabel_map = {order[0]: 'Pequeño', order[1]: 'Mediano', order[2]: 'Grande'}\n# Asignar etiqueta de grupo según cluster\ntasa_data['Grupo_tamano'] = [label_map[l] for l in labels]\nprint('Centroides (log-scale):', centroids_log)\nprint('Centroides (población):', centroids_orig.astype(int))\nprint('Conteo por Grupo_tamano:')\nprint(tasa_data['Grupo_tamano'].value_counts())\n# Eliminar columna temporal\ndel tasa_data['log_pob']\n\nCentroides (log-scale): [11.67377994 10.09541272  8.92495079]\nCentroides (población): [117450  24230   7516]\nConteo por Grupo_tamano:\nGrupo_tamano\nMediano    55\nPequeño    50\nGrande     20\nName: count, dtype: int64\n\n\nC:\\Users\\ylondono\\AppData\\Local\\anaconda3\\Lib\\site-packages\\sklearn\\cluster\\_kmeans.py:1429: UserWarning: KMeans is known to have a memory leak on Windows with MKL, when there are less chunks than available threads. You can avoid it by setting the environment variable OMP_NUM_THREADS=1.\n  warnings.warn(\n\n\nLuego de haber definido el subconjunto de variables tipo tasa, se desarrolló un proceso metodológico orientado a evaluar la estabilidad y validez de estas tasas según el tamaño poblacional municipal. El objetivo fue identificar si las tasas observadas en municipios pequeños son confiables o si podrían estar distorsionadas por el bajo denominador. Los pasos seguidos fueron los siguientes:\n\nCálculo de estadísticas descriptivas por grupo de tamaño poblacional: se estimaron la media, desviación estándar, percentil 5 (q05), mediana (q50) y percentil 95 (q95) para cada indicador, en cada grupo (Pequeño, Mediano y Grande). Además, se aplicó la prueba de Kruskal-Wallis para identificar indicadores cuyas distribuciones diferían significativamente entre grupos de tamaño poblacional. Sin embargo, se decidió enfocar el análisis de estabilidad únicamente en aquellos indicadores que mostraban tasas más altas en municipios pequeños (paso 2), independientemente del valor p del test. Esto se justificó por el objetivo principal del estudio: identificar potenciales distorsiones inducidas por el bajo denominador poblacional, más que diferencias estadísticas globales entre grupos. La información del test fue útil como insumo adicional, pero no constituyó el criterio principal de priorización para el análisis cualitativo.\nEvaluación de patrones de magnitud: se compararon las medianas y p95 entre grupos para identificar si los municipios pequeños tienden a tener tasas más altas. Se generó una tabla de diagnóstico categorizando los indicadores según este patrón.\nAnálisis de estabilidad estadística: para los indicadores que mostraban tasas más altas en municipios pequeños, se calcularon:\n\nel coeficiente de variación (CV): como medida de variabilidad relativa,\nel rango intercuartílico (IQR): como medida de dispersión robusta.\nClasificación cualitativa: se asignaron categorías empíricas (“Bajo”, “Moderado”, “Muy alto”) al CV e IQR, y se combinó esta información para construir una tabla de diagnóstico por grupo, evaluando si la volatilidad estaba presente solo en municipios pequeños o en todos los grupos.\n\nAnálisis cualitativo con apoyo de ChatGPT: se utilizó la combinación de CV, IQR y media para analizar cada indicador, con el fin de definir si las tasas elevadas en municipios pequeños reflejan una distorsión o una señal real del fenómeno. Recomendación metodológica: para cada indicador se definió si requiere ajustes (como suavizamiento o winsorización) o puede ser utilizado tal cual en el análisis multivariado o en productos públicos. Adicionalmente se dicidió la aplicación de medias móviles a otros indicadores epidemiológicos sensibles que no fueron priorizados en el análisis estadístico\n\n\n1. Cálculo de estadísticas descriptivas por grupo de tamaño poblacional\n\n# Agrupar por grupo de tamaño y calcular medias y medianas de cada tasa\nmean_by_group = tasa_data.groupby(\"Grupo_tamano\")[tasa_vars].mean().add_suffix(\"_mean\")\nmedian_by_group = tasa_data.groupby(\"Grupo_tamano\")[tasa_vars].median().add_suffix(\"_median\")\n\n# Unir ambas tablas\nresumen_tendencia = pd.concat([mean_by_group, median_by_group], axis=1)\n\n# Mostrar la tabla\nprint(\"Resumen de medias y medianas por grupo de tamaño poblacional:\")\ndisplay(resumen_tendencia)\n\nResumen de medias y medianas por grupo de tamaño poblacional:\n\n\n\n\n\n\n\n\n\ntasa_delitos_mean\nVBG_mean\nhomicidios_mean\nvinculacion_nna_mean\nVBG_jovenes_mean\nEDA_mean\nmortalidad_desnutrición_mean\ndesnutrición_aguda_mean\nfecundidad_niñas_mean\nfecundidad_adolescentes_mean\n...\nTS_15_64_median\nTS_30_59_median\nTS_hombres_median\nTS_mujeres_median\nTS_total_median\nva_pc_median\nVPC_pri_median\nVPC_sec_median\nVPC_ter_median\nVPC_total_median\n\n\nGrupo_tamano\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nGrande\n0.03\n317.95\n22.00\n0.46\n481.88\n0.91\n2.24\n410.89\n2.06\n35.97\n...\n12.25\n10.32\n15.49\n3.09\n9.34\n17734.27\n0.27\n0.07\n1.46\n1.83\n\n\nMediano\n0.02\n258.44\n50.74\n3.22\n409.82\n1.63\n2.68\n433.75\n3.16\n56.73\n...\n11.75\n12.61\n14.47\n8.91\n8.89\n12376.67\n0.93\n1.95\n6.37\n9.33\n\n\nPequeño\n0.02\n260.44\n49.33\n2.68\n453.56\n2.24\n4.53\n411.52\n1.75\n34.96\n...\n23.05\n35.49\n25.99\n25.75\n13.87\n11149.07\n0.00\n2.99\n8.66\n14.31\n\n\n\n\n3 rows × 80 columns\n\n\n\n\n# Mostrar boxplots para cada tasa\nfor var in tasa_vars:\n    plt.figure(figsize=(8, 5))\n    sns.boxplot(x=\"Grupo_tamano\", y=var, data=tasa_data)\n    plt.title(f\"Distribución de '{var}' por Grupo de Tamaño Poblacional\")\n    plt.ylabel(var)\n    plt.xlabel(\"Grupo_tamano\")\n    plt.tight_layout()\n    plt.show()\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nAnálisis de varianza por tamaño poblacional con prueba de Kruskal-Wallis\nPara identificar si las tasas de ciertos indicadores varían significativamente según el tamaño poblacional de los municipios, se aplicó la prueba de Kruskal-Wallis, una prueba no paramétrica que compara la distribución de una variable continua entre tres o más grupos independientes. A diferencia del ANOVA, esta prueba no asume normalidad y es adecuada para datos con asimetrías o varianzas desiguales, como es común en tasas municipales.\nInterpretación del valor p: Un valor p bajo (&lt; 0.05) indica que al menos uno de los grupos (Pequeño, Mediano o Grande) presenta una distribución diferente en ese indicador. En nuestro caso, nos interesa especialmente cuando el grupo “Pequeño” registra sistemáticamente valores más altos que los demás, ya que esto puede sugerir que la tasa está siendo amplificada artificialmente por el bajo tamaño poblacional, afectando la estabilidad e interpretación del indicador.\n\n#Pruebas estadísticas (ANOVA y Kruskal-Wallis)\nfrom scipy.stats import f_oneway, kruskal\n\n# Inicializar resultados\nresultados_test = []\n\nfor var in tasa_vars:\n    grupos = [\n        tasa_data[tasa_data[\"Grupo_tamano\"] == g][var].dropna()\n        for g in [\"Pequeño\", \"Mediano\", \"Grande\"]\n    ]\n    \n    # ANOVA: supuestos paramétricos\n    try:\n        f_stat, p_anova = f_oneway(*grupos)\n    except:\n        p_anova = None\n    \n    # Kruskal-Wallis: no paramétrico\n    try:\n        h_stat, p_kw = kruskal(*grupos)\n    except:\n        p_kw = None\n\n    resultados_test.append({\n        \"Variable\": var,\n        \"p_ANOVA\": p_anova,\n        \"p_Kruskal_Wallis\": p_kw\n    })\n\n# Convertir a DataFrame\nresultados_df = pd.DataFrame(resultados_test)\n\n# Mostrar tabla ordenada por significancia\nresultados_df.sort_values(\"p_Kruskal_Wallis\", inplace=True)\nprint(\"Resultados de pruebas estadísticas por variable:\")\ndisplay(resultados_df)\n\nResultados de pruebas estadísticas por variable:\n\n\n\n\n\n\n\n\n\nVariable\np_ANOVA\np_Kruskal_Wallis\n\n\n\n\n39\nVPC_total\n0.00\n0.00\n\n\n38\nVPC_ter\n0.00\n0.00\n\n\n37\nVPC_sec\n0.00\n0.00\n\n\n10\ncamas\n0.00\n0.00\n\n\n19\nIDV_pri\n0.00\n0.00\n\n\n29\nTS_15_29\n0.00\n0.00\n\n\n9\nfecundidad_adolescentes\n0.00\n0.00\n\n\n33\nTS_mujeres\n0.00\n0.00\n\n\n35\nva_pc\n0.04\n0.00\n\n\n30\nTS_15_64\n0.00\n0.00\n\n\n31\nTS_30_59\n0.00\n0.00\n\n\n13\nmalaria\n0.63\n0.00\n\n\n16\ndens_emp\n0.03\n0.00\n\n\n32\nTS_hombres\n0.00\n0.00\n\n\n17\nfin_banc_pc\n0.00\n0.00\n\n\n0\ntasa_delitos\n0.05\n0.00\n\n\n14\nleishmaniasis\n0.00\n0.00\n\n\n20\nIDV_sec\n0.00\n0.00\n\n\n34\nTS_total\n0.00\n0.00\n\n\n24\nTIS_15_64\n0.09\n0.00\n\n\n28\nTIS_total\n0.15\n0.00\n\n\n8\nfecundidad_niñas\n0.07\n0.01\n\n\n27\nTIS_mujeres\n0.10\n0.01\n\n\n2\nhomicidios\n0.03\n0.01\n\n\n23\nTIS_15_29\n0.14\n0.01\n\n\n25\nTIS_30_59\n0.02\n0.01\n\n\n36\nVPC_pri\n0.15\n0.01\n\n\n26\nTIS_hombres\n0.16\n0.02\n\n\n11\nIRA\n0.85\n0.03\n\n\n1\nVBG\n0.45\n0.06\n\n\n3\nvinculacion_nna\n0.33\n0.07\n\n\n6\nmortalidad_desnutrición\n0.81\n0.08\n\n\n12\ndengue\n0.60\n0.09\n\n\n7\ndesnutrición_aguda\n0.95\n0.10\n\n\n21\nIDV_ter\n0.68\n0.12\n\n\n15\nafectados_dn\n0.40\n0.13\n\n\n4\nVBG_jovenes\n0.54\n0.14\n\n\n22\nIDV_total\n0.13\n0.25\n\n\n5\nEDA\n0.90\n0.66\n\n\n18\nfin_microcr_pc\n0.84\n0.98\n\n\n\n\n\n\n\n✅ Cómo interpretar los valores p\n\nSi p &lt; 0.05: Hay evidencia estadística de que la tasa es significativamente diferente en al menos uno de los grupos de tamaño. Un P bajo sugiere que municipios Pequeños, Medianos y Grandes tienen valores distintos, y esa diferencia podría deberse al efecto del denominador (población) o a condiciones estructurales.\nSi p ≥ 0.05: No hay evidencia suficiente para decir que la tasa varía significativamente entre grupos. Un p alto sugiere que la variabilidad de esa tasa no está asociada al tamaño poblacional — es decir, los municipios pequeños no necesariamente muestran valores más extremos que los grandes.\n\nUsa Kruskal-Wallis como referencia principal si tus datos no siguen una distribución normal (lo más probable en datos municipales).\n\n# Filtrar la tabla resultados_df y mostrar únicamente los resultados de la prueba Kruskal-Wallis con p &lt; 0.05 \n# (evidencia estadística de diferencia significativa entre grupos poblacionales):\n\n# Filtrar resultados con p &lt; 0.05 en la prueba de Kruskal-Wallis\nresultados_significativos = resultados_df[resultados_df[\"p_Kruskal_Wallis\"] &lt; 0.05][[\"Variable\", \"p_Kruskal_Wallis\"]]\n\n# Contar cuántos indicadores tienen p &lt; 0.05 y calcular el porcentaje\nn_significativos = resultados_significativos.shape[0]\nn_total = resultados_df.shape[0]\nporcentaje = (n_significativos / n_total) * 100\n\n# Mostrar resumen y tabla ordenada\nprint(f\"{n_significativos} de {n_total} indicadores ({porcentaje:.1f}%) presentan diferencias significativas entre grupos poblacionales (p &lt; 0.05, Kruskal-Wallis).\")\ndisplay(resultados_significativos.sort_values(by=\"Variable\"))\n\n29 de 40 indicadores (72.5%) presentan diferencias significativas entre grupos poblacionales (p &lt; 0.05, Kruskal-Wallis).\n\n\n\n\n\n\n\n\n\nVariable\np_Kruskal_Wallis\n\n\n\n\n19\nIDV_pri\n0.00\n\n\n20\nIDV_sec\n0.00\n\n\n11\nIRA\n0.03\n\n\n23\nTIS_15_29\n0.01\n\n\n24\nTIS_15_64\n0.00\n\n\n25\nTIS_30_59\n0.01\n\n\n26\nTIS_hombres\n0.02\n\n\n27\nTIS_mujeres\n0.01\n\n\n28\nTIS_total\n0.00\n\n\n29\nTS_15_29\n0.00\n\n\n30\nTS_15_64\n0.00\n\n\n31\nTS_30_59\n0.00\n\n\n32\nTS_hombres\n0.00\n\n\n33\nTS_mujeres\n0.00\n\n\n34\nTS_total\n0.00\n\n\n36\nVPC_pri\n0.01\n\n\n37\nVPC_sec\n0.00\n\n\n38\nVPC_ter\n0.00\n\n\n39\nVPC_total\n0.00\n\n\n10\ncamas\n0.00\n\n\n16\ndens_emp\n0.00\n\n\n9\nfecundidad_adolescentes\n0.00\n\n\n8\nfecundidad_niñas\n0.01\n\n\n17\nfin_banc_pc\n0.00\n\n\n2\nhomicidios\n0.01\n\n\n14\nleishmaniasis\n0.00\n\n\n13\nmalaria\n0.00\n\n\n0\ntasa_delitos\n0.00\n\n\n35\nva_pc\n0.00\n\n\n\n\n\n\n\n\n\n2. Evaluación de patrones de magnitud\nSe compararon las medianas y p95 entre grupos para identificar si los municipios pequeños tienden a tener tasas más altas. Se generó una tabla de diagnóstico categorizando los indicadores según este patrón.\nInicialmente se hizo este ejercicio para los indicadores con diferencias significativas entre grupos poblacionales según la prueba de Kruskal-Wallis buscanndo determinar si los municipios pequeños tienden a registrar tasas más altas, no obstante finalmente se decidió enfocar el análisis de estabilidad únicamente en aquellos indicadores que mostraban tasas más altas en municipios pequeños, independientemente del valor p del test. Esto se justificó por el objetivo principal del estudio: identificar potenciales distorsiones inducidas por el bajo denominador poblacional, más que diferencias estadísticas globales entre grupos. La información del test fue útil como insumo adicional, pero no constituyó el criterio principal de priorización para el análisis cualitativo.\nPara ello:\n\nSe calculan estadísticas descriptivas (media, desviación estándar, percentiles 5, 50 y 95) por grupo de tamaño poblacional.\nSe seleccionan únicamente los indicadores que presentaron diferencias estadísticamente significativas entre grupos de tamaño poblacional según la prueba de Kruskal-Wallis. Luego se hace el ejericicio sin este filtro\nSe comparan las medianas (q50) y los percentiles 95 (q95) de estos indicadores para cada grupo.\nSi el grupo “Pequeño” tiene sistemáticamente el mayor valor en q50 o q95, se interpreta como una posible señal de que las tasas tienden a dispararse en municipios con poca población.\n\nEsta revisión ayuda a definir qué tasas requieren ajustes metodológicos o interpretaciones diferenciadas para luego complementar el análisis con el CV y el IQR de estos indicadores según el tamaño de los municipios\n\n# Ejericicio para los indicadores del ue presentaron diferencias estadísticamente significativas entre grupos de tamaño poblacional según la prueba de Kruskal-Wallis\n# Paso 1: Calcular estadísticas descriptivas por grupo de tamaño\ng = tasa_data.groupby(\"Grupo_tamano\")[tasa_vars]\nmean_df = g.mean().add_suffix(\"_mean\")\nstd_df  = g.std().add_suffix(\"_std\")\nq05_df  = g.quantile(0.05).add_suffix(\"_q05\")\nq50_df  = g.quantile(0.50).add_suffix(\"_q50\")\nq95_df  = g.quantile(0.95).add_suffix(\"_q95\")\nestadisticas = pd.concat([mean_df, std_df, q05_df, q50_df, q95_df], axis=1)\nestadisticas[\"Grupo_tamano\"] = estadisticas.index\n\n# Paso 2: Filtrar variables significativas según Kruskal-Wallis\ndestacadas = resultados_significativos[\"Variable\"].unique()\n\n# Paso 3: Filtrar columnas q50 y q95 para esas variables\nestad_q50_q95 = estadisticas[\n    [\"Grupo_tamano\"] +\n    [col for col in estadisticas.columns\n     if any(var in col for var in destacadas)\n     and (col.endswith(\"_q50\") or col.endswith(\"_q95\"))]\n]\n\n# Paso 4: Transformar a formato largo\nmelted = estad_q50_q95.melt(id_vars=\"Grupo_tamano\", var_name=\"Variable\", value_name=\"Valor\")\nmelted[\"Base\"] = melted[\"Variable\"].str.replace(r\"_(q50|q95)$\", \"\", regex=True)\nmelted[\"Estadistico\"] = melted[\"Variable\"].str.extract(r\"_(q50|q95)$\")\n\n# Paso 5: Pivotear para comparar q50 y q95 por grupo\npivoted = melted.pivot_table(index=[\"Base\", \"Grupo_tamano\"],\n                             columns=\"Estadistico\", values=\"Valor\").reset_index()\n\n# Paso 6: Diagnóstico de si grupo \"Pequeño\" tiene las tasas más altas\ndiagnostico = []\nfor var in pivoted[\"Base\"].unique():\n    sub = pivoted[pivoted[\"Base\"] == var]\n    max_q50 = sub.loc[sub[\"q50\"].idxmax()]\n    max_q95 = sub.loc[sub[\"q95\"].idxmax()]\n    val_q50_peq = sub[sub[\"Grupo_tamano\"] == \"Pequeño\"][\"q50\"].values[0]\n    val_q95_peq = sub[sub[\"Grupo_tamano\"] == \"Pequeño\"][\"q95\"].values[0]\n\n    diagnostico.append({\n        \"Variable\": var,\n        \"Pequeño_q50\": val_q50_peq,\n        \"Pequeño_q95\": val_q95_peq,\n        \"Grupo_max_q50\": max_q50[\"Grupo_tamano\"],\n        \"Grupo_max_q95\": max_q95[\"Grupo_tamano\"],\n        \"Diagnóstico\": (\n            \"Tasa tiende a ser más alta en municipios pequeños\"\n            if (max_q50[\"Grupo_tamano\"] == \"Pequeño\" or max_q95[\"Grupo_tamano\"] == \"Pequeño\")\n            else \"No hay patrón claro de mayor tasa en municipios pequeños\"\n        )\n    })\n\n# Paso 7: Crear y mostrar tabla final\ndiagnostico_df = pd.DataFrame(diagnostico)\ndiagnostico_df = diagnostico_df.sort_values(\"Variable\")\ndisplay(diagnostico_df)\n\n# Paso 8: Contar cuántas variables tienen tasas más altas en municipios pequeños\nn_total = diagnostico_df.shape[0]\nn_pequenos = diagnostico_df[diagnostico_df[\"Diagnóstico\"] == \"Tasa tiende a ser más alta en municipios pequeños\"].shape[0]\nporcentaje_pequenos = (n_pequenos / n_total) * 100\n\nprint(f\"Total de indicadores evaluados: {n_total}\")\nprint(f\"Indicadores con tasas más altas en municipios pequeños: {n_pequenos}\")\nprint(f\"Porcentaje: {porcentaje_pequenos:.1f}%\")\n\n\n\n\n\n\n\n\nVariable\nPequeño_q50\nPequeño_q95\nGrupo_max_q50\nGrupo_max_q95\nDiagnóstico\n\n\n\n\n0\nIDV_pri\n0.00\n0.27\nGrande\nGrande\nNo hay patrón claro de mayor tasa en municipio...\n\n\n1\nIDV_sec\n0.15\n0.40\nPequeño\nPequeño\nTasa tiende a ser más alta en municipios pequeños\n\n\n2\nIRA\n0.00\n40.74\nGrande\nMediano\nNo hay patrón claro de mayor tasa en municipio...\n\n\n3\nTIS_15_29\n188.59\n478.20\nGrande\nPequeño\nTasa tiende a ser más alta en municipios pequeños\n\n\n4\nTIS_15_64\n64.20\n202.19\nGrande\nPequeño\nTasa tiende a ser más alta en municipios pequeños\n\n\n5\nTIS_30_59\n55.54\n136.92\nPequeño\nPequeño\nTasa tiende a ser más alta en municipios pequeños\n\n\n6\nTIS_hombres\n45.15\n150.50\nGrande\nPequeño\nTasa tiende a ser más alta en municipios pequeños\n\n\n7\nTIS_mujeres\n79.91\n261.59\nGrande\nPequeño\nTasa tiende a ser más alta en municipios pequeños\n\n\n8\nTIS_total\n60.91\n158.00\nGrande\nPequeño\nTasa tiende a ser más alta en municipios pequeños\n\n\n9\nTS_15_29\n48.57\n104.17\nPequeño\nPequeño\nTasa tiende a ser más alta en municipios pequeños\n\n\n10\nTS_15_64\n23.05\n43.46\nPequeño\nPequeño\nTasa tiende a ser más alta en municipios pequeños\n\n\n11\nTS_30_59\n35.49\n51.17\nPequeño\nPequeño\nTasa tiende a ser más alta en municipios pequeños\n\n\n12\nTS_hombres\n25.99\n51.05\nPequeño\nPequeño\nTasa tiende a ser más alta en municipios pequeños\n\n\n13\nTS_mujeres\n25.75\n75.83\nPequeño\nPequeño\nTasa tiende a ser más alta en municipios pequeños\n\n\n14\nTS_total\n13.87\n35.61\nPequeño\nPequeño\nTasa tiende a ser más alta en municipios pequeños\n\n\n15\nVPC_pri\n0.00\n5.47\nMediano\nPequeño\nTasa tiende a ser más alta en municipios pequeños\n\n\n16\nVPC_sec\n2.99\n8.38\nPequeño\nPequeño\nTasa tiende a ser más alta en municipios pequeños\n\n\n17\nVPC_ter\n8.66\n19.97\nPequeño\nPequeño\nTasa tiende a ser más alta en municipios pequeños\n\n\n18\nVPC_total\n14.31\n27.12\nPequeño\nPequeño\nTasa tiende a ser más alta en municipios pequeños\n\n\n19\ncamas\n74.41\n146.42\nGrande\nGrande\nNo hay patrón claro de mayor tasa en municipio...\n\n\n20\ndens_emp\n20.10\n49.87\nGrande\nMediano\nNo hay patrón claro de mayor tasa en municipio...\n\n\n21\nfecundidad_adolescentes\n30.53\n63.83\nMediano\nMediano\nNo hay patrón claro de mayor tasa en municipio...\n\n\n22\nfecundidad_niñas\n0.00\n7.85\nMediano\nMediano\nNo hay patrón claro de mayor tasa en municipio...\n\n\n23\nfin_banc_pc\n7.67\n16.75\nPequeño\nPequeño\nTasa tiende a ser más alta en municipios pequeños\n\n\n24\nhomicidios\n32.02\n161.97\nMediano\nPequeño\nTasa tiende a ser más alta en municipios pequeños\n\n\n25\nleishmaniasis\n0.00\n122.21\nMediano\nMediano\nNo hay patrón claro de mayor tasa en municipio...\n\n\n26\nmalaria\n0.00\n134.24\nMediano\nMediano\nNo hay patrón claro de mayor tasa en municipio...\n\n\n27\ntasa_delitos\n0.01\n0.07\nGrande\nGrande\nNo hay patrón claro de mayor tasa en municipio...\n\n\n28\nva_pc\n11149.07\n29834.42\nGrande\nGrande\nNo hay patrón claro de mayor tasa en municipio...\n\n\n\n\n\n\n\nTotal de indicadores evaluados: 29\nIndicadores con tasas más altas en municipios pequeños: 19\nPorcentaje: 65.5%\n\n\n\n# Ejercicio para todas las tasas, no solo las que indicadoron diferencias en el test\n\n# Paso 1: Calcular estadísticas descriptivas por grupo de tamaño para todas las tasas\ng = tasa_data.groupby(\"Grupo_tamano\")[tasa_vars]\nmean_df = g.mean().add_suffix(\"_mean\")\nstd_df  = g.std().add_suffix(\"_std\")\nq05_df  = g.quantile(0.05).add_suffix(\"_q05\")\nq50_df  = g.quantile(0.50).add_suffix(\"_q50\")\nq95_df  = g.quantile(0.95).add_suffix(\"_q95\")\nestadisticas = pd.concat([mean_df, std_df, q05_df, q50_df, q95_df], axis=1)\nestadisticas[\"Grupo_tamano\"] = estadisticas.index\n\n# Paso 2: Extraer solo columnas de q50 y q95 para todas las tasas\nestad_q50_q95 = estadisticas[\n    [\"Grupo_tamano\"] +\n    [col for col in estadisticas.columns if col.endswith(\"_q50\") or col.endswith(\"_q95\")]\n]\n\n# Paso 3: Transformar a formato largo\nmelted = estad_q50_q95.melt(id_vars=\"Grupo_tamano\", var_name=\"Variable\", value_name=\"Valor\")\nmelted[\"Base\"] = melted[\"Variable\"].str.replace(r\"_(q50|q95)$\", \"\", regex=True)\nmelted[\"Estadistico\"] = melted[\"Variable\"].str.extract(r\"_(q50|q95)$\")\n\n# Paso 4: Pivotear para comparar q50 y q95 por grupo\npivoted = melted.pivot_table(index=[\"Base\", \"Grupo_tamano\"],\n                             columns=\"Estadistico\", values=\"Valor\").reset_index()\n\n# Paso 5: Diagnóstico de si grupo \"Pequeño\" tiene las tasas más altas\ndiagnostico = []\nfor var in pivoted[\"Base\"].unique():\n    sub = pivoted[pivoted[\"Base\"] == var]\n    max_q50 = sub.loc[sub[\"q50\"].idxmax()]\n    max_q95 = sub.loc[sub[\"q95\"].idxmax()]\n    val_q50_peq = sub[sub[\"Grupo_tamano\"] == \"Pequeño\"][\"q50\"].values[0]\n    val_q95_peq = sub[sub[\"Grupo_tamano\"] == \"Pequeño\"][\"q95\"].values[0]\n\n    diagnostico.append({\n        \"Variable\": var,\n        \"Pequeño_q50\": val_q50_peq,\n        \"Pequeño_q95\": val_q95_peq,\n        \"Grupo_max_q50\": max_q50[\"Grupo_tamano\"],\n        \"Grupo_max_q95\": max_q95[\"Grupo_tamano\"],\n        \"Diagnóstico\": (\n            \"Tasa tiende a ser más alta en municipios pequeños\"\n            if (max_q50[\"Grupo_tamano\"] == \"Pequeño\" or max_q95[\"Grupo_tamano\"] == \"Pequeño\")\n            else \"No hay patrón claro de mayor tasa en municipios pequeños\"\n        )\n    })\n\n# Paso 6: Crear y mostrar tabla final\ndiagnostico_df = pd.DataFrame(diagnostico).sort_values(\"Variable\")\ndisplay(diagnostico_df)\n\n# Paso 7: Contar cuántas variables tienen tasas más altas en municipios pequeños\nn_total = diagnostico_df.shape[0]\nn_pequenos = diagnostico_df[diagnostico_df[\"Diagnóstico\"] == \"Tasa tiende a ser más alta en municipios pequeños\"].shape[0]\nporcentaje_pequenos = (n_pequenos / n_total) * 100\n\nprint(f\"Total de indicadores evaluados: {n_total}\")\nprint(f\"Indicadores con tasas más altas en municipios pequeños: {n_pequenos}\")\nprint(f\"Porcentaje: {porcentaje_pequenos:.1f}%\")\n\n\n\n\n\n\n\n\nVariable\nPequeño_q50\nPequeño_q95\nGrupo_max_q50\nGrupo_max_q95\nDiagnóstico\n\n\n\n\n0\nEDA\n0.00\n0.00\nGrande\nMediano\nNo hay patrón claro de mayor tasa en municipio...\n\n\n1\nIDV_pri\n0.00\n0.27\nGrande\nGrande\nNo hay patrón claro de mayor tasa en municipio...\n\n\n2\nIDV_sec\n0.15\n0.40\nPequeño\nPequeño\nTasa tiende a ser más alta en municipios pequeños\n\n\n3\nIDV_ter\n0.36\n0.68\nPequeño\nGrande\nTasa tiende a ser más alta en municipios pequeños\n\n\n4\nIDV_total\n0.62\n1.04\nPequeño\nGrande\nTasa tiende a ser más alta en municipios pequeños\n\n\n5\nIRA\n0.00\n40.74\nGrande\nMediano\nNo hay patrón claro de mayor tasa en municipio...\n\n\n6\nTIS_15_29\n188.59\n478.20\nGrande\nPequeño\nTasa tiende a ser más alta en municipios pequeños\n\n\n7\nTIS_15_64\n64.20\n202.19\nGrande\nPequeño\nTasa tiende a ser más alta en municipios pequeños\n\n\n8\nTIS_30_59\n55.54\n136.92\nPequeño\nPequeño\nTasa tiende a ser más alta en municipios pequeños\n\n\n9\nTIS_hombres\n45.15\n150.50\nGrande\nPequeño\nTasa tiende a ser más alta en municipios pequeños\n\n\n10\nTIS_mujeres\n79.91\n261.59\nGrande\nPequeño\nTasa tiende a ser más alta en municipios pequeños\n\n\n11\nTIS_total\n60.91\n158.00\nGrande\nPequeño\nTasa tiende a ser más alta en municipios pequeños\n\n\n12\nTS_15_29\n48.57\n104.17\nPequeño\nPequeño\nTasa tiende a ser más alta en municipios pequeños\n\n\n13\nTS_15_64\n23.05\n43.46\nPequeño\nPequeño\nTasa tiende a ser más alta en municipios pequeños\n\n\n14\nTS_30_59\n35.49\n51.17\nPequeño\nPequeño\nTasa tiende a ser más alta en municipios pequeños\n\n\n15\nTS_hombres\n25.99\n51.05\nPequeño\nPequeño\nTasa tiende a ser más alta en municipios pequeños\n\n\n16\nTS_mujeres\n25.75\n75.83\nPequeño\nPequeño\nTasa tiende a ser más alta en municipios pequeños\n\n\n17\nTS_total\n13.87\n35.61\nPequeño\nPequeño\nTasa tiende a ser más alta en municipios pequeños\n\n\n18\nVBG\n232.40\n642.00\nGrande\nPequeño\nTasa tiende a ser más alta en municipios pequeños\n\n\n19\nVBG_jovenes\n386.85\n1091.85\nGrande\nPequeño\nTasa tiende a ser más alta en municipios pequeños\n\n\n20\nVPC_pri\n0.00\n5.47\nMediano\nPequeño\nTasa tiende a ser más alta en municipios pequeños\n\n\n21\nVPC_sec\n2.99\n8.38\nPequeño\nPequeño\nTasa tiende a ser más alta en municipios pequeños\n\n\n22\nVPC_ter\n8.66\n19.97\nPequeño\nPequeño\nTasa tiende a ser más alta en municipios pequeños\n\n\n23\nVPC_total\n14.31\n27.12\nPequeño\nPequeño\nTasa tiende a ser más alta en municipios pequeños\n\n\n24\nafectados_dn\n788.73\n61781.75\nMediano\nPequeño\nTasa tiende a ser más alta en municipios pequeños\n\n\n25\ncamas\n74.41\n146.42\nGrande\nGrande\nNo hay patrón claro de mayor tasa en municipio...\n\n\n26\ndengue\n3.86\n423.01\nMediano\nMediano\nNo hay patrón claro de mayor tasa en municipio...\n\n\n27\ndens_emp\n20.10\n49.87\nGrande\nMediano\nNo hay patrón claro de mayor tasa en municipio...\n\n\n28\ndesnutrición_aguda\n286.97\n1277.89\nGrande\nPequeño\nTasa tiende a ser más alta en municipios pequeños\n\n\n29\nfecundidad_adolescentes\n30.53\n63.83\nMediano\nMediano\nNo hay patrón claro de mayor tasa en municipio...\n\n\n30\nfecundidad_niñas\n0.00\n7.85\nMediano\nMediano\nNo hay patrón claro de mayor tasa en municipio...\n\n\n31\nfin_banc_pc\n7.67\n16.75\nPequeño\nPequeño\nTasa tiende a ser más alta en municipios pequeños\n\n\n32\nfin_microcr_pc\n4.62\n14.13\nGrande\nPequeño\nTasa tiende a ser más alta en municipios pequeños\n\n\n33\nhomicidios\n32.02\n161.97\nMediano\nPequeño\nTasa tiende a ser más alta en municipios pequeños\n\n\n34\nleishmaniasis\n0.00\n122.21\nMediano\nMediano\nNo hay patrón claro de mayor tasa en municipio...\n\n\n35\nmalaria\n0.00\n134.24\nMediano\nMediano\nNo hay patrón claro de mayor tasa en municipio...\n\n\n36\nmortalidad_desnutrición\n0.00\n0.00\nGrande\nGrande\nNo hay patrón claro de mayor tasa en municipio...\n\n\n37\ntasa_delitos\n0.01\n0.07\nGrande\nGrande\nNo hay patrón claro de mayor tasa en municipio...\n\n\n38\nva_pc\n11149.07\n29834.42\nGrande\nGrande\nNo hay patrón claro de mayor tasa en municipio...\n\n\n39\nvinculacion_nna\n0.00\n23.12\nGrande\nPequeño\nTasa tiende a ser más alta en municipios pequeños\n\n\n\n\n\n\n\nTotal de indicadores evaluados: 40\nIndicadores con tasas más altas en municipios pequeños: 27\nPorcentaje: 67.5%\n\n\nConsideración\nDado nuestro objetivo —detectar indicadores cuya tasa podría estar distorsionada por la baja población de los municipios pequeños—, la recomendación óptima es:\n🔍 Aplicar el análisis complementario de CV/IQR a todos los indicadores que muestran mayor mediana (o p95) en municipios pequeños, independientemente del valor p de Kruskal-Wallis.\n¿Por qué?\n\nEl efecto de población pequeña no siempre se traduce en diferencias estadísticamente significativas globales (Kruskal-Wallis).\nPero sí puede producir outliers o concentraciones de alta tasa en pequeños, visibles en la mediana o el p95.\nEl análisis de volatilidad te ayuda a discernir si esas altas tasas son estructurales o solo ruido estadístico, lo cual es justo lo que quieres ajustar.\n\n\n\n3. Análisis de estabilidad estadística:\npara los indicadores que mostraban tasas más altas en municipios pequeños, se calcularon: - el coeficiente de variación (CV): como medida de variabilidad relativa, - el rango intercuartílico (IQR): como medida de dispersión robusta. - Clasificación cualitativa: se asignaron categorías empíricas (“Bajo”, “Moderado”, “Muy alto”) al CV e IQR, y se combinó esta información para construir una tabla de diagnóstico por grupo, evaluando si la volatilidad estaba presente solo en municipios pequeños o en todos los grupos.\nProcederemos a enfocarnos en los indicadores cuya mediana y p90 fue más alta en los municipios pequeños. El objetivo es evaluar si esas tasas elevadas podrían estar influenciadas por la baja población, generando volatilidad artificial.\nPara ello, analizaremos si estos indicadores presentan niveles altos de variabilidad relativa (Coeficiente de Variación, CV) o dispersión (Rango Intercuartílico, IQR) específicamente en el grupo de municipios pequeños. Si se identifican valores elevados de CV o IQR en este grupo, se sugerirá la necesidad de aplicar correcciones estadísticas o realizar análisis diferenciados para evitar interpretaciones erróneas en ejercicios comparativos o de agrupación municipal.\n\n# 1. Filtrar solo los indicadores cuyo diagnóstico fue \"Tasa tiende a ser más alta en municipios pequeños\"\nvariables_objetivo = diagnostico_df.loc[\n    diagnostico_df['Diagnóstico'] == \"Tasa tiende a ser más alta en municipios pequeños\",\n    'Variable'\n].unique()\n\n# 2. Subset del dataframe de estadísticas solo con esas variables\nestadisticas_subset = estadisticas.filter(regex=\"^(\" + \"|\".join(variables_objetivo) + \")_(mean|std|q05|q50|q95)$\")\nestadisticas_subset.insert(0, \"Grupo_tamano\", estadisticas[\"Grupo_tamano\"])  # Añadir columna de grupo\n\n# 3. Transformar a formato largo para facilitar el análisis\nlong_df = estadisticas_subset.melt(id_vars=\"Grupo_tamano\", var_name=\"Variable_Medida\", value_name=\"Valor\")\n\n# 4. Separar nombre del indicador y la estadística (mean, std, q05, q50, q95)\nlong_df[['Variable', 'Medida']] = long_df['Variable_Medida'].str.extract(r'^(.*)_(mean|std|q05|q50|q95)$')\n\n# 5. Pivot para tener columnas separadas por medida\npivot_df = long_df.pivot_table(index=[\"Variable\", \"Grupo_tamano\"], columns=\"Medida\", values=\"Valor\").reset_index()\n\n# 6. Calcular CV e IQR por grupo e indicador\npivot_df['CV'] = pivot_df['std'] / pivot_df['mean']\npivot_df['IQR'] = pivot_df['q95'] - pivot_df['q05']\n\n# 7. Clasificación del CV\ndef clasificar_cv(cv):\n    if pd.isna(cv):\n        return \"Indefinido\"\n    elif cv &lt; 0.5:\n        return \"Bajo\"\n    elif cv &lt; 1.0:\n        return \"Alto\"\n    else:\n        return \"Muy alto\"\npivot_df['CV_categoria'] = pivot_df['CV'].apply(clasificar_cv)\n\n# Clasificación del IQR con cuantiles empíricos\nq1_iqr = pivot_df['IQR'].quantile(0.33)\nq2_iqr = pivot_df['IQR'].quantile(0.66)\n\ndef clasificar_iqr_empirico(iqr):\n    if pd.isna(iqr):\n        return \"Indefinido\"\n    elif iqr &lt; q1_iqr:\n        return \"Bajo\"\n    elif iqr &lt; q2_iqr:\n        return \"Moderado\"\n    else:\n        return \"Muy alto\"\npivot_df['IQR_categoria'] = pivot_df['IQR'].apply(clasificar_iqr_empirico)\n\n# 8. Añadir valor p desde resultados_significativos\n# pivot_df = pivot_df.merge(\n#    resultados_significativos[['Variable', 'p_Kruskal_Wallis']],\n#    on='Variable',\n#    how='left'\n#)\n\n# 9. Interpretación de estabilidad y recomendación\ndef interpretar_fila(row):\n    if row['CV_categoria'] == \"Bajo\" and row['IQR_categoria'] == \"Bajo\":\n        return \"Estable\", \"Ninguna\"\n    elif row['CV_categoria'] == \"Muy alto\" or row['IQR_categoria'] == \"Muy alto\":\n        return \"Alta volatilidad\", \"Aplicar corrección o análisis específico\"\n    else:\n        return \"Volatilidad moderada\", \"Revisar según relevancia\"\n\npivot_df[['Interpretación', 'Recomendación']] = pivot_df.apply(lambda row: pd.Series(interpretar_fila(row)), axis=1)\n\n# 10. Tabla 1: Diagnóstico por variable y grupo de tamaño\ntabla_diagnostico_detallado = pivot_df[[\n    'Variable', 'Grupo_tamano', 'mean','CV', 'CV_categoria', 'IQR', 'IQR_categoria',\n    'Interpretación', 'Recomendación'\n]]\n\n\ndisplay(tabla_diagnostico_detallado)\n\n\n\n\n\n\n\nMedida\nVariable\nGrupo_tamano\nmean\nCV\nCV_categoria\nIQR\nIQR_categoria\nInterpretación\nRecomendación\n\n\n\n\n0\nIDV_sec\nGrande\n0.07\n1.06\nMuy alto\n0.17\nBajo\nAlta volatilidad\nAplicar corrección o análisis específico\n\n\n1\nIDV_sec\nMediano\n0.11\n0.77\nAlto\n0.30\nBajo\nVolatilidad moderada\nRevisar según relevancia\n\n\n2\nIDV_sec\nPequeño\n0.16\n0.76\nAlto\n0.39\nBajo\nVolatilidad moderada\nRevisar según relevancia\n\n\n3\nIDV_ter\nGrande\n0.42\n1.27\nMuy alto\n1.42\nBajo\nAlta volatilidad\nAplicar corrección o análisis específico\n\n\n4\nIDV_ter\nMediano\n0.36\n0.65\nAlto\n0.81\nBajo\nVolatilidad moderada\nRevisar según relevancia\n\n\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n\n\n76\nhomicidios\nMediano\n50.74\n0.87\nAlto\n141.17\nMuy alto\nAlta volatilidad\nAplicar corrección o análisis específico\n\n\n77\nhomicidios\nPequeño\n49.33\n1.01\nMuy alto\n161.97\nMuy alto\nAlta volatilidad\nAplicar corrección o análisis específico\n\n\n78\nvinculacion_nna\nGrande\n0.46\n2.64\nMuy alto\n3.13\nBajo\nAlta volatilidad\nAplicar corrección o análisis específico\n\n\n79\nvinculacion_nna\nMediano\n3.22\n1.89\nMuy alto\n14.15\nModerado\nAlta volatilidad\nAplicar corrección o análisis específico\n\n\n80\nvinculacion_nna\nPequeño\n2.68\n3.45\nMuy alto\n23.12\nModerado\nAlta volatilidad\nAplicar corrección o análisis específico\n\n\n\n\n81 rows × 9 columns\n\n\n\n\n\n4. Análisis cualitativo con apoyo de ChatGPT:\nSe procede a realizar un análisis cualitativo asistido con ChatGPT Plus sobre los indicadores que previamente habían mostrado tasas más altas en municipios pequeños (según la mediana y/o el percentil 90).\nEste análisis se enfocó en interpretar la combinación de tres medidas por grupo de tamaño poblacional: - Coeficiente de variación (CV): mide la variabilidad relativa respecto a la media. - Rango intercuartílico (IQR): mide la dispersión entre los percentiles 5 y 95, siendo menos sensible a valores extremos. - Media: se incluyó para verificar si la tasa promedio es sustancialmente baja, lo cual puede inflar el CV de forma artificial.\nEl objetivo fue diagnosticar, caso por caso, si la diferencia observada en municipios pequeños es una señal real o una distorsión estadística derivada del bajo tamaño poblacional (efecto del denominador), y si por tanto se requiere: - aplicar correcciones estadísticas (e.g., medias móviles, winsorización), - o bien mantener el indicador sin ajuste adicional.\nEste paso complementó el análisis cuantitativo previo y permitió definir que 18 de los 27 indicadores priorizados por mostrar tasas más altas en municipios pequeños requieren ajustes (medias moviles trianuales). Es decir, se concluye que, 18 de las 40 tasas requieren ajustes.\n\n### Tabla en formato para analisis manual y cualitativo\n# 1. Unir descripción desde diccionario_df\ntabla_diagnostico_detallado = tabla_diagnostico_detallado.merge(\n    diccionario_df[[\"var_id\", \"variable\"]],\n    left_on=\"Variable\",\n    right_on=\"var_id\",\n    how=\"left\"\n)\n\n# 2. Renombrar columna 'variable' a 'Nombre' y reordenar columnas\ntabla_diagnostico_detallado = tabla_diagnostico_detallado.rename(columns={\"variable\": \"Nombre\"})\ncols = ['Variable', 'Nombre', 'Grupo_tamano', 'mean','CV', 'CV_categoria', 'IQR', 'IQR_categoria']\ntabla_diagnostico_detallado_2 = tabla_diagnostico_detallado[cols]\n\n# 3. Exportar a Excel\noutput_path = r\"C:\\Users\\ylondono\\Proantioquia\\Proantioquia Team Site - ACV\\PRODUCTOS\\EJERCICIO CLUSTERIZACIÓN MUNICIPAL ANTIOQUIA\\DATOS\\BASES HOMOGENEIZADAS\\Final_Data\\20250612_Diagnóstico_CV_IQR.xlsx\"\ntabla_diagnostico_detallado_2.to_excel(output_path, index=False)\n\n\n\n5. Aplicación de medias móviles a otros indicadores epidemiológicos sensibles\nDado que algunos indicadores presentan una alta susceptibilidad a la volatilidad estadística en municipios con baja población (ya sea por la baja frecuencia de eventos, la naturaleza epidémica de los fenómenos o el tamaño reducido de las poblaciones en riesgo), se optó por aplicar medias móviles trianuales para suavizar las tasas y mejorar su confiabilidad analítica.\nEstos indicadores fueron:\n\nTasa de casos de dengue por cada cien mil habitantes\nTasa de mortalidad por EDA en menores de 5 años\nTasa de fecundidad en adolescentes (15–19 años)\nTasa de fecundidad en niñas (10–14 años)\nTasa de mortalidad por IRA en menores de 5 años\nTasa de casos de leishmaniasis en zonas rurales\nTasa de casos de malaria\nTasa de mortalidad por desnutrición en menores de 5 años\n\nLa media móvil suaviza valores atípicos inducidos por denominadores pequeños o brotes puntuales, evitando interpretaciones sesgadas y favoreciendo decisiones más robustas en el análisis multivariado o en productos públicos."
  },
  {
    "objectID": "antioquia.html",
    "href": "antioquia.html",
    "title": "Antioquia",
    "section": "",
    "text": "Aquí se presentarán los indicadores, índices por dimensión, y comparativos de Antioquia frente al promedio nacional y/o su grupo de clúster.\n\n\nDescargas (CSV): próximamente.\nGráficos (PNG): próximamente."
  },
  {
    "objectID": "antioquia.html#panel-de-resultados",
    "href": "antioquia.html#panel-de-resultados",
    "title": "Antioquia",
    "section": "",
    "text": "Aquí se presentarán los indicadores, índices por dimensión, y comparativos de Antioquia frente al promedio nacional y/o su grupo de clúster.\n\n\nDescargas (CSV): próximamente.\nGráficos (PNG): próximamente."
  },
  {
    "objectID": "resultados_idx1_servicio.html#estadísticas-descriptivas",
    "href": "resultados_idx1_servicio.html#estadísticas-descriptivas",
    "title": "Resultados IDX 1: Acceso a servicio de agua potable y saneamiento",
    "section": "",
    "text": "Aquí se encuentra una revisión de las estadísticas descriptivas de las variables que componen el componente:\n\n\nCode\nlibrary(readxl)\nlibrary(knitr)\nlibrary(magrittr) # &lt;- Esto habilita %&gt;%\n\n# Ruta al archivo exportado por AUX_Functions\nruta_excel &lt;- \"all/01_TablasDescriptivas/idx1_servicio_summary_labels.xlsx\"\n\n# Leer el archivo\ntabla_resumen &lt;- read_xlsx(ruta_excel)\n\n# Mostrar la tabla con etiquetas legibles y tres decimales\ntabla_resumen %&gt;%\n  dplyr::select(Etiqueta, N, Media, SD, Min, Max) %&gt;%\n  dplyr::mutate(\n    Media = round(Media, 3),\n    SD = round(SD, 3),\n    Min = round(Min, 3),\n    Max = round(Max, 3)\n  ) %&gt;%\n  kable(caption = \"Resumen de variables numéricas válidas\")\n\n\n\nResumen de variables numéricas válidas\n\n\nEtiqueta\nN\nMedia\nSD\nMin\nMax\n\n\n\n\nIRCA (consumo humano)\n123\n-5.526\n10.984\n-90.2\n0\n\n\nIRCA urbano\n123\n-2.375\n9.262\n-90.2\n0\n\n\nIRCA rural\n73\n-29.610\n31.298\n-100.0\n0"
  }
]