---
title: "Resultados IDX 1: Acceso a servicio de agua potable y saneamiento"
format: html
---

# Resultados del Índice 1: Acceso a servicio de agua potable y saneamiento



## Estadísticas descriptivas

Aquí se encuentra una revisión de las estadísticas descriptivas de las variables que componen el componente:

```{r}
library(readxl)
library(knitr)
library(magrittr) # <- Esto habilita %>%

# Ruta al archivo exportado por AUX_Functions
ruta_excel <- "all/01_TablasDescriptivas/idx1_servicio_summary_labels.xlsx"

# Leer el archivo
tabla_resumen <- read_xlsx(ruta_excel)

# Mostrar la tabla con etiquetas legibles y tres decimales
tabla_resumen %>%
  dplyr::select(Etiqueta, N, Media, SD, Min, Max) %>%
  dplyr::mutate(
    Media = round(Media, 3),
    SD = round(SD, 3),
    Min = round(Min, 3),
    Max = round(Max, 3)
  ) %>%
  kable(caption = "Resumen de variables numéricas válidas")
```

---

## Construcción del índice 

En esta sección se presentan los principales componentes extraídos mediante análisis de componentes principales (PCA). Se muestran las variables más relevantes que conforman cada componente, junto con sus respectivas cargas, lo que permite identificar cuáles factores tienen mayor influencia en el índice de acceso a servicios de agua potable y saneamiento.

<div style="display: flex; gap: 10px; justify-content: center; align-items: center;">
  <img src="all/idx1_servicio_radar_PC1.png" width="300px" />
  <img src="all/idx1_servicio_radar_PC2.png" width="300px" />
  <img src="all/idx1_servicio_radar_PC3.png" width="300px" />
</div>

```{r, fig.cap = 'Resultados completos en PNG'}
knitr::include_graphics("all/02_Imagenes/idx1_servicio_results.png")
```

---

### Resultados númericos


```{r}
library(readxl)
library(knitr)

# Ruta al archivo Excel
ruta_excel <- "all/idx1_servicio_loadings_y_tops.xlsx"

# Leer las hojas
loadings <- read_xlsx(ruta_excel, sheet = "loadings")
variance <- read_xlsx(ruta_excel, sheet = "variance")
top_PC1 <- read_xlsx(ruta_excel, sheet = "top_PC1")
top_PC2 <- read_xlsx(ruta_excel, sheet = "top_PC2")

# Mostrar tablas
kable(loadings, caption = "Cargas por variable y componente (loadings)")
kable(variance, caption = "Varianza explicada por componente")
kable(top_PC1, caption = "Top variables en PC1")
kable(top_PC2, caption = "Top variables en PC2")
```


---

### Espacial ditribución de

El siguiente mapa muestra la distribución espacial de los índices 1 y 2, agrupados por cuartiles.

```{r, fig.cap = 'Mapa combinado de componentes principales'}
knitr::include_graphics("all/02_Imagenes/idx1_servicio_map_pcall.png")
```

---

## Descarga de gráficos y acceso a código fuente

<div class="btn-group" role="group">
  <a href="all/idx1_servicio_radar_PC1.png" class="btn btn-primary" download>Descargar Radar PC1</a>
  <a href="all/idx1_servicio_radar_PC2.png" class="btn btn-primary" download>Descargar Radar PC2</a>
  <a href="all/idx1_servicio_radar_PC3.png" class="btn btn-primary" download>Descargar Radar PC3</a>
  <a href="all/02_Imagenes/idx1_servicio_map_pc1.png" class="btn btn-info" download>Descargar Mapa PC1</a>
  <a href="all/02_Imagenes/idx1_servicio_map_pc2.png" class="btn btn-info" download>Descargar Mapa PC2</a>
  <a href="all/02_Imagenes/idx1_servicio_map_pcall.png" class="btn btn-info" download>Descargar Mapa Todos los PCs</a>
  <a href="all/02_Imagenes/idx1_servicio_results.png" class="btn btn-success" download>Descargar Resultados Completos</a>
  <a href="all/idx1_servicio_loadings_y_tops.xlsx" class="btn btn-warning" download>Descargar Excel de Loadings y Tops</a>
  <a href="all/01_TablasDescriptivas/idx1_servicio_summary_labels.xlsx" class="btn btn-warning" download>Descargar Tabla Descriptiva</a>
</div>

<div class="btn-group" role="group">
  <a href="https://github.com/jcmunozmora/pulso_antioquia/tree/main/02_Code/AUX_Functions.R" class="btn btn-dark" target="_blank">Ver código fuente en GitHub</a>
  <a href="https://github.com/jcmunozmora/pulso_antioquia" class="btn btn-dark" target="_blank">Repositorio principal</a>
</div>
